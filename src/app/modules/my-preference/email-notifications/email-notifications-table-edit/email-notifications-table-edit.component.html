<div>
    <div class="flex items-start justify-between bg-primary sidepanel-header">
        <div class="text-on-primary" style="padding-top: 6px">Edit Email Notifications</div>
        <div style="padding-top: 2px"><a (click)="projecthubservice.toggleDrawerOpen('', '',[],'',true, true)"
                href="javascript:void(0)" title="Close">
                <mat-icon class="text-on-primary" svgIcon="heroicons_outline:x"></mat-icon>
            </a>
        </div>
    </div>
    <div class="overflow-x-auto">
        <form class="w-full p-[20px]" [formGroup]="emailTableForm" (ngSubmit)="submitnotificationsTable()">
            <div class="h-[87vh]">
                <ngx-datatable [headerHeight]="'auto'" [rowHeight]="'auto'" [scrollbarV]="false" columnMode="flex"
                    class="pr-6 material font-medium text-sm text-default whitespace-nowrap" [rows]="MasterData"
                    #emailNotiTable>

                    <ngx-datatable-column name="Priority" prop="priority" [flexGrow]="0.4">
                        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            {{value}}
                        </ng-template>
                    </ngx-datatable-column>


                    <ngx-datatable-column name="Event" prop="event" [flexGrow]="0.4">
                        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            {{value}}
                        </ng-template>
                    </ngx-datatable-column>


                    <ngx-datatable-column name="Description" prop="description" [flexGrow]="0.8">
                        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            {{value}}
                        </ng-template>
                    </ngx-datatable-column>


                    <ngx-datatable-column name="On/Off" prop="onoff" [resizeable]="false" [sortable]="false"
                        [flexGrow]="0.4">
                        <ng-template let-row="row" let-rowIndex="rowIndex" let-value="value"
                            ngx-datatable-cell-template>
                            <a *ngIf="!emailTableEditStack.includes(rowIndex)" (click)="emailTableEditRow(rowIndex)">
                                <p *ngIf="!value">&nbsp;</p>
                                <mat-icon svgIcon="heroicons_outline:check-circle" *ngIf="value == true"></mat-icon>
                              </a>
                              <form [formGroup]="emailTableForm.controls[rowIndex]" *ngIf="emailTableEditStack.includes(rowIndex)"
                                class="p-2">
                                <div class="flex items-center justify-between">
                                  <mat-slide-toggle  class="h-full" formControlName="onoff">
                                  </mat-slide-toggle>
                                </div>
                              </form>
                        </ng-template>
                    </ngx-datatable-column>

                </ngx-datatable>
            </div>
            <div class="flex items-start justify-between mt-6">
                <a class="min-w-26" mat-flat-button [color]="'primary'"
                    (click)="preferenceservice.toggleDrawerOpen('', '',[],'',true, true)">
                    Cancel
                </a>
                <button class="min-w-26" mat-flat-button [color]="'primary'" type="submit">
                    Submit
                </button>
            </div>
        </form>
    </div>
</div>
