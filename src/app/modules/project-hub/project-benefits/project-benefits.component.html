<div class="flex flex-col flex-auto w-full px-8" *ngIf="viewContent">
    <form [formGroup]="ValueCaptureForm" class="space-y-6 pb-4" [hidden]="viewHisOpPerformance">

        <div class="flex flex-col flex-auto bg-card p-6 pt-4 shadow rounded-2xl overflow-hidden">
            <div class=" pb-3 pt-0 flex items-center justify-between">
                <div class="mr-4 text-xl font-medium tracking-tight leading-6 truncate text-primary">Value Capture
                    Fields</div>
                <div class="flex items-start justify-between">
                    <div style="padding-right: 5px;">
                        <button class="min-w-26 text-primary bg-gray-200" mat-flat-button [color]="'primary-200'"
                            (click)="projecthubservice.toggleDrawerOpen(bulkEditType, 'new', [], id, true)">
                            Historical Operational Performance Metrics
                        </button>

                        <button class="ml-4 text-primary bg-gray-200" mat-flat-button [color]="'primary-200'"
                            *ngIf="projecthubservice.roleControllerControl.projectBenefits"
                            (click)="projecthubservice.toggleDrawerOpen('PrimaryKPISingleEdit',this.valueCreation , [], id)">
                            <mat-icon svgIcon="heroicons_solid:pencil"></mat-icon>&nbsp; Edit
                        </button>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-3 gap-x-6 gap-y-0 w-full">
                <spot-input-date class="w-full read-only" formControlName="valueCaptureStart"
                    [label]="'Value Capture Start Date'" [showHint]="true"
                    [hint]="'‘Value Capture Start’ defines the first fiscal year in which value will be captured.'">
                </spot-input-date>
                <!-- <spot-input class="w-full read-only" formControlName="primaryKpi" [label]="'Primary Value Driver'">
            </spot-input> -->
                <spot-input class="w-full read-only" formControlName="primaryValueDriver" name="primaryValueDriver"
                    [label]="'Primary Value Driver'">
                </spot-input>
                <spot-input class="w-full read-only" formControlName="valueCommentary" [label]="'Value Commentary'">
                </spot-input>
            </div>
        </div>
    </form>
    <!-- <div class="flex justify-between items-start gap-6 w-full" >
        <div class="flex flex-col w-full flex-auto bg-card p-6 mt-6 shadow rounded-2xl overflow-hidden"> -->
    <div class="flex flex-col flex-auto bg-card p-6 pt-4 shadow rounded-2xl overflow-hidden">
        <div class="pb-3 pt-0 flex items-center justify-between">
            <div class="mr-4 text-xl font-medium tracking-tight leading-6 truncate text-primary"></div>

            <div class="flex items-start justify-between">
                <div style="padding-right: 5px;">
                    <button class="min-w-26 ml-4 text-primary bg-gray-200 " mat-flat-button [color]="'primary-200'"
                        (click)="projecthubservice.toggleDrawerOpen(valueCreationViewEditType, 'new', valuecreationngxdata, projectid)">
                        Baseline Plans
                    </button>
                    <!-- <button class="min-w-26 ml-4 text-primary bg-gray-200" mat-flat-button [color]="'primary-200'"
                            *ngIf="projecthubservice.roleControllerControl.projectHub.projectBoard.askNeedEdit"
                            (click)="projecthubservice.toggleDrawerOpen(valueCreationBulkEditType, 'new', [], projectid, true)">
                            <mat-icon svgIcon="heroicons_solid:pencil"></mat-icon>&nbsp; Bulk Edit
                        </button> -->
                    <button class="mx-4 text-primary bg-gray-200 " mat-flat-button [color]="'primary-200'"
                        (click)="projecthubservice.toggleDrawerOpen(valueCreationViewEditType, 'new', valuecreationngxdata, projectid)">
                        <mat-icon svgIcon="heroicons_outline:plus-circle"></mat-icon>&nbsp; Add New
                    </button>
                </div>
                <!-- <div>
        <form [formGroup]="localIncludedItems">
            <mat-slide-toggle class="primary slider-adjust" formControlName="toggle" (checked)="projecthubservice.includeClosedItems.riskIssue.value"  (change)="toggleBaselinePlans($event)" >
                Baseline Plans</mat-slide-toggle>
        </form>
    </div> -->
            </div>
        </div>
        <ngx-datatable [headerHeight]="'auto'" [rowHeight]="'auto'" [scrollbarV]="false" [scrollbarH]="true" columnMode="force"
        class="datatable-VC-80 pr-6 material font-medium text-sm text-default whitespace-nowrap" [rows]="valuecreationngxdata" #valuecreationTable [rowClass]="getRowClass">
            <ngx-datatable-column [resizeable]="false" [width]="30">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <span *ngIf="getLookup(row.statusId) == 'Will Not Meet'" style="background-color: red !important; height: 110px; display: flex;"></span>
                    <span *ngIf="getLookup(row.statusId) == 'At Risk'" style="background-color: #FFCC00 !important; height: 110px; display: flex;"></span>
                    <span *ngIf="getLookup(row.statusId) == 'On Track'" style="background-color: green !important; height: 110px; display: flex;"></span>
                </ng-template>  
            </ngx-datatable-column>
            <ngx-datatable-column name="Status" prop="statusId" [resizeable]="false" [width]="100">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p style="margin-bottom: 68px;">{{getLookup(value)}}</p>
                </ng-template>
            </ngx-datatable-column>
    
            <ngx-datatable-column name="Portfolio Owner" prop="metricPortfolioID" [width]="120">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p style="margin-bottom: 68px;">{{getOwner(value, row.metricTypeID)}}</p>
                </ng-template>
            </ngx-datatable-column>
    
            <ngx-datatable-column name="Category" prop="metricCategoryId" [width]="120">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p style="margin-bottom: 68px;">{{getLookup(value)}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Metric Name" prop="metricName" [width]="160">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p style="margin-bottom: 68px;"><mat-icon *ngIf="value!= ''" class="pe" style="font-size: 17px;"
                        [matTooltip]=row.helpText>help</mat-icon>{{value}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Units" prop="metricUnit" [width]="100">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p style="margin-bottom: 68px;">{{value}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Value Capture Level" prop="metricLevelId" [width]="100">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p style="margin-bottom: 68px;">{{getLookup(value)}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [width]="160">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p>{{ row.FianncialType1 }} <br> {{row.FianncialType2}} <br> {{row.FianncialType3}} <br> {{row.FianncialType4}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column *ngFor="let col of columnYear; let i = index"   [name]=col.year [prop]=col.year [width]="190">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <ng-template ngFor let-obj [ngForOf]="value">
                        <p *ngIf="row.metricFormat == 'Time (HH:MM)' || row.metricFormat == ''">{{ obj.target }} <br>
                            {{ obj.baseline }}<br>
                            {{ obj.current }}<br>
                            {{ obj.actual }}</p>
                        <p *ngIf="row.metricFormat == 'Whole Number' || row.metricFormat == 'Currency (local)'">{{ obj.target | number:'1.0-0' }} <br> {{obj.baseline | number:'1.0-0' }} <br> {{obj.current | number:'1.0-0' }} <br> {{obj.actual | number:'1.0-0' }}</p>
                        <p *ngIf="row.metricFormat == 'Decimal (1 decimal)'">{{ obj.target | number:'1.0-1' }} <br> {{obj.baseline | number:'1.0-1' }} <br> {{obj.current | number:'1.0-1' }} <br> {{obj.actual | number:'1.0-1' }}</p>
                        <p *ngIf="row.metricFormat == 'Percentage (2 decimal)' || row.metricFormat == 'Decimal (2 decimals)'">{{ obj.target | number:'1.0-2' }} <br> {{obj.baseline | number:'1.0-2' }} <br> {{obj.current | number:'1.0-2' }} <br> {{obj.actual | number:'1.0-2' }}</p>
                        <br />
                    </ng-template>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Total" prop="strategicTarget" [width]="190">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p *ngIf="row.metricFormat == 'Time (HH:MM)' || row.metricFormat == ''">{{ value }} <br> {{row.strategicBaseline }} <br> {{row.strategicCurrent }} <br> {{row.strategicActual }}</p>
                    <p *ngIf="row.metricFormat == 'Whole Number' || row.metricFormat == 'Currency (local)'">{{ value | number:'1.0-0' }} <br> {{row.strategicBaseline | number:'1.0-0' }} <br> {{row.strategicCurrent | number:'1.0-0' }} <br> {{row.strategicActual | number:'1.0-0' }}</p>
                    <p *ngIf="row.metricFormat == 'Decimal (1 decimal)'">{{ value | number:'1.0-1' }} <br> {{row.strategicBaseline | number:'1.0-1' }} <br> {{row.strategicCurrent | number:'1.0-1' }} <br> {{row.strategicActual | number:'1.0-1' }}</p>
                    <p *ngIf="row.metricFormat == 'Percentage (2 decimal)' || row.metricFormat == 'Decimal (2 decimals)'">{{ value | number:'1.0-2' }} <br> {{row.strategicBaseline | number:'1.0-2' }} <br> {{row.strategicCurrent | number:'1.0-2' }} <br> {{row.strategicActual | number:'1.0-2' }}</p>
                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </div>

</div>