<div class="pb-6 ">
    <div *ngIf="mode!='Y1'" class="pb-3 pt-0 flex items-center justify-between">
        <div *ngIf="mode=='Capex'" ></div>
        <div *ngIf="mode=='Opex'" class="mr-4 text-xl font-medium tracking-tight leading-6 truncate text-primary">Non-FTE OPEX</div>
        <div  class="text-primary" *ngIf="projecthubservice.roleControllerControl.projectTeam">
            <div class="flex items-start justify-between">
                <div *ngIf="projecthubservice.projectState!='Cancelled'">
                    <button *ngIf="mode !== 'Capex'" class="ml-4 text-primary bg-gray-200" mat-flat-button [color]="'primary-200'"
                            (click)="projecthubservice.toggleDrawerOpen('BudgetForecastOpexBulkEdit', '', inputData, id, true)">
                        <mat-icon svgIcon="heroicons_solid:pencil"></mat-icon>&nbsp; Forecast Edit
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="overflow-x-auto">
        <ngx-datatable [headerHeight]="'auto'" [rowHeight]="'auto'" [scrollbarV]="false" columnMode="flex"
                       class="whitespace-nowrap ten-px-font-table" [rows]="data">
            <ngx-datatable-column name="Reference" prop="active" [flexGrow]="2.5" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p>{{value}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Currency" prop="localCurrencyAbbreviation" [flexGrow]="2.5"  [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p>{{value}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Historical" prop="historical" [flexGrow]="2"  [sortable]="false" [resizeable]="false" *ngIf="mode !== 'Y1'" >
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p *ngIf="row.active == 'Plan' || row.active=='Previous'">&nbsp;</p>
                    <p  [ngClass]="'closed'" *ngIf="row.active == 'Current' || row.active=='Preliminary'" style="text-align:right"> {{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Apr" prop="apr" [flexGrow]="1" [sortable]="false" [resizeable]="false" >
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('apr',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="May" prop="may" [flexGrow]="1.25" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('may',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Jun" prop="jun" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('jun',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Jul" prop="jul" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('jul',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Aug" prop="aug" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('aug',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Sep" prop="sep" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('sep',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Oct" prop="oct" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('oct',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Nov" prop="nov" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('nov',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Dec" prop="dec" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('dec',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Jan" prop="jan" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('jan',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Feb" prop="feb" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('feb',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Mar" prop="mar" [flexGrow]="1" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="getRowStyle('mar',row)">{{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column  prop="annualTotal" [flexGrow]="2" [sortable]="false" [resizeable]="false" *ngIf="mode !== 'Y1'">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p  [ngClass]="'closed'">{{value | number : fractionSize}}</p>
                </ng-template>
                <ng-template ngx-datatable-header-template>
                    {{ y0Label }}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column  prop="y1" [flexGrow]="2" [sortable]="false" [resizeable]="false" *ngIf="mode !== 'Y1'">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p  [ngClass]="{'closed': row.isopen==false}">{{value | number : fractionSize}}</p>
                </ng-template>
                <ng-template ngx-datatable-header-template>
                    {{ y1Label }}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column  prop="y2" [flexGrow]="2" [sortable]="false" [resizeable]="false" *ngIf="mode !== 'Y1'">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p  [ngClass]="{'closed': row.isopen==false}">{{value | number : fractionSize}}</p>
                </ng-template>
                <ng-template ngx-datatable-header-template>
                    {{ y2Label }}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column prop="y3" [flexGrow]="2" [sortable]="false" [resizeable]="false" *ngIf="mode !== 'Y1'">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="{'closed': row.isopen==false}">{{value | number : fractionSize}}</p>
                </ng-template>
                <ng-template ngx-datatable-header-template>
                    {{ y3Label }}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column prop="y4" [flexGrow]="2" [sortable]="false" [resizeable]="false" *ngIf="mode !== 'Y1'">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="{'closed': row.isopen==false}">{{value | number : fractionSize}}</p>
                </ng-template>
                <ng-template ngx-datatable-header-template>
                    {{ y4Label }}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column prop="y5" [flexGrow]="2" [sortable]="false" [resizeable]="false" *ngIf="mode !== 'Y1'">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p [ngClass]="{'closed': row.isopen==false}">{{value | number : fractionSize}}</p>
                </ng-template>
                <ng-template ngx-datatable-header-template>
                    {{ y5Label }}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column  *ngIf="mode=='Capex'" name="Total Capex" prop="cumulativeTotal" [flexGrow]="2.5" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p *ngIf="row.active == 'Plan' || row.active=='Previous'">&nbsp;</p>
                    <p *ngIf="row.active == 'Current' || row.active=='Preliminary'" style="text-align:right"> {{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column  *ngIf="mode=='Opex'" name="TotalOpex" prop="cumulativeTotal" [flexGrow]="2.5" [sortable]="false" [resizeable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <p *ngIf="row.active == 'Plan' || row.active=='Previous'">&nbsp;</p>
                    <p [ngClass]="'closed'" *ngIf="row.active == 'Current' || row.active=='Preliminary'" style="text-align:right"> {{(value ?  value : 0 ) | number : fractionSize}}</p>
                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </div>
</div>
