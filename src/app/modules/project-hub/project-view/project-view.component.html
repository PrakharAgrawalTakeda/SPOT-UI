<div *ngIf='showContent' class="grid grid-cols-1 gap-6 w-full min-w-0 p-8 pt-0 ">
    <div *ngIf="hubsetting.overallStatus" class="xl:col-span-6 flex flex-col flex-auto pt-2 pb-2 pl-6 pr-6 bg-card shadow rounded-2xl overflow-hidden">
        <div class="pl-6 pb-0 flex items-start justify-between pt-2 pr-0">
            <div class="mr-4  font-medium tracking-tight leading-6 truncate " style="padding-top: 8px;">
                <h3 class="text-xl text-primary">Overall Status</h3>
                <p class="text-sm">Status Through: {{projectViewDetails.statusData.statusThrough | date:'dd-MMM-yyyy'}}
                </p>
                <div class="flex items-start justify-between pt-2">
                    <p> Overall Status</p>&nbsp;
                    <mat-icon
                        svgIcon="{{(indicator.getIndicators(indicatorlook[projectViewDetails.statusData.overallStatusId], 'circle')).icontype}}"
                        class="{{(indicator.getIndicators(indicatorlook[projectViewDetails.statusData.overallStatusId], 'circle')).iconcolor}}">
                    </mat-icon>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <p> Budget</p>&nbsp;
                    <mat-icon
                        svgIcon="{{(indicator.getIndicators(projectViewDetails.portfolioCeterData.budgetIndicator, '')).icontype}}"
                        class="{{(indicator.getIndicators(projectViewDetails.portfolioCeterData.budgetIndicator, '')).iconcolor}}">
                    </mat-icon>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <p> Schedule </p>&nbsp;
                    <mat-icon
                        svgIcon="{{(indicator.getIndicators(projectViewDetails.portfolioCeterData.scheduleIndicator, '')).icontype}}"
                        class="{{(indicator.getIndicators(projectViewDetails.portfolioCeterData.scheduleIndicator, '')).iconcolor}}">
                    </mat-icon>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <p> Risk/Issues </p>&nbsp;
                    <mat-icon
                        svgIcon="{{(indicator.getIndicators(projectViewDetails.portfolioCeterData.riskIndicator, '')).icontype}}"
                        class="{{(indicator.getIndicators(projectViewDetails.portfolioCeterData.riskIndicator, '')).iconcolor}}">
                    </mat-icon>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <p> Ask/Needs </p>&nbsp;
                    <mat-icon
                        svgIcon="{{(indicator.getIndicators(projectViewDetails.portfolioCeterData.askNeedIndicator, '')).icontype}}"
                        class="{{(indicator.getIndicators(projectViewDetails.portfolioCeterData.askNeedIndicator, '')).iconcolor}}">
                    </mat-icon>

                </div>
            </div>

            <div>
                <div class="flex items-start justify-between">
                    <div></div>
                    <button class="ml-4 text-primary text-md" mat-flat-button [color]="'primary-200'"
                        (click)="projecthubservice.toggleDrawerOpen('Overall',projectViewDetails.statusData.statusUnquieId, [], id)">
                        <mat-icon class="customIconSize" svgIcon="heroicons_outline:pencil"></mat-icon>&nbsp; Edit
                    </button>
                </div>
                <p class="text-sm">Last Updated: {{projectViewDetails.statusData.statusLastUpdated |
                    date:'dd-MMM-yyyy'}}

            </div>
        </div>
        <!-- Summary -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-6 gap-6 w-full min-w-0 p-6">
            <div
                class="col-span-2 flex flex-col flex-auto p-6 pt-2 pl-3 bg-card shadow rounded-2xl overflow-hidden bg-primary-100 text-on-primary-100 bls-5 overall-brief">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Current Status</div>
                </div>
                <div class="mt-4">
                    {{projectViewDetails.statusData.overallStatusDescription}}
                </div>
            </div>
            <!-- Overdue -->
            <div
                class="col-span-2 flex flex-col flex-auto p-6 pt-2 pl-3 bg-card shadow rounded-2xl overflow-hidden bg-primary-100 text-on-primary-100 bls-5 overall-brief">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Recent Accomplishment</div>
                </div>
                <div class="mt-4">
                    {{projectViewDetails.statusData.recentAccomplishments}}
                </div>
            </div>
            <!-- Issues -->
            <div
                class="col-span-2 flex flex-col flex-auto p-6 pt-2 pl-3 bg-card shadow rounded-2xl overflow-hidden bg-primary-100 text-on-primary-100 bls-5 overall-brief">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Next Priorities</div>
                </div>
                <div class="mt-4">
                    {{projectViewDetails.statusData.nextSteps}}
                </div>
            </div>
        </div>
    </div>

    <!-- Risk Issues -->
    <div *ngIf="hubsetting.risks" class="xl:col-span-6 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
        <div class="p-6">
            <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Risk/Issues</div>
        </div>
        <div class="overflow-x-auto mx-6">
            <table class="w-full bg-transparent" mat-table matSort [dataSource]="riskIssues" [trackBy]="trackByFnRI"
                #riskIssuesTable>

                <!-- Transaction ID -->
                <!-- <ng-container matColumnDef="overallStatus">
                    <th
                        mat-header-cell
                        mat-sort-header
                        *matHeaderCellDef>
                        Overall<br>Status
                    </th>
                    <td
                        mat-cell
                        *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            <mat-icon svgIcon="{{(indicator.getIndicators(project.overallStatus, 'overall')).icontype}}" class = "{{(indicator.getIndicators(project.overallStatus, 'overall')).iconcolor}}"></mat-icon>
                        </span>
                    </td>
                </ng-container>-->

                <!-- Date -->
                <ng-container matColumnDef="logDate">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        Initiated
                    </th>
                    <td mat-cell *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            <a [ngClass]="{'closed': project.closeDate != null}"
                                [routerLink]="['/project-hub',project.projectUid]"> {{project.logDate |
                                date:'dd/MM/yyyy'}}</a>
                        </span>
                    </td>
                </ng-container>

                <!-- Name -->
                <ng-container matColumnDef="dueDate">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        Due
                    </th>
                    <td mat-cell *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            {{project.dueDate| date:'dd/MM/yyyy'}}
                        </span>
                    </td>
                </ng-container>

                <!-- Amount -->
                <ng-container matColumnDef="ifHappens">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        If This Happens
                    </th>
                    <td mat-cell *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            {{project.ifHappens}}
                        </span>
                    </td>
                </ng-container>

                <!-- Status -->
                <ng-container matColumnDef="riskIssueTypeId">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        Type
                    </th>
                    <td mat-cell *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            {{getlookup(project.riskIssueTypeId)}}
                        </span>
                    </td>
                </ng-container>

                <!-- Footer -->

                <tr mat-header-row *matHeaderRowDef="riskIssuesHeaders"></tr>
                <tr class="order-row h-16" mat-row *matRowDef="let row; columns: riskIssuesHeaders;"></tr>
            </table>
        </div>
    </div>
    
    <!-- Ask Needs -->
    <div *ngIf="hubsetting.asks" class="xl:col-span-6 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
        <div class="p-6 flex items-start justify-between">
            <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate text-primary">Ask/Needs</div>

            <div class="text-primary">
                <div class="flex items-start justify-between">
                    <div style="padding-right: 5px;">
                        <button class="ml-4 text-primary" mat-flat-button [color]="'primary-200'"
                            (click)="projecthubservice.toggleDrawerOpen('AskNeed', 'new', [], id)">
                            <mat-icon svgIcon="heroicons_outline:plus-circle"></mat-icon>&nbsp; Add New
                        </button>
                    </div>
                    <div>
                        <mat-slide-toggle class="primary slider-adjust" [checked]="checkedan"
                            (change)="changeaskneed($event)">Include Closed
                            Items</mat-slide-toggle>
                    </div>
                </div>
            </div>
        </div>
        <div class="overflow-x-auto mx-6">
            <ngx-datatable [headerHeight]="64" [rowHeight]="64" [scrollbarV]="false" columnMode="force"
                class="pr-6 font-medium text-sm text-secondary whitespace-nowrap" [rows]="askneedngxdata"
                [sorts]="[{ prop: 'needByDate', dir: 'desc' }]" #myTable>
                <ngx-datatable-column name="indicator" [width]="100" [resizeable]="false">
                    <ng-template let-column="column" ngx-datatable-header-template>Status</ng-template>
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        <mat-icon svgIcon="{{(indicator.getIndicators(value, 'circle')).icontype}}"
                            class="{{(indicator.getIndicators(value, 'circle')).iconcolor}}">
                        </mat-icon>
                        &nbsp;
                        &nbsp;
                        <mat-icon [matTooltip]="getlinkname(row.askNeedUniqueId)" *ngIf="islink(row.askNeedUniqueId)"
                            svgIcon="heroicons_outline:link"></mat-icon>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="askNeed1" [width]="600">
                    <ng-template let-column="column" ngx-datatable-header-template>Ask Or Need</ng-template>
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        <p [ngClass]="{'closed': row.closeDate != null}">{{value}}</p>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="needFromName">
                    <ng-template let-column="column" ngx-datatable-header-template>Need From</ng-template>
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        <p [ngClass]="{'closed': row.closeDate != null}">{{value}}</p>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="needByDate">
                    <ng-template let-column="column" ngx-datatable-header-template>Need Date</ng-template>
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        <p [ngClass]="{'closed': row.closeDate != null}">{{value | date:'dd-MMM-yyyy'}}</p>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [width]="100" [resizeable]="false" [sortable]="false" [draggable]="false"
                    [canAutoResize]="false">
                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                        <div>
                            <a href="javascript:void(0)" title="Expand/Collapse Row" (click)="toggleExpandRow(row)">
                                <mat-icon *ngIf='!expanded' svgIcon="heroicons_outline:chevron-down"></mat-icon>
                                <mat-icon *ngIf='expanded' svgIcon="heroicons_outline:chevron-up"></mat-icon>

                            </a>
                            &nbsp;
                            &nbsp;
                            &nbsp;
                            <a href="javascript:void(0)" title="Edit Single"
                                (click)="projecthubservice.toggleDrawerOpen('AskNeed', row.askNeedUniqueId, projectViewDetails.askNeedData)">
                                <mat-icon svgIcon="heroicons_solid:pencil"></mat-icon>

                            </a>
                        </div>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-row-detail [rowHeight]="100" #myDetailRow (toggle)="onDetailToggle($event)">
                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-row-detail-template>
                        <div style="padding-top:35px;">
                            <div [ngClass]="{'closed': row.closeDate != null}"><strong>Comments:</strong>
                                {{row.comments}}</div>
                        </div>
                    </ng-template>
                </ngx-datatable-row-detail>

            </ngx-datatable>
        </div>
    </div>
    <!-- Milestones -->
    <div *ngIf="hubsetting.milestones" class="xl:col-span-6 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
        <div class="p-6">
            <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Schedule</div>
        </div>
        <div class="overflow-x-auto mx-6">
            <table class="w-full bg-transparent" mat-table matSort [dataSource]="Schedule" [trackBy]="trackByFnS"
                #riskIssuesTable>

                <!-- Transaction ID -->
                <!-- <ng-container matColumnDef="overallStatus">
                    <th
                        mat-header-cell
                        mat-sort-header
                        *matHeaderCellDef>
                        Overall<br>Status
                    </th>
                    <td
                        mat-cell
                        *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            <mat-icon svgIcon="{{(indicator.getIndicators(project.overallStatus, 'overall')).icontype}}" class = "{{(indicator.getIndicators(project.overallStatus, 'overall')).iconcolor}}"></mat-icon>
                        </span>
                    </td>
                </ng-container>-->

                <!-- Date -->
                <ng-container matColumnDef="milestone">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        Milestone
                    </th>
                    <td mat-cell *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            <a [routerLink]="['/project-hub',project.projectUid]"> {{project.milestone}}</a>
                        </span>
                    </td>
                </ng-container>

                <!-- Name -->
                <ng-container matColumnDef="baselineFinish">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        Baseline Finish Date
                    </th>
                    <td mat-cell *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            {{project.baselineFinish | date:'dd/MM/yyyy'}}
                        </span>
                    </td>
                </ng-container>

                <!-- Amount -->
                <ng-container matColumnDef="plannedFinish">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        Finish Date
                    </th>
                    <td mat-cell *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            {{project.plannedFinish | date:'dd/MM/yyyy'}}
                        </span>
                    </td>
                </ng-container>

                <!-- Status -->
                <ng-container matColumnDef="responsiblePersonName">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        Responsible
                    </th>
                    <td mat-cell *matCellDef="let project">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                            {{project.responsiblePersonName}}
                        </span>
                    </td>
                </ng-container>

                <!-- Footer -->

                <tr mat-header-row *matHeaderRowDef="ScheduleHeaders"></tr>
                <tr class="order-row h-16" mat-row *matRowDef="let row; columns: ScheduleHeaders;"></tr>
            </table>
        </div>
    </div>
</div>