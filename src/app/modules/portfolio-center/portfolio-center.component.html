<div class="flex flex-col min-w-0 overflow-hidden pt-12">

    <mat-drawer-container class="flex-auto h-full"
        [ngStyle]="{ 'position' : filterDrawer.opened ? 'fixed' : 'relative'}">
        <!-- Drawer -->
        <mat-drawer class="absolute inset-0 w-2qua dark:bg-gray-900 overflow-hidden" [autoFocus]="false" [mode]="'over'"
            #filterDrawer>
            <form class="w-full overflow-hidden" [formGroup]="PortfolioFilterForm" *ngIf="showContent"
                style="overflow-y: scroll; height: 95vh;">
                <div class=" form-ask-need h-[106.5vh]  overflow-y-scroll">
                    <spot-multiselect-autocomplete formControlName="PortfolioOwner" class="w-full" name="PortfolioOwner"
                        [label]="'Portfolio Owner'" [placeholder]="'Portfolio Owner'" [valuePointer]="'portfolioOwner'"
                        [idPointer]="'portfolioOwnerId'" [dropDownArray]="getPortfolioOwner()" [sortByType]="'custom'"
                        [customSortPointer]="'pfid'">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-user-autocomplete formControlName="ProjectTeamMember"
                        [placeholder]="'Last Name, First Name'" [label]="'Project Team Member'" name="ProjectTeamMember"
                        [showLabel]="true">
                    </spot-multiselect-user-autocomplete>
                    <spot-multiselect-autocomplete formControlName="ExecutionScope" class="w-full"
                        name="ExecutionScope" [label]="'Execution Scope'" [placeholder]="'Execution Scope'"
                        [valuePointer]="'portfolioOwner'" [idPointer]="'portfolioOwnerId'"
                        [dropDownArray]="getExcecutionScope()" [sortByType]="'custom'" [customSortPointer]="'pfid'">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete formControlName="OwningOrganization" class="w-full"
                        name="OwningOrganization" [label]="'Owning Organization'" [placeholder]="'Owning Organization'"
                        [dropDownArray]="owningOrg" [idPointer]="'name'" [valuePointer]="'name'">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete formControlName="ProjectState" class="w-full" name="ProjectState"
                        [label]="'Project State'" [placeholder]="'Project State'" [valuePointer]="'lookUpName'"
                        [idPointer]="'lookUpId'" [dropDownArray]="filterlist.state" [sortByType]="'custom'"
                        [customSortPointer]="'lookUpOrder'">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete formControlName="ProjectPhase" class="w-full" name="ProjectPhase"
                        [label]="'Project Phase'" [placeholder]="'Project Phase'" [valuePointer]="'lookUpName'"
                        [idPointer]="'lookUpId'" [dropDownArray]="filterlist.phase" [sortByType]="'custom'"
                        [customSortPointer]="'lookUpOrder'">
                    </spot-multiselect-autocomplete>

                    <spot-multiselect-autocomplete *ngIf="PortfolioFilterForm.controls.ProjectPhase.value.length != 0" formControlName="CapitalPhase" class="w-full" name="CapitalPhase"
                        [label]="'Capital Phase'" [placeholder]="'Capital Phase'" [valuePointer]="'capitalPhaseName'" [idPointer]="'capitalPhaseID'"
                        [dropDownArray]="filteredPhaseArray" [sortByType]="'custom'" [customSortPointer]="'capitalPhaseOrder'">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete *ngIf="PortfolioFilterForm.controls.ProjectPhase.value.length != 0" formControlName="OEPhase" class="w-full" name="OEPhase"
                        [label]="'OE Phase'" [placeholder]="'OE Phase'" [valuePointer]="'capitalPhaseName'" [idPointer]="'capitalPhaseID'"
                        [dropDownArray]="oePhaseArray" [sortByType]="'custom'" [customSortPointer]="'capitalPhaseOrder'">
                    </spot-multiselect-autocomplete>

                    <spot-multiselect-autocomplete formControlName="ProjectType" class="w-full" name="ProjectType"
                        [label]="'Project Type'" [placeholder]="'Project Type'" [valuePointer]="'name'"
                        [idPointer]="'name'" [dropDownArray]="projectType">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete formControlName="Product" class="w-full" name="Product"
                        [label]="'Product'" [placeholder]="'Product'" [valuePointer]="'fullProductName'"
                        [idPointer]="'productId'" [dropDownArray]="filterlist.products">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete formControlName="TotalCAPEX" class="w-full" name="TotalCAPEX"
                        [label]="'Total CAPEX'" [placeholder]="'Total CAPEX'" [valuePointer]="'lookUpName'"
                        [idPointer]="'lookUpId'" [dropDownArray]="totalCAPEX" [sortByType]="'custom'"
                        [customSortPointer]="'lookUpOrder'">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete formControlName="GMSBudgetOwner" class="w-full" name="GMSBudgetOwner"
                        [label]="'GMS Budget Owner'" [placeholder]="'GMS Budget Owner'"
                        [valuePointer]="'portfolioOwner'" [idPointer]="'portfolioOwnerId'"
                        [dropDownArray]="getGMSBudgetOwner()" [sortByType]="'custom'"
                        [customSortPointer]="'lookUpOrder'">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete formControlName="AGILEWorkstream" class="w-full"
                        name="AGILEWorkstream" [label]="'AGILE Workstream'" [placeholder]="'AGILE Workstream'"
                        [valuePointer]="'lookUpName'" [idPointer]="'lookUpId'" [dropDownArray]="AgileWorkstream">
                    </spot-multiselect-autocomplete>
                    <spot-multiselect-autocomplete formControlName="AGILEWave" class="w-full" name="AGILEWave"
                        [label]="'AGILE Wave'" [placeholder]="'AGILE Wave'" [valuePointer]="'lookUpName'"
                        [idPointer]="'lookUpId'" [dropDownArray]="AgileWave">
                    </spot-multiselect-autocomplete>
                    <spot-toggle class="w-full" formControlName="CAPSProject" [mode]="'dropDown'"
                        [label]="'CAPS Project '">
                    </spot-toggle>
                    <app-spot-multiselect-project-autocomplete formControlName="projectName" [placeholder]="'Search for a Project by Project ID / Title / Budget ID'"
                        [label]="'Project Name'" name="projectName" [showLabel]="true">
                    </app-spot-multiselect-project-autocomplete>
                    <spot-multiselect-autocomplete formControlName="OverallStatus" class="w-full" name="OverallStatus"
                        [label]="'Overall Status'" [placeholder]="'Overall Status'" [valuePointer]="'lookUpName'"
                        [idPointer]="'lookUpId'" [dropDownArray]="AgileWave">
                    </spot-multiselect-autocomplete>
                    <mat-label *ngIf="!showLA" id="localAttribute" style="color: #a0cbf1;" (click)="OpenLA()">+ Add Local Attribute</mat-label>
                    <mat-label *ngIf="showLA" id="localAttribute" style="color: #a0cbf1;" (click)="CloseLA()">+ Hide Local
                        Attribute</mat-label>



                    <form class="pl-3 w-full overflow-hidden" [formGroup]="localAttributeForm" *ngIf="showLA">
                        <div [ngClass]="{'overflow-y-scroll overflow-x-hidden h-[80.5vh] pt-3 pr-3': viewType == 'SidePanel'}" *ngIf="showLA">
                            <div *ngFor="let item of dataLA">
                                <div [ngSwitch]="item.dataType">
                                    <div *ngSwitchCase="'1'" class="w-full mt-4 mb-6" #checkbox>
                                        <spot-toggle class="w-full" formControlName={{item.uniqueId}} [mode]="'toggle'" [label]=item.name>
                                        </spot-toggle>
                                    </div>
                                    <div *ngIf="!item.isMulti" #input>
                                        <spot-input *ngSwitchCase="'6'" class="w-full" formControlName={{item.uniqueId}}
                                            name={{item.uniqueId}} [label]=item.name [placeholder]=item.name>
                                        </spot-input>
                                    </div>
                                    <div *ngIf="item.isMulti" #textarea>
                                        <spot-textarea *ngSwitchCase="'6'" formControlName={{item.uniqueId}} name={{item.uniqueId}}
                                            [label]=item.name [rows]="item.linesCount">
                                        </spot-textarea>
                                    </div>
                                    <div *ngIf="!item.isMulti" #Lookup>
                                        <spot-singleselect-autocomplete *ngSwitchCase="'3'" formControlName={{item.uniqueId}} class="w-full"
                                            name={{item.uniqueId}} [label]=item.name [placeholder]=item.name [valuePointer]="'lookUpName'"
                                            [dropDownArray]="getLookup(item.lookupParentId)" [sortByType]="'custom'"
                                            [customSortPointer]="'lookUpOrder'">
                                        </spot-singleselect-autocomplete>
                                    </div>
                                    <div *ngIf="item.isMulti" #multiLookup>
                                        <spot-multiselect-autocomplete *ngSwitchCase="'3'" formControlName={{item.uniqueId}} class="w-full"
                                            name={{item.uniqueId}} [label]=item.name [placeholder]=item.name [valuePointer]="'lookUpName'"
                                            [idPointer]="'lookUpId'" [dropDownArray]="getLookup(item.lookupParentId)"
                                            [sortByType]="'custom'" [customSortPointer]="'lookUpOrder'">
                                        </spot-multiselect-autocomplete>
                                    </div>
                                    <div style="display: flex;">
                                        <spot-input style="display: flex;" *ngSwitchCase="'4'" class="w-full"
                                            formControlName={{item.name}} name={{item.name}} [label]=item.name
                                            [decimalCount]=item.linesCount [inputType]="'Number'" [callLocation]="'LocalAttribute'"
                                            [placeholder]=item.name>
                                        </spot-input>
                                        <spot-input style="display: flex; left: 10px; position: relative;" *ngSwitchCase="'4'"
                                            class="w-full" formControlName={{item.uniqueId}} name={{item.uniqueId}}
                                            [decimalCount]=item.linesCount [inputType]="'Number'" [callLocation]="'LocalAttribute'"
                                            [placeholder]=item.name>
                                        </spot-input>
                                    </div>
                                    <div style="display: flex;">
                                        <spot-input-date style="display: flex;" *ngSwitchCase="'2'" class="w-full read-only"
                                            formControlName={{item.name}} name={{item.name}} [label]=item.name [placeholder]=item.name>
                                        </spot-input-date>
                                        <spot-input-date style="display: flex; left: 10px; position: relative;" *ngSwitchCase="'2'"
                                            class="w-full read-only" formControlName={{item.uniqueId}} name={{item.uniqueId}}
                                            [placeholder]=item.name>
                                        </spot-input-date>
                                    </div>
                                    <div *ngIf="!item.isMulti" #people>
                                        <spot-singleselect-user-autocomplete *ngSwitchCase="'5'" formControlName={{item.uniqueId}}
                                            [label]=item.name name={{item.uniqueId}} [showLabel]="true"
                                            [placeholder]="'Last Name, First Name'">
                                        </spot-singleselect-user-autocomplete>
                                    </div>
                                    <div *ngIf="item.isMulti" #multiPeople>
                                        <spot-multiselect-user-autocomplete *ngSwitchCase="'5'" formControlName={{item.uniqueId}}
                                            [label]=item.name name={{item.uniqueId}} [showLabel]="true"
                                            [placeholder]="'Last Name, First Name'">
                                        </spot-multiselect-user-autocomplete>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>


                    <div style="width: 15%;">
                    <button class="apply-button" mat-flat-button [color]="'primary'" (click)="applyfilters()">
                        Apply Filters
                    </button>
                    </div>
                </div>
            </form>
        </mat-drawer>
        
        <mat-drawer class="w-3qua dark:bg-gray-900 overflow-hidden" [autoFocus]="false" [mode]="'over'"
            [position]="'end'" #matDrawerRight>
            <div class="p-4">
                Hello I am new
            </div>
        </mat-drawer>
        <!-- Drawer content -->
        <mat-drawer-content class="flex flex-col" style="width: 100vw;">

            <!-- Header -->
            <div [hidden]='!showContent' class="flex-auto border-t -mt-px pt-4 sm:pt-6 flex-auto p-6 sm:p-10">
                <button class="ml-4" mat-flat-button [color]="'primary'" (click)="filterDrawer.toggle()">
                    Filters
                </button>
                <button class="ml-4" mat-flat-button [color]="'primary'" (click)="resetfilters()">
                    Reset Filters (only dev)
                </button>
                <div *ngIf='showContent'
                    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-6 gap-6 w-full min-w-0 mt-8 " @slideInRight>
                    <!-- <div class="xl:col-span-2 flex flex-col flex-auto overflow-hidden bg-card shadow rounded-2xl"
                        @slideInRight>
                        <div class="flex flex-col flex-auto  overflow-hidden p-6">
                            <div class="flex items-start justify-between">
                                <div class="font-medium tracking-tight tile-title text-primary leading-6 truncate">Priority Distribution
                                </div>
                            </div>
                            <div class="flex flex-col flex-auto mt-6 h-60">
                                <apx-chart class="w-full h-50 mt-4" [chart]="chartNewVsReturning.chart"
                                    [colors]="chartNewVsReturning.colors" [labels]="chartNewVsReturning.labels"
                                    [legend]="chartNewVsReturning.legend"
                                    [plotOptions]="chartNewVsReturning.plotOptions"
                                    [series]="chartNewVsReturning.series" [states]="chartNewVsReturning.states"
                                    [tooltip]="chartNewVsReturning.tooltip"></apx-chart>
                            </div>
                        </div>
                        <div class="p-4 text-right">
                            <button class="ml-4" mat-button [color]="'primary-200'" (click)="matDrawerRight.toggle()">
                                View Details <mat-icon svgIcon="heroicons_solid:arrow-sm-right"></mat-icon>
                            </button>
                        </div>
                    </div> -->
                    <div class="xl:col-span-2 flex flex-col flex-auto overflow-hidden bg-card shadow rounded-2xl"
                        @slideInLeft>
                        <div class="sm:col-span-3 lg:col-span-2 flex flex-col flex-auto p-6 overflow-hidden">
                            <div class="tile-title font-medium tracking-tight text-primary leading-6 truncate mb-8">
                                Phase Distribution
                            </div>
                            <div class="flex flex-col flex-auto h-60">
                                <apx-chart class="flex-auto w-full h-50" [chart]="chartBudgetDistribution.chart"
                                    [colors]="chartBudgetDistribution.colors" [series]="chartBudgetDistribution.series"
                                    [plotOptions]="chartBudgetDistribution.plotOptions"
                                    [tooltip]="chartBudgetDistribution.tooltip" [xaxis]="chartBudgetDistribution.xaxis"
                                    [legend]="chartBudgetDistribution.legend" [grid]="chartBudgetDistribution.grid"
                                    [yaxis]="chartBudgetDistribution.yaxis"
                                    [dataLabels]="chartBudgetDistribution.dataLabels"></apx-chart>
                            </div>
                        </div>
                    </div>
                    <div class="xl:col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                        <div class="sm:col-span-3 lg:col-span-2 flex flex-col p-6 flex-auto overflow-hidden">
                            <div class="tile-title font-medium tracking-tight text-primary leading-6 truncate mb-8">
                                Milestones</div>

                            <ng-container *ngFor="let dataset of data.milstoneTile">
                                <div class="grid grid-cols-2 py-3">
                                    <div class="flex items-center">
                                        <div class="ml-3">{{dataset.title}}</div>
                                    </div>
                                    <div class="text-right text-secondary">{{dataset.value}}%</div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <!-- Milestones -->
                    <div class="xl:col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                        <div class="sm:col-span-3 lg:col-span-2 flex flex-col p-6 flex-auto overflow-hidden">
                            <div class="tile-title font-medium tracking-tight leading-6 text-primary truncate mb-2">
                                Budget</div>

                            <div class="flex flex-col mt-2">
                                <div class="grid grid-cols-3 py-3">
                                    <div class="flex items-center"></div>
                                    <div class="text-right font-medium">CAPEX</div>
                                    <div class="text-right font-medium">OPEX</div>
                                </div>
                                <ng-container *ngFor="let dataset of data.budgetTile">
                                    <div class="grid grid-cols-3 py-3">
                                        <div class="flex items-center">
                                            <div class="ml-3">{{dataset.title}}</div>
                                        </div>
                                        <div class="text-right text-secondary">{{dataset.value}}</div>
                                        <div class="text-right text-secondary">{{dataset.value2}}</div>
                                    </div>
                                </ng-container>
                            </div>

                        </div>
                        <div class="p-4 text-right">
                            <label >Forecast Bulk Edit Page</label>
                        </div>
                    </div>
                    <!-- Ask Needs -->
                    <!-- <div class="xl:col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                        <div class="sm:col-span-3 lg:col-span-2 flex flex-col p-6 flex-auto overflow-hidden">
                            <div class="tile-title font-medium tracking-tight text-primary leading-6 truncate mb-8">Next 3 Months</div>
                            <div class="flex flex-col mt-2">
                                <ng-container *ngFor="let dataset of data.nextThreeTile">
                                    <div class="grid grid-cols-2 py-3">
                                        <div class="flex items-center">
                                            <div class="ml-3">{{dataset.title}}</div>
                                        </div>
                                        <div class="text-right text-secondary">{{dataset.value}}</div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                        <div class="p-4 text-right">
                            <button class="ml-4" mat-button [color]="'primary-200'" (click)="matDrawerRight.toggle()">
                                View Details <mat-icon svgIcon="heroicons_solid:arrow-sm-right"></mat-icon>
                            </button>
                        </div>
                    </div> -->
                    <!-- Risk/Issues -->
                    <!-- <div class="xl:col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                        <div class="sm:col-span-3 lg:col-span-2 flex flex-col p-6 flex-auto overflow-hidden">
                            <div class="tile-title font-medium tracking-tight text-primary leading-6 truncate mb-2">Last 3 Months</div>

                            <div class="flex flex-col mt-2">
                                <ng-container *ngFor="let dataset of data.lastThreeTile">
                                    <div class="grid grid-cols-2 py-3">
                                        <div class="flex items-center">
                                            <div class="ml-3">{{dataset.title}}</div>
                                        </div>
                                        <div class="text-right text-secondary">{{dataset.value}}</div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                        <div class="p-4 text-right">
                            <button class="ml-4" mat-button [color]="'primary-200'" (click)="matDrawerRight.toggle()">
                                View Details <mat-icon svgIcon="heroicons_solid:arrow-sm-right"></mat-icon>
                            </button>
                        </div>
                    </div> -->

                </div>
                <div class="p-6">
                    <div class="mr-4 tile-title font-medium tracking-tight text-primary leading-6 truncate">Project Overview</div>
                </div>
                <div style="height: auto;">
                        <button class="ml-4" mat-flat-button [color]="'primary'" (click)="OpenBiReport()">
                            Portfolio Report
                        </button>
                        <button class="ml-4" mat-flat-button [color]="'primary'" (click)="OpenSPOTReport()">
                            SPOT Data (Power BI)
                        </button>
                        <button class="ml-4" mat-flat-button [color]="'primary'">
                            Generate Reports
                        </button>
                </div>
                <div class="mxflex flex-col flex-auto bg-card mt-6 shadow rounded-2xl overflow-hidden" *ngIf="showContent">
                    <ngx-datatable [headerHeight]="'auto'" [rowHeight]="'auto'" [scrollbarV]="false" [scrollbarH]="true" columnMode="force" [externalPaging]="true"
        [count]="totalElements"
        [offset]="pageNumber"
        [limit]="size"
        (page)="setPage('',$event)"
        [footerHeight]="50" [virtualization]="false" class="datatable-PO-80 font-medium text-sm text-default whitespace-nowrap" [rows]="projectOverview" #projectOverviewTable>
                
                        <ngx-datatable-column name="Overall status" prop="overallStatus" [headerClass]="getHeaderClass" [resizeable]="false"
                            [width]="30" [sortable]="true" [frozenLeft]="true">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <mat-icon style ="margin-bottom: 30px;" svgIcon="{{(indicator.getIndicators(value, 'overall')).icontype}}"
                                    class="{{(indicator.getIndicators(value, 'overall')).iconcolor}} ">
                                </mat-icon>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Project ID / Budget ID" prop="problemId" [width]="95" [frozenLeft]="true" [headerClass]="getFrozenHeaderClassID">
                            <ng-template let-row="row" let-rowIndex="rowIndex" let-value="value" ngx-datatable-cell-template>
                                <p style="margin-bottom: 30px;">{{ value }} <br> {{ row.budgetId }}</p>
                            </ng-template>
                        </ngx-datatable-column>

                       <ngx-datatable-column name="Program/Project Name" prop="problemTitle" [width]="210" [frozenLeft]="true" [headerClass]="getFrozenHeaderClass">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <p style="margin-bottom: 34px;" (click)="OpenProject(value)">{{ value }}</p>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Phase (Project/Capital/OE)" prop="projectCapitalOe" [width]="200" [resizeable]="false">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                {{ value }}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Project Manager" prop="pm" [width]="150">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <p>{{value}}</p>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Sponsor" prop="sponsor" [width]="140">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <p>{{value}}</p>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Schedule" prop="scheduleIndicator" [headerClass]="getHeaderClass" [resizeable]="false"
                            [width]="30">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <mat-icon svgIcon="{{(indicator.getIndicators(value, 'overall')).icontype}}"
                                    class="{{(indicator.getIndicators(value, 'overall')).iconcolor}} ">
                                </mat-icon>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Risk/Issues" prop="riskIndicator" [headerClass]="getHeaderClass" [resizeable]="false"
                            [width]="30">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <mat-icon svgIcon="{{(indicator.getIndicators(value, 'overall')).icontype}}"
                                    class="{{(indicator.getIndicators(value, 'overall')).iconcolor}} ">
                                </mat-icon>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Ask/Needs" prop="askNeedIndicator" [headerClass]="getHeaderClass" [resizeable]="false"
                            [width]="30">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <mat-icon svgIcon="{{(indicator.getIndicators(value, 'overall')).icontype}}"
                                    class="{{(indicator.getIndicators(value, 'overall')).iconcolor}} ">
                                </mat-icon>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Budget" prop="budgetIndicator" [headerClass]="getHeaderClass" [resizeable]="false"
                            [width]="30">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <mat-icon svgIcon="{{(indicator.getIndicators(value, 'overall')).icontype}}"
                                    class="{{(indicator.getIndicators(value, 'overall')).iconcolor}} ">
                                </mat-icon>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Spend" prop="budgetSpendIndicator" [headerClass]="getHeaderClass" [resizeable]="false"
                            [width]="30">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <mat-icon svgIcon="{{(indicator.getIndicators(value, 'overall')).icontype}}"
                                    class="{{(indicator.getIndicators(value, 'overall')).iconcolor}} ">
                                </mat-icon>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="DQ%" prop="projectDataQuality" [width]="70">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <p>{{value}}</p>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Total CAPEX Approved/Forecast" prop="totalApprovedCapex" [width]="180">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <!-- <p>{{value}}</p> -->
                                <div class="grid grid-cols-1 text-right">
                                    {{
                                    row.totalApprovedCapex ? row.totalApprovedCapex.toLocaleString() : 0
                                    }} &nbsp; {{row.currencyAbb}}
                                </div>
                                <br />
                                <div class="text-right">
                                    {{ row.forecast ? row.forecast.toLocaleString() : 0 }} &nbsp; {{row.currencyAbb}}
                                </div>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Carbon Impact (Tons CO2)" prop="calculatedEmissionsImpact" [width]="130">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                {{ value }}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Water Impact (m3)" prop="waterImpactUnits" [width]="110">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                {{ value }}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Milestone / Progression" prop="progression" [resizeable]="false"
                            [headerClass]="alignHeaderMiddleClass" [cellClass]="getGraphCellClass" [width]="200" [sortable]="false">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                <apx-chart [chart]="{
                                                            type: 'bar',
                                                            toolbar: {
                                                                show: false,
                                                                tools: {
                                                                    download: false
                                                                }
                                                            },
                                                            height: 75
                                                        }" [series]="[
                                                            {
                                                                name: 'Completed',
                                                                data: [
                                                                    {
                                                                        x: '',
                                                                        y: row.actualCompletedMilestones,
                                                                        goals: [
                                                                            {
                                                                                name: 'Target',
                                                                                value: row.targetToComplete,
                                                                                strokeWidth: 5,
                                                                                strokeColor: '#775DD0'
                                                                            },
                                                                            {
                                                                                name: 'Total',
                                                                                value: row.totalMilestone,
                                                                                strokeWidth: 5,
                                                                                strokeColor: 'rgba(255,255,255,0)'
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]" [dataLabels]="{ enabled: false}"
                                    [xaxis]="{ labels:{ show:false}, max: row.totalMilestone ?  row.totalMilestone : row.targetToComplete }"
                                    [yaxis]="{ labels:{ show:true}}" [tooltip]="{
                                                            x: {
                                                                show:false
                                                            },
                                                            y:{
                                                                formatter: tootlipFormatter
                                                            },
                                                            intersect: false
                                                        }" [plotOptions]="{
                                                            bar: {
                                                                horizontal: true
                                                                }
                                                                }"></apx-chart>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Next Milestone" prop="nextMilestone" [width]="250" [resizeable]="false">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                {{ value }}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Next Milestone Planned Finish Date" prop="nextMilestoneFinishDate" [resizeable]="false"
                            [width]="180">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                {{ value }}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Execution Complete Date" prop="executionCompleteDate" [resizeable]="false"
                            [width]="150">
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                {{ value }}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Execution Duration (Days)" prop="executionDuration" [resizeable]="false" [width]="150"
                            >
                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                {{ value }}
                            </ng-template>
                        </ngx-datatable-column>
                
                    </ngx-datatable>
                </div>
                

            </div>

        </mat-drawer-content>

    </mat-drawer-container>

</div>