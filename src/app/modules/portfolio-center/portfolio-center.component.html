<div class="flex flex-col min-w-0 overflow-hidden">

    <mat-drawer-container class="flex-auto h-full">

        <!-- Drawer -->
        <mat-drawer
            class="absolute inset-0 w-100 dark:bg-gray-900 overflow-hidden"
            [autoFocus]="false"
            [mode]="'over'"
            #matDrawer>
            <div class="p-4">
                Filters drawer<br>
            </div>
        </mat-drawer>

        <!-- Drawer content -->
        <mat-drawer-content class="flex flex-col" style="width: 100vw;">

            <!-- Header -->
            <div [hidden] = '!showContent' class="flex-auto border-t -mt-px pt-4 sm:pt-6 flex-auto p-6 sm:p-10">
                <button
                class="ml-4"
                mat-flat-button
                [color]="'primary'"
                (click)="matDrawer.toggle()">
                Filters
            </button>
                <div *ngIf ='showContent' class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-6 gap-6 w-full min-w-0 mt-8 " @slideInRight>
                    <div class="xl:col-span-2 flex flex-col flex-auto overflow-hidden bg-card shadow rounded-2xl" @slideInRight>
                        <div class="flex flex-col flex-auto  overflow-hidden p-6">
                            <div class="flex items-start justify-between">
                                <div class="text-lg font-medium tracking-tight leading-6 truncate">Priority Distribution</div>
                            </div>
                            <div class="flex flex-col flex-auto mt-6 h-60">
                                <apx-chart
                                    class="w-full h-50 mt-4"
                                    [chart]="chartNewVsReturning.chart"
                                    [colors]="chartNewVsReturning.colors"
                                    [labels]="chartNewVsReturning.labels"
                                    [legend] = "chartNewVsReturning.legend"
                                    [plotOptions]="chartNewVsReturning.plotOptions"
                                    [series]="chartNewVsReturning.series"
                                    [states]="chartNewVsReturning.states"
                                    [tooltip]="chartNewVsReturning.tooltip"></apx-chart>
                            </div>
                          <!--  <div class="mt-8">
                                <div class="-my-3 divide-y">
                                    <ng-container *ngFor="let dataset of data.newVsReturning.series; let i = index">
                                        <div class="grid grid-cols-3 py-3">
                                            <div class="flex items-center">
                                                <div
                                                    class="flex-0 w-2 h-2 rounded-full"
                                                    [style.backgroundColor]="chartNewVsReturning.colors[i]"></div>
                                                <div class="ml-3 truncate">{{data.newVsReturning.labels[i]}}</div>
                                            </div>
                                            <div class="font-medium text-right">{{data.newVsReturning.uniqueVisitors * dataset / 100 | number:'1.0-0'}}</div>
                                            <div class="text-right text-secondary">{{dataset}}%</div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>-->
                        </div>
                    </div>
                    <div class="xl:col-span-2 flex flex-col flex-auto overflow-hidden bg-card shadow rounded-2xl" @slideInLeft>
                        <div class="sm:col-span-3 lg:col-span-2 flex flex-col flex-auto p-6 overflow-hidden">
                            <div class="text-lg font-medium tracking-tight leading-6 truncate mb-8">Phase Distribution</div>
                            <div class="flex flex-col flex-auto h-60">
                                <apx-chart
                                    class="flex-auto w-full h-50"
                                    [chart]="chartBudgetDistribution.chart"
                                    [colors]="chartBudgetDistribution.colors"
                                    [series]="chartBudgetDistribution.series"
                                    [plotOptions]="chartBudgetDistribution.plotOptions"
                                    [tooltip]="chartBudgetDistribution.tooltip"
                                    [xaxis]="chartBudgetDistribution.xaxis"
                                    [legend]="chartBudgetDistribution.legend"
                                    [grid]="chartBudgetDistribution.grid"
                                    [yaxis]="chartBudgetDistribution.yaxis"
                                    [dataLabels]="chartBudgetDistribution.dataLabels"
                                    ></apx-chart>
                            </div>
                        </div>
                    </div>
                    <div class="xl:col-span-2 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                        <div class="flex items-start justify-between">
                            <div class="text-lg font-medium tracking-tight leading-6 truncate">Milestones</div>
                            <div class="ml-2 -mt-2 -mr-3">
                                <button
                                    mat-icon-button
                                    [matMenuTriggerFor]="summaryMenu">
                                    <mat-icon
                                        class="icon-size-5"
                                        [svgIcon]="'heroicons_solid:dots-vertical'"></mat-icon>
                                </button>
                                <mat-menu #summaryMenu="matMenu">
                                    <button mat-menu-item>Yesterday</button>
                                    <button mat-menu-item>2 days ago</button>
                                    <button mat-menu-item>3 days ago</button>
                                </mat-menu>
                            </div>
                        </div>
                        <div class="flex flex-col mt-2">
                            <ng-container *ngFor="let dataset of data.milstoneTile">
                                <div class="grid grid-cols-2 py-3">
                                    <div class="flex items-center">
                                        <div class="ml-3">{{dataset.title}}</div>
                                    </div>
                                    <div class="text-right text-secondary">{{dataset.value}}%</div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <!-- Milestones -->
                    <div class="xl:col-span-2 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                        <div class="flex items-start justify-between">
                            <div class="text-lg font-medium tracking-tight leading-6 truncate">Budget</div>
                            <div class="ml-2 -mt-2 -mr-3">
                                <button
                                    mat-icon-button
                                    [matMenuTriggerFor]="issuesMenu">
                                    <mat-icon
                                        class="icon-size-5"
                                        [svgIcon]="'heroicons_solid:dots-vertical'"></mat-icon>
                                </button>
                                <mat-menu #issuesMenu="matMenu">
                                    <button mat-menu-item>Yesterday</button>
                                    <button mat-menu-item>2 days ago</button>
                                    <button mat-menu-item>3 days ago</button>
                                </mat-menu>
                            </div>
                        </div>
                        <div class="flex flex-col mt-2">
                            <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center"></div>
                                <div class="text-right font-medium">CAPEX</div>
                                <div class="text-right font-medium">OPEX</div>
                            </div>
                            <ng-container *ngFor="let dataset of data.budgetTile">
                                <div class="grid grid-cols-3 py-3">
                                    <div class="flex items-center">
                                        <div class="ml-3">{{dataset.title}}</div>
                                    </div>
                                    <div class="text-right text-secondary">{{dataset.value}}</div>
                                    <div class="text-right text-secondary">{{dataset.value2}}</div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <!-- Ask Needs -->
                    <div class="xl:col-span-2 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                        <div class="flex items-start justify-between">
                            <div class="text-lg font-medium tracking-tight leading-6 truncate">Next 3 Months</div>
                            <div class="ml-2 -mt-2 -mr-3">
                                <button
                                    mat-icon-button
                                    [matMenuTriggerFor]="featuresMenu">
                                    <mat-icon
                                        class="icon-size-5"
                                        [svgIcon]="'heroicons_solid:dots-vertical'"></mat-icon>
                                </button>
                                <mat-menu #featuresMenu="matMenu">
                                    <button mat-menu-item>Yesterday</button>
                                    <button mat-menu-item>2 days ago</button>
                                    <button mat-menu-item>3 days ago</button>
                                </mat-menu>
                            </div>
                        </div>
                        <div class="flex flex-col mt-2">
                            <ng-container *ngFor="let dataset of data.nextThreeTile">
                                <div class="grid grid-cols-2 py-3">
                                    <div class="flex items-center">
                                        <div class="ml-3">{{dataset.title}}</div>
                                    </div>
                                    <div class="text-right text-secondary">{{dataset.value}}</div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <!-- Risk/Issues -->
                    <div class="xl:col-span-2 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                        <div class="flex items-start justify-between">
                            <div class="text-lg font-medium tracking-tight leading-6 truncate">Last 3 Months</div>
                            <div class="ml-2 -mt-2 -mr-3">
                                <button
                                    mat-icon-button
                                    [matMenuTriggerFor]="overdueMenu">
                                    <mat-icon
                                        class="icon-size-5"
                                        [svgIcon]="'heroicons_solid:dots-vertical'"></mat-icon>
                                </button>
                                <mat-menu #overdueMenu="matMenu">
                                    <button mat-menu-item>Yesterday</button>
                                    <button mat-menu-item>2 days ago</button>
                                    <button mat-menu-item>3 days ago</button>
                                </mat-menu>
                            </div>
                        </div>
                        <div class="flex flex-col mt-2">
                            <ng-container *ngFor="let dataset of data.lastThreeTile">
                                <div class="grid grid-cols-2 py-3">
                                    <div class="flex items-center">
                                        <div class="ml-3">{{dataset.title}}</div>
                                    </div>
                                    <div class="text-right text-secondary">{{dataset.value}}</div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-1 xl:grid-cols-3 gap-8 w-full mt-8">
                    <!-- Recent transactions table -->
                    <div class="xl:col-span-3 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden" @slideInLeft>
                        <div class="p-6">
                            <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Your Projects</div>
                            <div class="text-secondary font-medium">1 initiated, 1 completed, 2 excecuting</div>
                        </div>
                        <div class="overflow-x-auto mx-6">
                            <table
                                class="w-full bg-transparent"
                                mat-table
                                matSort
                                [dataSource]="projects"
                                [trackBy]="trackByFn"
                                #recentTransactionsTable>
                
                                <!-- Transaction ID -->
                                <ng-container matColumnDef="overallStatus">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        Overall<br>Status
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            <mat-icon svgIcon="{{(indicator.getIndicators(project.overallStatus, 'overall')).icontype}}" class = "{{(indicator.getIndicators(project.overallStatus, 'overall')).iconcolor}}"></mat-icon>
                                        </span>
                                    </td>
                                </ng-container>
                
                                <!-- Date -->
                                <ng-container matColumnDef="problemTitle">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        Title
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            <a [routerLink]="['/project-hub',project.projectUid]"> {{project.problemTitle}}</a>
                                        </span>
                                    </td>
                                </ng-container>
                
                                <!-- Name -->
                                <ng-container matColumnDef="phase">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        Phase
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            {{project.phase}}
                                        </span>
                                    </td>
                                </ng-container>
                
                                <!-- Amount -->
                                <ng-container matColumnDef="PM">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        PM /Sponsor
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            {{project.pm}}<br>
                                            {{project.sponsor}}
                                        </span>
                                    </td>
                                </ng-container>
                
                                <!-- Status -->
                                <ng-container matColumnDef="schedule">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        Schedule
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            <mat-icon svgIcon="{{(indicator.getIndicators(project.scheduleIndicator, '')).icontype}}" class = "{{(indicator.getIndicators(project.scheduleIndicator, '')).iconcolor}}"></mat-icon>
                                        </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="risk">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        Risk/<br>
                                        Issues
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            <mat-icon svgIcon="{{(indicator.getIndicators(project.riskIndicator, '')).icontype}}" class = "{{(indicator.getIndicators(project.riskIndicator, '')).iconcolor}}"></mat-icon>
                                        </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="ask">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        Ask/<br>
                                        Needs
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            <mat-icon svgIcon="{{(indicator.getIndicators(project.askNeedIndicator, '')).icontype}}" class = "{{(indicator.getIndicators(project.askNeedIndicator, '')).iconcolor}}"></mat-icon>
                                        </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="budget">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        Budget/<br>
                                        Spend
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            <mat-icon svgIcon="{{(indicator.getIndicators(project.budgetIndicator, '')).icontype}}" class = "{{(indicator.getIndicators(project.budgetIndicator, '')).iconcolor}}"></mat-icon>
                                        </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="capex">
                                    <th
                                        mat-header-cell
                                        mat-sort-header
                                        *matHeaderCellDef>
                                        Total Capex<br>
                                        Approved/<br>
                                        Forecast
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let project">
                                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                            {{project.currentYrCapExBudget}} USD<br>
                                            {{project.currentYrCapExForecast}} USD
                                        </span>
                                    </td>
                                </ng-container>
                
                                <!-- Footer -->
                                <ng-container matColumnDef="recentOrdersTableFooter">
                                    <td
                                        class="py-6 px-0 border-0"
                                        mat-footer-cell
                                        *matFooterCellDef
                                        colspan="6">
                                        <button mat-stroked-button>See all Projects</button>
                                    </td>
                                </ng-container>
                
                                <tr
                                    mat-header-row
                                    *matHeaderRowDef="recentTransactionsTableColumns"></tr>
                                <tr
                                    class="order-row h-16"
                                    mat-row
                                    *matRowDef="let row; columns: recentTransactionsTableColumns;"></tr>
                                <tr
                                    class="h-16 border-0"
                                    mat-footer-row
                                    *matFooterRowDef="['recentOrdersTableFooter']"></tr>
                            </table>
                        </div>
                    </div>
                </div>
                
            </div>

        </mat-drawer-content>

    </mat-drawer-container>

</div>
