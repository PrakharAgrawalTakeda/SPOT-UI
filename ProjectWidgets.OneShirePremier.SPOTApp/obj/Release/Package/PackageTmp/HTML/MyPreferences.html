<!DOCTYPE html>
<html>
<head>
    <title>My Preference</title>
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <script src="../GlobalJS/jquery.min.js"></script>

    <script src="../GlobalJS/angular.min.js"></script>
    <script src="../GlobalJS/bootstrap.min.js"></script>
    <script src="../GlobalJS/angular-route.min.js"></script>
    <script src="../GlobalJS/kendo.all.min.js"></script>
    <script src="../GlobalJS/kendo.aspnetmvc.min.js"></script>
    <script src="../GlobalJS/Constants.js" type="text/javascript"></script>
    <script src="../GlobalJS/SPOTApp.js"></script>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />

    <script>
        var today = new Date();
        var time = today + ":" + today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();

        if (window.location.hostname != "localhost") {
            $.get(window.location.protocol + "//" + window.location.host + "/.auth/me", function (data, status) {
                for (var key in data[0]["user_claims"]) {
                    var obj = data[0]["user_claims"][key];
                    if (obj.typ == "http://schemas.microsoft.com/identity/claims/objectidentifier") {
                        currentUserId = obj.val;
                    }
                    if (obj.typ == "name") {
                        currentUserName = obj.val;
                    }
                    if (currentUserName != "" && currentUserId != "") {
                        // deferred.resolve(currentUserId);
                        break;
                    }
                }
            }).fail(function () {
                location.reload();
            });
        }
    </script>
    <script>
        document.write("<script type='text/javascript' src='../GlobalJS/Utility.js?v=" + time + "'><\/script>" +
                       "<script type='text/javascript' src='../GlobalJS/Constants.js?v=" + time + "'><\/script>" +
                       "<script type='text/javascript' src='../Directive/Directive.js?v=" + time + "'><\/script>" +
                       "<script type='text/javascript' src='../GlobalJS/GETPostService.js?v=" + time + "'><\/script>" +
                       "<script type='text/javascript' src='../Controller/TopMenuCtrl.js?v=" + time + "'><\/script>" +
                        "<script type='text/javascript' src='../Controller/MyPreferenceCtrl.js?v=" + time + "'><\/script>" +
                       "<link rel='stylesheet' href='../Styles/bootstrap.min.css' />" +
                       "<link rel='stylesheet' type='text/css' href='../Styles/site.css?v=" + time + "'/>"
        );

    </script>
    <script>
        // Get HTML head element
        var head = document.getElementsByTagName('HEAD')[0];
        // Create new link Element
        var link = document.createElement('link');
        // set the attributes for link element
        link.rel = 'stylesheet';
        link.type = 'text/css';
        switch (environment) {
            case "qa": link.href = '../Styles/header-qa.css'; break;
            case "training": link.href = '../Styles/header-training.css'; break;
            default: link.href = '../Styles/header.css';
        }

        // Append link element to HTML head
        head.appendChild(link);
    </script>
    <link href="../Styles/kendo.common.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../Styles/kendo.default.min.css" />
    <link rel="stylesheet" href="../Styles/kendo.rtl.min.css" />
    <link rel="stylesheet" href="../Styles/kendo.default.mobile.min.css" />
</head>
<body>
    <div ng-app="SPOTApp">
        <div ng-controller="MyPreferenceCtrl as vm" ng-init='vm.initMyPreference()' class="ng-cloak">
            <div class="row row-offcanvas row-offcanvas-left">
                <div id="main-section" class="col-xs-12 column">
                    <div>
                        <directive-top-menu></directive-top-menu>
                    </div>

                    <div class="main-section-content row" style="">
                        <div class="container-fluid">
                            <div id="tabstrip" class="tabsstrip" kendo-tab-strip k-content-urls="[ null, null]">
                                <ul>
                                    <li class="k-state-active">My Preference</li>
                                    <li ng-show="vm.isPortfolioGroupOwner">Milestone Sets</li>
                                  </ul>
        
                                <div class="contentRow">
                                    <div class="row marg0">
                                        <label class="pageHeading">Archived Projects</label>
                                    </div>
                                    <div class="row marg0">
                                        <div class="">
                                            <div class="form-group option">
                                                <div class="col-md-2"><label class="control-label">Include Archived Projects</label></div>
                                                <div class="col-md-10 inputGroupContainer">
                                                    <div class="fieldgroup inlineFieldGroup">
                                                        <input type="radio" name="includeArchived" ng-model="vm.userInfo.includeArchived" ng-value=true ng-click="vm.showAlert($event)"><label for="Yes">
                                                            &nbsp;Yes
                                                        </label>
                                                    </div>
                                                    <div class="fieldgroup inlineFieldGroup">
                                                        <input type="radio" name="includeArchived" ng-model="vm.userInfo.includeArchived" ng-value=false><label for="No">&nbsp;No</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row btnsRow margLR0 padLR15 margT23">
                                        <button id="edit" class="k-primary" ng-click="vm.cancelSubmit()">Cancel</button>
                                        <button id="edit" ng-click="vm.saveMyPreference()" class="k-primary float-R">Save</button>
                                    </div>
                                    <div id="confirm"></div>
                                </div>
                                <div class="contentRow">
                                    <div ng-show="vm.isPortfolioGroupOwner">

                                        <div class="row">
                                            <span class="AddNewRowicon" ng-click="vm.OpenMilestoneDetailsInfo()">
                                                <span class="k-icon k-i-plus"></span>Add New
                                            </span>
                                        </div>
                                        <div class="row">
                                            <div id="gridMilestoneSets"></div>
                                        </div>
                                        <div class="row btnsRow margLR0 padLR15 margT23">
                                            <button id="edit" class="k-primary" ng-click="vm.cancelSubmit()">Close</button>
                                        </div>
                                    </div>
                                    <div id="dialogMilestoneDetails" kendo-window="dialogMilestoneDetails" k-title="'Milestone Set Details'" k-modal="true" k-visible="false">
                                        <div class="row" style="padding: 15px 0px !important;">
                                            <!-- -->
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                                                <div class="col-xs-6 info">
                                                    <div class="col-xs-6 info">
                                                        <label class="col-lg-12 col-md-12 col-sm-12 col-xs-12 horLabel">Milestone Set</label>
                                                    </div>
                                                    <div class="col-xs-6 info">
                                                        <input maxlength="2000" ng-model="vm.SelectedMilestoneSetObj.MilestoneSet" kendotextbox class="k-textbox" style="width:100%" />

                                                    </div>
                                                </div>
                                                <div class="col-xs-6 info">
                                                    <div class="col-xs-6 info">
                                                        <label class="col-lg-12 col-md-12 col-sm-12 col-xs-12 horLabel">
                                                            Portfolio Owner
                                                        </label>
                                                    </div>
                                                    <div class="col-xs-6 info">
                                                        <select id="ddl_MF_PortfolioOwnerDetails" kendo-combo-box
                                                                k-placeholder="'Select and/or Type to Search'"
                                                                k-data-text-field="'PortfolioOwner'"
                                                                k-data-value-field="'PortfolioOwnerID'"
                                                                k-data-source="vm.dsPortfolioOwner"
                                                                style="width: 100%"
                                                                k-ng-model="vm.selectedPortfolioOwner"
                                                                class="form-control"></select>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="EditView">
                                            <div class="row">
                                                <label class="tableHeading">Milestones</label>
                                                <span class="AddNewRowicon" ng-click="vm.AddNewRow('MilestoneSetDetailGrid')">
                                                    <span class="k-icon k-i-plus"></span>Add New
                                                </span>
                                                <!--<a ng-click="vm.AddNewRow('gridProjectCharterMilestone')" class="k-icon k-i-plus AddNewRowicon"></a>-->
                                            </div>
                                            <div class="row">
                                                <div>
                                                    <div id="MilestoneSetDetailGrid"></div>
                                                    <div>&nbsp;</div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <button id="edit" class="k-primary" ng-click="vm.closeWindow()">Cancel</button>
                                                <button id="edit" ng-click="vm.saveMilestoneSetDetails()" class="k-primary float-R">Save</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                              
                            </div>
                    </div>
                </div>
            </div>
                <div id="preloader" style="display:none">
                    <div id="loaderLogo"><img src="../Images/spotlogo1.PNG" width="90" height="72" /></div>
                    <div id="loader"></div>
                </div>
             </div>
</div>
    </div>
</body>
</html>
