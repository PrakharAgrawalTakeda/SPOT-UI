function ProjectHubCtrl(n,i,r,u,f,o){function di(){try{n.$emit("openRiskIssueDialog",ct)}catch(t){var i={method:"openRiskIssueDialog",exceptionMessage:"message:"+t.message+" stack:"+t.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",i)).then(function(){alert(errormessage)})}}function gi(){try{n.$emit("openOverallStatusDialog",s.overAllData,ot)}catch(t){var i={method:"openOverallStatusDialog",exceptionMessage:"message:"+t.message+" stack:"+t.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",i)).then(function(){alert(errormessage)})}}function nr(){try{n.$emit("openAskNeedDialog",lt)}catch(t){var i={method:"openAskNeedDialog",exceptionMessage:"message:"+t.message+" stack:"+t.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",i)).then(function(){alert(errormessage)})}}function tr(){try{n.$emit("openScheduleDialog",at)}catch(t){var i={method:"openScheduleDialog",exceptionMessage:"message:"+t.message+" stack:"+t.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",i)).then(function(){alert(errormessage)})}}function ir(){var n,t,f;try{s.riskIssueClosed=!1;s.askNeedClosed=!1;s.scheduleClosed=!1;n={ProjectID:SeletedProjectId,DataType:"TemplateDetails"};t={ProjectID:SeletedProjectId,DataType:"Template"};$.when(o.postDataWCFAsync("getLookupData",ki),o.getDataWCFAsync("getAskNeed/"+SeletedProjectId),o.getDataWCFAsync("getSchedule/"+SeletedProjectId),o.getDataWCFAsync("getRiskIssue/"+SeletedProjectId),o.getDataWCFAsync("getOverAllStatus/"+SeletedProjectId),o.getDataWCFAsync("getProjectHubStatus/"+SeletedProjectId),o.getDataWCFAsync("getUserPermissionByProjectUserId/"+currentUserId+"/"+SeletedProjectId),o.postDataWCFAsync("getUserPermissionById",currentUserId),o.postDataWCFAsync("getProjectBaseline",SeletedProjectId),o.postDataWCFAsync("getHubSetting",SeletedProjectId),o.postDataWCFAsync("getUserGroupById",currentUserId),o.postDataWCFAsync("getProjectBaselineLog",SeletedProjectId),o.postDataWCFAsync("getProjectCharterKeySuccess",SeletedProjectId),o.postDataWCFAsync("getMilestoneSetProjectHub",t),o.postDataWCFAsync("getMilestoneSetProjectHub",n)).then(function(n,t,u,f,e,a,v,y,p,k,d,g,nt,rt,ut){var bt,ni,oi,gt,si,yi,pi,ti,wi,ii,ri,ui,wt,vt,ki,dt,di,yt,pt,nr;try{if(bt=JSON.parse(v.getUserPermissionByProjectUserIdResult),bt.length>0?(bt[0].canRead?s.Edit=bt[0].canEdit?!0:!1:window.location.href=portfolioCenterpath,SeletedProjectName=bt[0].ProblemTitle):window.location.href=portfolioCenterpath,ot=JSON.parse(nt.getProjectCharterKeySuccessResult),s.ProjectName=SeletedProjectName,ni=JSON.parse(y.getUserPermissionByIdResult),ni!=null&&(oi=ni.filter(function(n){return n.Permission==updateBaselinePerm}),oi.length>0&&(s.ShowBaseline=!0)),gt=JSON.parse(p.getProjectBaselineResult),gt.length>0?(s.ProjectBaselineCount=gt[0].BaselineCount,s.ProjectBaselineDate=kendo.toString(kendo.parseDate(gt[0].ModifiedDate),"dd-MMM-yy"),s.ProjectBaselineCount==0&&(s.showjustification=!1)):s.showjustification=!1,si=JSON.parse(k.getHubSettingResult),angular.forEach(si,function(n){switch(n.LookUpID){case overAllHubStatus:s.showOverall=n.HubValue;break;case riskIssueOption:s.showRiskIssue=n.HubValue;break;case milestoneOption:s.showMilestone=n.HubValue;break;case askNeedOption:s.showAskNeed=n.HubValue}}),s.todayDate=kendo.toString(kendo.parseDate(new Date),"MM/dd/yyyy"),s.overAllStatus=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===overAllStatus}),yi=JSON.parse(e.getOverAllStatusResult),s.overAllData=yi[0],(s.overAllData!=null||s.overAllData!=undefined)&&(s.OverallStatusColor=s.overAllData.OverallStatus,s.overAllData.StatusLastUpdated=kendo.toString(kendo.parseDate(s.overAllData.StatusLastUpdated),"dd-MMM-yy"),angular.copy(s.overAllData,s.OverAllDataMain)),pi=JSON.parse(a.getProjectHubStatusResult),s.projectHubStatus=pi[0],s.ProjectName=s.projectHubStatus.ProjectName,isConfidentialProject=s.projectHubStatus.IsConfidential,SeletedProjectName=s.ProjectName,ProjectSiteUrl=s.projectHubStatus.ProjectSiteURL,s.projectHubStatus.ProjectType!=null&&s.projectHubStatus.ProjectType==simpleProjectType&&(ti=JSON.parse(d.getUserGroupByIdResult),ti.length>0&&(wi=ti.filter(function(n){return n.LookUpID==spotProjectManagerId}),wi.length>0&&(s.projectHubStatus.IsConfidential?s.Edit&&(s.ShowBaseline=!0):s.ShowBaseline=!0))),ii=JSON.parse(t.getAskNeedResult),angular.copy(ii,it),b=ii.filter(function(n){return n.CloseDate==null}),ri=JSON.parse(u.getScheduleResult),angular.copy(ri,h),c=ri.filter(function(n){return n.CompletionDate==null}),ui=JSON.parse(f.getRiskIssueResult),angular.copy(ui,tt),w=ui.filter(function(n){return n.CloseDate==null}),ct=tt.filter(function(n){return n.IncludeInReport==!0}),lt=it.filter(function(n){return n.IncludeInReport==!0}),at=h.filter(function(n){return n.IncludeInReport==!0}),ft=JSON.parse(g.getProjectBaselineLogResult),et=JSON.parse(rt),ht=JSON.parse(ut),ei)yt=new kendo.data.DataSource({data:w}),pt=$("#gridRiskIssue").data("kendoGrid"),yt.read(),pt.setDataSource(yt),yt=new kendo.data.DataSource({data:c}),pt=$("#gridSchedule").data("kendoGrid"),yt.read(),pt.setDataSource(yt),yt=new kendo.data.DataSource({data:b}),pt=$("#gridAskNeed").data("kendoGrid"),yt.read(),pt.setDataSource(yt),yt=new kendo.data.DataSource({data:ft}),pt=$("#gridBaselineLogs").data("kendoGrid"),yt.read(),pt.setDataSource(yt),yt=new kendo.data.DataSource({data:et}),pt=$("#gridHubAddMilestones").data("kendoGrid"),yt.read(),pt.setDataSource(yt),$("#gridRiskIssueBulkEdit").data("kendoGrid").dataSource.read(),$("#gridScheduleBulkEdit").data("kendoGrid").dataSource.read(),$("#gridAskNeedBulkEdit").data("kendoGrid").dataSource.read();else{for(s.dsFuntionalGroup=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==funtionalGroup}),vt=0;vt<s.dsFuntionalGroup.length;vt++)wt={text:s.dsFuntionalGroup[vt].LookUpMemberName,value:s.dsFuntionalGroup[vt].LookUpMemberID},st.push(wt);for(s.probability=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==riskIssueProbability}),vt=0;vt<s.probability.length;vt++)wt={text:s.probability[vt].LookUpMemberName,value:s.probability[vt].LookUpMemberID},hi.push(wt);for(s.Impact=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==riskIssueImpact}),vt=0;vt<s.Impact.length;vt++)wt={text:s.Impact[vt].LookUpMemberName,value:s.Impact[vt].LookUpMemberID},ci.push(wt);for(s.riskIssueType=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==riskIssueType}),vt=0;vt<s.riskIssueType.length;vt++)wt={text:s.riskIssueType[vt].LookUpMemberName,value:s.riskIssueType[vt].LookUpMemberID},kt.push(wt);for(s.dsPrimaryKPI=i("orderBy")(JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==topsPrimaryKpi}),"LookUpMemberOrder"),vt=0;vt<s.dsPrimaryKPI.length;vt++)ki={text:s.dsPrimaryKPI[vt].LookUpMemberName,value:s.dsPrimaryKPI[vt].LookUpMemberID},fi.push(ki);for(s.performStatus=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==performanceStatus}),dt=0;dt<s.performStatus.length;dt++)di={text:s.performStatus[dt].LookUpMemberName,value:s.performStatus[dt].LookUpMemberID},bi.push(di);fr();er();or();li();ai();vi();gr();ur();yr();iu();ei=!0}s.BaselineCount.IncreaseBaseline="YES";r.$digest();hideLoading()}catch(gi){nr={method:"prepareDataForProjectHub",exceptionMessage:"message:"+gi.message+" stack:"+gi.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",nr)).then(function(){alert(errormessage)});hideLoading()}})}catch(u){f={method:"prepareDataForProjectHub",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){alert(errormessage)});hideLoading()}}function rr(){s.myvalue=!0}function ur(){var n,t,r;try{n=[{template:"",field:"StatusIndicator",title:" ",width:"1%",attributes:{"class":"#:StatusIndicator#"}},{field:"KPIID",title:"KPI",values:fi},{field:"Metric",title:"Metric"},{field:"CurrentState",title:"Baseline"},{field:"TargetPerformance",title:"Target Performance",headerAttributes:{"class":"wrap-header"}},{field:"ActualPerformance",title:"Actual Performance",headerAttributes:{"class":"wrap-header"}}];t=new kendo.data.DataSource({transport:{read:function(n){n.success(ot)}},batch:!0,schema:{model:{fields:{StatusIndicator:{type:"string"},KPIID:{type:"string"},Metric:{type:"string"},CurrentState:{type:"string"},TargetPerformance:{type:"string"},ActualPerformance:{type:"string"}}}}});$("#overAllStatusPerformance").kendoGrid({dataSource:t,columns:n,navigatable:!0})}catch(i){hideLoading();r={method:"InitkGridOverAllPerformance",exceptionMessage:"message:"+i.message+" stack:"+i.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",r)).then(function(){alert(errormessage)})}}function fr(){try{$("#gridRiskIssue").kendoGrid({dataSource:{data:w,sort:[{field:"DueDate",dir:"asc"}]},groupable:!1,sortable:!0,schema:{model:{fields:{StatusIndicator:{type:"string"},LogDate:{type:"date"},DueDate:{type:"date"},IfHappens:{type:"string"},RiskIssueTypeID:{type:"string"}}}},columns:[{template:"",field:"StatusIndicator",title:" ",width:"1%",attributes:{"class":"#:StatusIndicator#"}},{template:"#if(ChildLink == 1) {#<span class='k-icon k-i-unlink-horizontal' style='color:blue;'><\/span>#}#",title:" ",width:"4%"},{field:"LogDate",title:"Date Initiated",headerAttributes:{"class":"wrap-header"},width:"18%",template:function(n){return n.CloseDate!=null&&n.CloseDate!=""?n.LogDate!=null&&n.LogDate!=""?"<span class='text-italic'>"+kendo.toString(kendo.parseDate(new Date(n.LogDate),"yyyy-MM-dd"),"dd-MMM-yy")+"<\/span>":"":n.LogDate!=null&&n.LogDate!=""?kendo.toString(kendo.parseDate(new Date(n.LogDate),"yyyy-MM-dd"),"dd-MMM-yy"):""}},{field:"DueDate",title:"Due Date",headerAttributes:{"class":"wrap-header"},width:"18%",template:function(n){return n.CloseDate!=null&&n.CloseDate!=""?n.DueDate!=null&&n.DueDate!=""?"<span class='text-italic'>"+kendo.toString(kendo.parseDate(new Date(n.DueDate),"yyyy-MM-dd"),"dd-MMM-yy")+"<\/span>":"":n.DueDate!=null&&n.DueDate!=""?kendo.toString(kendo.parseDate(new Date(n.DueDate),"yyyy-MM-dd"),"dd-MMM-yy"):""}},{field:"IfHappens",title:"If This Happens",headerAttributes:{"class":"wrap-header"},template:function(n){return n.CloseDate!=null&&n.CloseDate!=""?n.IfHappens!=null&&n.IfHappens!=""?"<span class='text-italic'>"+n.IfHappens+"<\/span>":"":n.IfHappens!=null&&n.IfHappens!=""?n.IfHappens:""},width:"40%"},{field:"RiskIssueTypeID",title:"Type",width:"10%",values:kt,template:function(n){return n.CloseDate!=null&&n.CloseDate!=""?n.RiskIssueTypeID!=null&&n.RiskIssueTypeID!=""?"<span class='text-italic'>"+n.RiskIssueTypeName+"<\/span>":"":n.RiskIssueTypeID!=null&&n.RiskIssueTypeID!=""?n.RiskIssueTypeName:""}},{hidden:!s.Edit,command:[{name:" ",iconClass:"k-icon k-i-edit",width:"10%",click:function(t){var i,r,f;try{t.preventDefault();i=$(t.target).closest("tr");r=this.dataItem(i);n.$emit("RiskIssueEdit",r,ct)}catch(u){f={method:"InitKendoGridRiskIssue",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){alert(errormessage)})}}}]}],detailTemplate:kendo.template($("#riskIssuedetail-template").html())});$("#gridRiskIssue").kendoTooltip({filter:"td:nth-child(3)",position:"absolute",width:300,show:function(){this.content.text().length>0?this.content.parent().css("visibility","visible"):this.content.parent().css("visibility","hidden")},content:function(n){var t=$("#gridRiskIssue").data("kendoGrid").dataItem(n.target.closest("tr")),i="";return t.ChildLink==1&&t.LinkedParentProjects!=""&&(i="<div class='prgmtooltip'>"+linkedToRiskIssue+t.LinkedParentProjects+"<\/div>"),i}}).data("kendoTooltip")}catch(t){var i={method:"InitKendoGridRiskIssue",exceptionMessage:"message:"+t.message+" stack:"+t.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",i)).then(function(){alert(errormessage)})}}function er(){try{$("#gridSchedule").kendoGrid({dataSource:{data:c,sort:[{field:"MilestoneOrder ",dir:"asc"}]},groupable:!1,sortable:!0,schema:{model:{fields:{StatusIndicator:{type:"string"},Milestone:{type:"string"},BaselineFinish:{type:"date"},PlannedFinish:{type:"date"},Variance:{type:"string"}}}},columns:[{template:"",field:"StatusIndicator",title:" ",attributes:{"class":"#:StatusIndicator#"},width:"1%"},{template:"#if(ChildLink == 1) {#<span class='k-icon k-i-unlink-horizontal' style='color:blue;'><\/span>#}#",title:" ",width:"4%"},{field:"Milestone",title:"Milestone",template:function(n){var t="",i;return n.CompletionDate!=null&&n.CompletionDate!=""?n.MilestoneType==1||n.MilestoneType==2?n.Milestone.split("-")[1]==MilestoneExecutionInsert||n.Milestone.split("-")[1].trim()==""?t=n.Milestone!=null&&n.Milestone!=""?"<span class='text-italic-red'><b>"+(n.MilestoneType==1?MilestoneStartPrefix:MilestoneEndPrefix)+"<\/b>"+MilestoneExecutionInsert+"<\/span>":"":(i=n.MilestoneType==1?n.Milestone.replace(MilestoneStartPrefix,""):n.Milestone.replace(MilestoneEndPrefix,""),t=n.Milestone!=null&&n.Milestone!=""?"<span class='text-italic-bold'>"+(n.MilestoneType==1?MilestoneStartPrefix:MilestoneEndPrefix)+"<\/span><span class='text-italic'>"+i+"<\/span>":""):t=n.Milestone!=null&&n.Milestone!=""?"<span class='text-italic'>"+n.Milestone+"<\/span>":"":n.MilestoneType==1||n.MilestoneType==2?n.Milestone.split("-")[1]==MilestoneExecutionInsert||n.Milestone.split("-")[1].trim()==""?t=n.Milestone!=null&&n.Milestone!=""?"<span class='RedQuality'><b>"+(n.MilestoneType==1?MilestoneStartPrefix:MilestoneEndPrefix)+"<\/b>"+MilestoneExecutionInsert+"<\/span>":"":(i=n.MilestoneType==1?n.Milestone.replace(MilestoneStartPrefix,""):n.Milestone.replace(MilestoneEndPrefix,""),t=n.Milestone!=null&&n.Milestone!=""?"<b>"+(n.MilestoneType==1?MilestoneStartPrefix:MilestoneEndPrefix)+"<\/b>"+i:""):t=n.Milestone!=null&&n.Milestone!=""?n.Milestone:"",t},width:"32%"},{field:"BaselineFinish",title:"Baseline Finish",headerAttributes:{"class":"wrap-header"},width:"22%",template:function(n){return n.CompletionDate!=null&&n.CompletionDate!=""?n.BaselineFinish!=null&&n.BaselineFinish!=""?"<span class='text-italic'>"+kendo.toString(kendo.parseDate(new Date(n.BaselineFinish),"yyyy-MM-dd"),"dd-MMM-yy")+"<\/span>":"":n.BaselineFinish!=null&&n.BaselineFinish!=""?kendo.toString(kendo.parseDate(new Date(n.BaselineFinish),"yyyy-MM-dd"),"dd-MMM-yy"):""}},{field:"StatusIndicator",title:" ",width:"4%",template:"# if (CompletionDate == null) {#<span><\/span># } else{#<span class='k-icon k-i-check' style='color: blue;'><\/span>#}#"},{field:"PlannedFinish",title:"Finish",width:"16%",headerAttributes:{"class":"wrap-header"},template:function(n){return n.CompletionDate!=null&&n.CompletionDate!=""?"<span class='text-italic'>"+kendo.toString(kendo.parseDate(new Date(n.CompletionDate),"yyyy-MM-dd"),"dd-MMM-yy")+"<\/span>":n.PlannedFinish!=null&&n.PlannedFinish!=""?kendo.toString(kendo.parseDate(new Date(n.PlannedFinish),"yyyy-MM-dd"),"dd-MMM-yy"):""}},{field:"Variance",title:"Variance",width:"11%",headerAttributes:{"class":"txt-float-R"},attributes:{"class":"txt-float-R"},template:function(n){var i="";return i=n.CompletionDate!=null&&n.CompletionDate!=""?"<span class='text-italic'>"+(n.Variance.toString()=="NA"||n.Variance.toString()=="")?"NA":n.Variance.toString()+"days<\/span>":n.Variance.toString()=="NA"||n.Variance.toString()==""?"NA":n.Variance.toString()+" days",t,i}},{hidden:!s.Edit,command:[{name:" ",iconClass:"k-icon k-i-edit",width:"9%",click:function(t){var i,r,f;try{t.preventDefault();i=$(t.target).closest("tr");r=this.dataItem(i);n.$emit("ScheduleEdit",r,at)}catch(u){f={method:"InitKendoGridSchedule",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){alert(errormessage)})}}}]}],detailTemplate:kendo.template($("#scheduledetail-template").html())});$("#gridSchedule").kendoTooltip({filter:"td:nth-child(3)",position:"absolute",width:300,show:function(){this.content.text().length>0?this.content.parent().css("visibility","visible"):this.content.parent().css("visibility","hidden")},content:function(n){var t=$("#gridSchedule").data("kendoGrid").dataItem(n.target.closest("tr")),i="";return t.ChildLink==1&&t.LinkedParentProjects!=""&&(i="<div class='prgmtooltip'>"+linkedToMilestone+t.LinkedParentProjects+"<\/div>"),i}}).data("kendoTooltip")}catch(i){var r={method:"InitKendoGridSchedule",exceptionMessage:"message:"+i.message+" stack:"+i.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",r)).then(function(){alert(errormessage)})}}function or(){try{$("#gridAskNeed").kendoGrid({dataSource:{data:b,sort:[{field:"NeedByDate",dir:"asc"}]},groupable:!1,sortable:!0,schema:{model:{fields:{StatusIndicator:{type:"string"},AskNeed:{type:"string"},NeedFromName:{type:"string"},NeedByDate:{type:"date"}}}},columns:[{template:"",field:"StatusIndicator",title:" ",width:"1%",attributes:{"class":"#:StatusIndicator#"}},{template:"#if(ChildLink == 1) {#<span class='k-icon k-i-unlink-horizontal' style='color:blue;'><\/span>#}#",title:" ",width:"4%"},{field:"AskNeed",title:"Ask or Need",width:"45.1%",template:function(n){return n.CloseDate!=null&&n.CloseDate!=""?"<span class='text-italic'>"+n.AskNeed+"<\/span>":n.AskNeed}},{field:"NeedFromName",title:"Need From",width:"20%",template:function(n){return n.CloseDate!=null&&n.CloseDate!=""?n.NeedFromName!=null&&n.NeedFromName!=""?"<span class='text-italic'>"+n.NeedFromName+"<\/span>":"":n.NeedFromName!=null&&n.NeedFromName!=""?n.NeedFromName:""}},{field:"NeedByDate",title:"Need Date",width:"20%",template:function(n){return n.CloseDate!=null&&n.CloseDate!=""?n.NeedByDate!=null&&n.NeedByDate!=""?"<span class='text-italic'>"+kendo.toString(kendo.parseDate(new Date(n.NeedByDate),"yyyy-MM-dd"),"dd-MMM-yy")+"<\/span>":"":n.NeedByDate!=null&&n.NeedByDate!=""?kendo.toString(kendo.parseDate(new Date(n.NeedByDate),"yyyy-MM-dd"),"dd-MMM-yy"):""}},{hidden:!s.Edit,command:[{name:" ",iconClass:"k-icon k-i-edit",width:"5%",click:function(t){var i,r,f;try{t.preventDefault();i=$(t.target).closest("tr");r=this.dataItem(i);n.$emit("AskNeedEdit",r,lt)}catch(u){f={method:"InitKendoGridAskNeed",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){alert(errormessage)})}}}]}],detailTemplate:kendo.template($("#askneeddetail-template").html())});$("#gridAskNeed").kendoTooltip({filter:"td:nth-child(3)",position:"absolute",width:300,show:function(){this.content.text().length>0?this.content.parent().css("visibility","visible"):this.content.parent().css("visibility","hidden")},content:function(n){var t=$("#gridAskNeed").data("kendoGrid").dataItem(n.target.closest("tr")),i="";return t.ChildLink==1&&t.LinkedParentProjects!=""&&(i="<div class='prgmtooltip'>"+linkedToAskNeed+t.LinkedParentProjects+"<\/div>"),i}}).data("kendoTooltip")}catch(t){var i={method:"InitKendoGridAskNeed",exceptionMessage:"message:"+t.message+" stack:"+t.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",i)).then(function(){alert(errormessage)})}}function vt(){$.when(o.getDataWCF("getRiskIssue/"+SeletedProjectId)).then(function(t){try{tt=JSON.parse(t.getRiskIssueResult);ct=tt.filter(function(n){return n.IncludeInReport==!0});dt();n.$emit("UpdateHubStatus");r.$digest()}catch(i){var u={method:"getDataForRiskIssue",exceptionMessage:"message:"+i.message+" stack:"+i.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}})}function g(){a=[];bt=!1;wt=[];var t={ProjectID:SeletedProjectId,DataType:"TemplateDetails"},i={ProjectID:SeletedProjectId,DataType:"Template"};$.when(o.getDataWCF("getSchedule/"+SeletedProjectId),o.postDataWCFAsync("getProjectBaselineLog",SeletedProjectId),o.postDataWCFAsync("getMilestoneSetProjectHub",i),o.postDataWCFAsync("getMilestoneSetProjectHub",t)).then(function(t,i,u,f){var e,s,a;try{h=JSON.parse(t.getScheduleResult);ft=JSON.parse(i.getProjectBaselineLogResult);et=JSON.parse(u);ht=JSON.parse(f);e=new kendo.data.DataSource({data:ft});s=$("#gridBaselineLogs").data("kendoGrid");e.read();s.setDataSource(e);at=h.filter(function(n){return n.IncludeInReport==!0});e=new kendo.data.DataSource({data:et});s=$("#gridHubAddMilestones").data("kendoGrid");e.read();s.setDataSource(e);gt();n.$emit("UpdateHubStatus");r.$digest()}catch(c){a={method:"getDataForSchedule",exceptionMessage:"message:"+c.message+" stack:"+c.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",a)).then(function(){alert(errormessage)})}})}function yt(){$.when(o.getDataWCF("getAskNeed/"+SeletedProjectId)).then(function(t){try{it=JSON.parse(t.getAskNeedResult);lt=it.filter(function(n){return n.IncludeInReport==!0});ni();n.$emit("UpdateHubStatus");r.$digest()}catch(i){var u={method:"getDataForAskNeed",exceptionMessage:"message:"+i.message+" stack:"+i.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}})}function sr(){$.when(o.getDataWCF("getOverallStatus/"+SeletedProjectId),o.postDataWCFAsync("getProjectCharterKeySuccess",SeletedProjectId)).then(function(t,i){var u,e;try{ot=JSON.parse(i.getProjectCharterKeySuccessResult);$("#overAllStatusPerformance").data("kendoGrid").dataSource.read();u=JSON.parse(t.getOverAllStatusResult);u.length>0&&(s.overAllData=u[0],s.OverallStatusColor=s.overAllData.OverallStatus,s.overAllData.StatusLastUpdated=kendo.toString(kendo.parseDate(s.overAllData.StatusLastUpdated),"dd-MMM-yy"),angular.copy(s.overAllData,s.OverAllDataMain),r.$digest(),n.$emit("UpdateOverallStatus",s.overAllData))}catch(f){e={method:"getDataForOverallStatus",exceptionMessage:"message:"+f.message+" stack:"+f.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",e)).then(function(){alert(errormessage)})}})}function hr(){return[{field:"RiskIssueUniqueID",title:"Id",hidden:!0},{field:"ProjectID",title:"ProjectID",editable:!1,hidden:!0},{template:"",field:"StatusIndicator",title:" ",width:".5%",attributes:{"class":"#:StatusIndicator#"}},{title:" ",width:"2.5%",template:function(n){return n.ChildLink?"<span class='k-icon k-i-unlink-horizontal' style='color:blue;'><\/span>":""}},{field:"RiskIssueTypeID",title:"Type",width:"7%",values:kt},{field:"IfHappens",title:"If This Happens",headerAttributes:{"class":"wrap-header"},width:"20%"},{field:"ProbabilityID",title:"Probability",values:hi,width:"8%"},{field:"RiskIssueResult",title:"This Is The Result",headerAttributes:{"class":"wrap-header"},width:"18%"},{field:"ImpactID",title:"Impact",width:"9%",values:ci},{field:"Mitigation",title:"Mitigation",width:"16%"},{field:"OwnerID",title:"Owner",headerAttributes:{"class":"wrap-header"},width:"14%",editor:wr,values:p,template:function(n){if(n.OwnerName!=null||n.OwnerName!=""){var t;t=p.filter(function(t){return t.value==n.OwnerID});t.length>0?n.OwnerName=t[0].text:(n.OwnerName="",n.OwnerName="")}return n.OwnerName}},{field:"FunctionGroupID",title:"Function Owner",headerAttributes:{"class":"wrap-header"},width:"10%",values:st},{field:"DueDate",title:"Due Date (mm/dd/yyyy)",headerAttributes:{"class":"wrap-header"},width:"10%",format:"{0:MM/dd/yyyy}"},{field:"CloseDate",title:"Close Date (mm/dd/yyyy)",headerAttributes:{"class":"wrap-header"},width:"10%",format:"{0:MM/dd/yyyy}",editor:CompletedDateEditor},{title:"Include In Dashboard (Max 3)",headerAttributes:{"class":"wrap-header"},width:"5%",template:function(n){return n.IncludeInReport==!0?ut(n,"IncludeInReport")+'<input type="checkbox" checked class="chkbxrisk" />':ut(n,"IncludeInReport")+'<input type="checkbox" class="chkbxrisk" />'}},{command:[{name:"destroy",text:" "}],title:" ",width:"5%"}]}function cr(n,t){$('<input name="'+t.field+'"/>').appendTo(n).kendoComboBox({autoBind:!1,dataTextField:"text",dataValueField:"value",filter:"contains",valuePrimitive:!0,dataSource:st})}function li(){var t=$("#dialogRiskIssueBulkEdit"),u=new kendo.data.DataSource({sort:[{field:"DueDate",dir:"asc"}],transport:{read:function(n){n.success(w)},update:function(i){var r,u,f,e,h;try{for(r=0;r<i.data.models.length;r++)i.data.models[r].OwnerID!=null&&(u=p.filter(function(n){return n.value===i.data.models[r].OwnerID}),i.data.models[r].OwnerName=u.length>0?u[0].text:null),i.data.models[r].DueDate=i.data.models[r].DueDate!=null&&i.data.models[r].DueDate!=""?kendo.toString(i.data.models[r].DueDate,"d"):null,i.data.models[r].CloseDate=i.data.models[r].CloseDate!=null&&i.data.models[r].CloseDate!=""?kendo.toString(i.data.models[r].CloseDate,"d"):null;f=kendo.stringify(i.data.models);e=JSON.stringify({riskIssueData:JSON.parse(f)});o.postDataWCF("updateRiskIssueData ",e).then(function(r){r.updateRiskIssueDataResult=="Success"?(i.success(i.data.models),vt(),n.$emit("RefreshForDataQuality"),v=!0,t.data("kendoWindow").close()):(i.error(w),alert("Error occurred in item updation for risk issue."))})}catch(s){h={method:"updateRiskIssueBulk",exceptionMessage:"message:"+s.message+" stack:"+s.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",h)).then(function(){i.error(w);alert(errormessage)})}},destroy:function(n){var i,r,f;try{i=kendo.stringify(n.data.models);r=JSON.stringify({riskIssueData:JSON.parse(i)});o.postDataWCF("deleteRiskIssueData",r).then(function(i){i.deleteRiskIssueDataResult=="Success"?(n.success(n.data.models),vt(),v=!0,t.data("kendoWindow").close()):(n.error(w),alert("Error occurred in item deletion for risk issue."))})}catch(u){f={method:"deleteRiskIssueBulk",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){n.error(w);alert(errormessage)})}},create:function(i){var f,r,u,e,h,a;displayLoading();try{for(f=[],r=0;r<i.data.models.length;r++)i.data.models[r].OwnerID!=null&&(u=p.filter(function(n){return n.value===i.data.models[r].OwnerID}),i.data.models[r].OwnerName=u.length>0?u[0].text:null),e={ProjectID:SeletedProjectId,RiskIssueUniqueID:NewGuid(),IfHappens:i.data.models[r].IfHappens,RiskIssueResult:i.data.models[r].RiskIssueResult,Mitigation:i.data.models[r].Mitigation,RiskIssueTypeID:i.data.models[r].RiskIssueTypeID!=null?i.data.models[r].RiskIssueTypeID:null,ProbabilityID:i.data.models[r].ProbabilityID!=null?i.data.models[r].ProbabilityID:null,ImpactID:i.data.models[r].ImpactID!=null?i.data.models[r].ImpactID:null,FunctionGroupID:i.data.models[r].FunctionGroupID!=null?i.data.models[r].FunctionGroupID:null,CloseDate:i.data.models[r].CloseDate!=null&&i.data.models[r].CloseDate!=""?kendo.toString(i.data.models[r].CloseDate,"d"):null,LogDate:s.todayDate,IncludeInReport:i.data.models[r].IncludeInReport,OwnerID:i.data.models[r].OwnerID!=null?i.data.models[r].OwnerID:null,OwnerName:u.length>0?u[0].text:null,DueDate:i.data.models[r].DueDate!=null&&i.data.models[r]!=""?kendo.toString(i.data.models[r].DueDate,"d"):null},f.push(e);h=JSON.stringify({riskIssueData:f});o.postDataWCF("insertRiskIssueData",h).then(function(r){r.insertRiskIssueDataResult=="Success"?(hideLoading(),i.success(f),vt(),n.$emit("RefreshForDataQuality"),v=!0,t.data("kendoWindow").close()):(i.error(w),alert("Error occurred in item insertion for risk issue."))})}catch(c){a={method:"createRiskIssueBulk",exceptionMessage:"message:"+c.message+" stack:"+c.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",a)).then(function(){i.error(w);alert(errormessage)})}}},batch:!0,schema:{model:{id:"RiskIssueUniqueID",fields:{ProjectID:{editable:!1,hidden:!0,defaultValue:SeletedProjectId},RiskIssueUniqueID:{editable:!1,hidden:!0},RiskIssueTypeID:{type:"string"},IfHappens:{type:"string"},ProbabilityID:{type:"string"},RiskIssueResult:{type:"string"},ImpactID:{type:"string"},Mitigation:{type:"string"},OwnerID:{type:"string"},OwnerName:{type:"string"},FunctionGroupID:{type:"string"},DueDate:{type:"date",defaultValue:null},CloseDate:{type:"date",defaultValue:null},IncludeInReport:{type:"boolean"},StatusIndicator:{type:"string"},ChildLink:{type:"boolean"}}}}}),r,i;p=[];angular.forEach(w,function(n){var i,t;n.OwnerID!=null&&n.OwnerID!=""&&(i=p.filter(function(t){return t.value===n.OwnerID}),i.length==0&&(t={},t.text=n.OwnerName,t.value=n.OwnerID,t.UserCountry=n.UserCountry,t.UserImageUrl=n.UserImageUrl,t.UserEmailAddress=n.UserEmailAddress,t.UserDepartment=n.UserDepartment,p.push(t)))});r=hr();i=$("#gridRiskIssueBulkEdit").kendoGrid({dataSource:u,batch:!0,selectable:!0,navigatable:!0,toolbar:[{name:"create",text:"Add New"},{name:"save",text:"Save"},{name:"cancel",text:"Cancel"}],columns:r,dataBound:function(){ui=!1;$(".chkbxrisk").bind("change",function(n){var t=$("#gridRiskIssueBulkEdit").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr")),r=n.target.closest("td");$(r).prepend("<span class='k-dirty'><\/span>");i.set("IncludeInReport",this.checked)})},editable:!0,saveChanges:function(n){var r,i,u,f;trackEvent("Update Bulk Edit Risk/Issue");r=$("#gridRiskIssueBulkEdit").data("kendoGrid");r.dataSource.hasChanges()?(i=$(":checked",r.element).length,s.riskIssueClosed?i>riskIssueIncludeReportCount&&(alert(includeReportMessageForRisk),n.preventDefault()):(u=tt.filter(function(n){return n.IncludeInReport==!0&&n.CloseDate!=null}),u.length>0?(f=i+u.length,f>riskIssueIncludeReportCount&&(alert(includeReportMessageForRisk),n.preventDefault())):i>riskIssueIncludeReportCount&&(alert(includeReportMessageForRisk),n.preventDefault()))):t.data("kendoWindow").close()}}).data("kendoGrid");$("#gridRiskIssueBulkEdit .k-grid-cancel-changes").unbind("click").on("click",function(n){ti("#dialogRiskIssueBulkEdit",n)});$("#gridRiskIssueBulkEdit table").on("keydown",function(n){var r=n.keyCode?n.keyCode:n.which,t;r==13&&(t=$(n.target).closest(".k-combobox").length,t&&(i.editCell(i.current()),$("[data-role='combobox']").data("kendoComboBox").dataSource.read()))});$("#gridRiskIssueBulkEdit").kendoTooltip({filter:"td:nth-child(4)",position:"absolute",width:500,show:function(){this.content.text().length>0?this.content.parent().css("visibility","visible"):this.content.parent().css("visibility","hidden")},content:function(n){var t=$("#gridRiskIssueBulkEdit").data("kendoGrid").dataItem(n.target.closest("tr")),i="";return t.ChildLink==1&&t.LinkedParentProjects!=""&&(i="<div class='prgmtooltip'>"+linkedToRiskIssue+t.LinkedParentProjects+"<\/div>"),i}}).data("kendoTooltip")}function lr(){return[{field:"AskNeedUniqueID",title:"AskNeedUniqueID",hidden:!0},{field:"ProjectID",title:"ProjectID",hidden:!0},{template:"",field:"StatusIndicator",title:" ",width:".5%",attributes:{"class":"#:StatusIndicator#"}},{title:" ",width:"2.5%",template:function(n){return n.ChildLink?"<span class='k-icon k-i-unlink-horizontal' style='color:blue;'><\/span>":""}},{field:"AskNeed",title:"Ask Need",headerAttributes:{"class":"wrap-header"},width:"30%"},{field:"NeedFromID",title:"Need From",headerAttributes:{"class":"wrap-header"},width:"20%",editor:pr,values:y,template:function(n){if(n.NeedFromName!=null){var t;t=y.filter(function(t){return t.value==n.NeedFromID});t.length>0?n.NeedFromName=t[0].text:(n.NeedFromName="",n.NeedFromID="")}return n.NeedFromName}},{field:"NeedByDate",title:"Need Date (mm/dd/yyyy)",headerAttributes:{"class":"wrap-header"},width:"10%",format:"{0:MM/dd/yyyy}"},{field:"Comments",title:"Comments",width:"30%"},{field:"CloseDate",title:"Close Date (mm/dd/yyyy)",headerAttributes:{"class":"wrap-header"},width:"10%",format:"{0:MM/dd/yyyy}",editor:CompletedDateEditor},{title:"Include in Dashboard (Max 1)",headerAttributes:{"class":"wrap-header"},template:'<input type="checkbox" #= IncludeInReport ? \'checked="checked"\' : "" # class="chkbxask" />',width:"8%"},{command:[{name:"destroy",text:" "}],title:" ",width:"4%"}]}function ai(){var n=$("#dialogAskNeedBulkEdit"),r=new kendo.data.DataSource({sort:[{field:"NeedByDate",dir:"asc"}],transport:{read:function(n){n.success(b)},destroy:function(t){var i,r,f;try{i=kendo.stringify(t.data.models);r=JSON.stringify({askNeedData:JSON.parse(i)});o.postDataWCF("deleteAskNeed",r).then(function(i){i.deleteAskNeedResult=="Success"?(t.success(t.data.models),yt(),v=!0,n.data("kendoWindow").close()):(t.error(b),alert("Error occurred in item deletion of Ask/Need."))})}catch(u){f={method:"deleteAskNeedBulk",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){t.error(b);alert(errormessage)})}},update:function(t){var i,r,u,f,s;try{for(i=0;i<t.data.models.length;i++)t.data.models[i].NeedFromID!=null&&(r=y.filter(function(n){return n.value===t.data.models[i].NeedFromID}),t.data.models[i].NeedFromName=r.length>0?r[0].text:null),t.data.models[i].NeedByDate=t.data.models[i].NeedByDate!=null&&t.data.models[i].NeedByDate!=""?kendo.toString(t.data.models[i].NeedByDate,"d"):null,t.data.models[i].CloseDate=t.data.models[i].CloseDate!=null&&t.data.models[i].CloseDate!=""?kendo.toString(t.data.models[i].CloseDate,"d"):null;u=kendo.stringify(t.data.models);f=JSON.stringify({askNeedData:JSON.parse(u)});o.postDataWCF("updateAskNeed",f).then(function(i){i.updateAskNeedResult=="Success"?(t.success(t.data.models),yt(),v=!0,n.data("kendoWindow").close()):(t.error(b),alert("Error occurred in item updation for Ask/Need ."))})}catch(e){s={method:"updateAskNeedBulk",exceptionMessage:"message:"+e.message+" stack:"+e.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",s)).then(function(){t.error(b);alert(errormessage)})}},create:function(t){var r,i,u,f,e,c;displayLoading();try{for(r=[],i=0;i<t.data.models.length;i++)t.data.models[i].NeedFromID!=null&&(u=y.filter(function(n){return n.value===t.data.models[i].NeedFromID})),f={AskNeedUniqueID:NewGuid(),ProjectID:SeletedProjectId,AskNeed:t.data.models[i].AskNeed,NeedFromID:t.data.models[i].NeedFromID!=null?t.data.models[i].NeedFromID:null,NeedFromName:u.length>0?u[0].text:null,NeedByDate:t.data.models[i].NeedByDate!=null&&t.data.models[i].NeedByDate!=""?kendo.toString(t.data.models[i].NeedByDate,"d"):null,Comments:t.data.models[i].Comments!=null?t.data.models[i].Comments:"",CloseDate:t.data.models[i].CloseDate!=null?kendo.toString(t.data.models[i].CloseDate,"d"):null,LogDate:s.todayDate,IncludeInReport:t.data.models[i].IncludeInReport},r.push(f);e=JSON.stringify({askNeedData:r});o.postDataWCF("insertAskNeed",e).then(function(i){i.insertAskNeedResult=="Success"?(hideLoading(),t.success(r),yt(),v=!0,n.data("kendoWindow").close()):(t.error(b),alert("Error occurred in item insertion for Ask/Need ."))})}catch(h){c={method:"createAskNeedBulk",exceptionMessage:"message:"+h.message+" stack:"+h.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",c)).then(function(){t.error(b);alert(errormessage)})}}},batch:!0,schema:{model:{id:"AskNeedUniqueID",fields:{AskNeedUniqueID:{editable:!1,hidden:!0},ProjectID:{editable:!1,hidden:!0,defaultValue:SeletedProjectId},AskNeed:{type:"string"},NeedFromID:{type:"string"},NeedFromName:{type:"string"},NeedByDate:{type:"date",defaultValue:null},Comments:{type:"string"},CloseDate:{type:"date",defaultValue:null},IncludeInReport:{type:"boolean"},StatusIndicator:{type:"string"},ChildLink:{type:"boolean"}}}}}),i,t;y=[];angular.forEach(b,function(n){var i,t;n.NeedFromID!=null&&n.NeedFromID!=""&&(i=y.filter(function(t){return t.value===n.NeedFromID}),i.length==0&&(t={},t.text=n.NeedFromName,t.value=n.NeedFromID,t.UserCountry=n.UserCountry,t.UserImageUrl=n.UserImageUrl,t.UserEmailAddress=n.UserEmailAddress,t.UserDepartment=n.UserDepartment,y.push(t)))});i=lr();t=$("#gridAskNeedBulkEdit").kendoGrid({dataSource:r,batch:!0,selectable:!0,navigatable:!0,toolbar:[{name:"create",text:"Add New"},{name:"save",text:"Save"},{name:"cancel",text:"Cancel"}],columns:i,dataBound:function(){ri=!1;$(".chkbxask").bind("change",function(n){var t=$("#gridAskNeedBulkEdit").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr")),r=n.target.closest("td");$(r).prepend("<span class='k-dirty'><\/span>");i.set("IncludeInReport",this.checked)})},editable:!0,saveChanges:function(t){var r,i,u,f;trackEvent("Update Bulk Edit Ask/Need");r=$("#gridAskNeedBulkEdit").data("kendoGrid");r.dataSource.hasChanges()?(i=$(":checked",r.element).length,s.askNeedClosed?i>askNeedIncludeReportCount&&(alert(includeReportMessageForAskNeed),t.preventDefault()):(u=it.filter(function(n){return n.IncludeInReport==!0&&n.CloseDate!=null}),u.length>0?(f=i+u.length,f>askNeedIncludeReportCount&&(alert(includeReportMessageForAskNeed),t.preventDefault())):i>askNeedIncludeReportCount&&(alert(includeReportMessageForAskNeed),t.preventDefault()))):n.data("kendoWindow").close()}}).data("kendoGrid");$("#gridAskNeedBulkEdit .k-grid-cancel-changes").unbind("click").on("click",function(n){ti("#dialogAskNeedBulkEdit",n)});$("#gridAskNeedBulkEdit table").on("keydown",function(n){var r=n.keyCode?n.keyCode:n.which,i;r==13&&(i=$(n.target).closest(".k-combobox").length,i&&(t.editCell(t.current()),$("[data-role='combobox']").data("kendoComboBox").dataSource.read()))});$("#gridAskNeedBulkEdit").kendoTooltip({filter:"td:nth-child(4)",position:"absolute",width:500,show:function(){this.content.text().length>0?this.content.parent().css("visibility","visible"):this.content.parent().css("visibility","hidden")},content:function(n){var t=$("#gridAskNeedBulkEdit").data("kendoGrid").dataItem(n.target.closest("tr")),i="";return t.ChildLink==1&&t.LinkedParentProjects!=""&&(i="<div class='prgmtooltip'>"+linkedToAskNeed+t.LinkedParentProjects+"<\/div>"),i}}).data("kendoTooltip")}function ar(){return[{field:"ScheduleUniqueID",title:"Id",editable:!1,hidden:!0,headerAttributes:{"class":"wrap-header"}},{field:"ProjectID",title:"ProjectID",editable:!1,hidden:!0},{field:"MilestoneType",title:"MilestoneType",editable:!1,hidden:!0},{template:"",field:"StatusIndicator",title:" ",width:".5%",attributes:{"class":"#:StatusIndicator#"}},{title:" ",width:"2.5%",template:function(n){return n.ChildLink?"<span class='k-icon k-i-unlink-horizontal' style='color:blue;'><\/span>":""}},{field:"Milestone",title:"Milestone",width:"26%",headerAttributes:{"class":"wrap-header"},template:function(n){return n.MilestoneType==1?(n.Milestone=n.Milestone.replace(MilestoneStartPrefix,""),n.Milestone==MilestoneExecutionInsert||n.Milestone.trim()==""?"<span class='RedQuality'><b>"+MilestoneStartPrefix+"<\/b>"+MilestoneExecutionInsert+"<\/span>":"<b>"+MilestoneStartPrefix+"<\/b>"+n.Milestone):n.MilestoneType==2?(n.Milestone=n.Milestone.replace(MilestoneEndPrefix,""),n.Milestone==MilestoneExecutionInsert||n.Milestone.trim()==""?"<span class='RedQuality'><b>"+MilestoneEndPrefix+"<\/b>"+MilestoneExecutionInsert+"<\/span>":"<b>"+MilestoneEndPrefix+"<\/b>"+n.Milestone):n.Milestone}},{field:"PlannedFinish",title:"Planned Finish (mm/dd/yyyy)",width:"12%",format:"{0:MM/dd/yyyy}",headerAttributes:{"class":"wrap-header"}},{field:"BaselineFinish",title:"Baseline Finish (mm/dd/yyyy)",width:"12%",format:"{0:MM/dd/yyyy}",headerAttributes:{"class":"wrap-header"}},{field:"Variance",title:"Variance",width:"15%",editable:!1,headerAttributes:{"class":"txt-float-R"},template:"#=Variance == ''?'':( Variance == 'NA'? 'NA': Variance +' days')#",attributes:{"class":"txt-float-R"}},{field:"FunctionGroupID",title:"Function Owner",width:"20%",values:st,headerAttributes:{"class":"wrap-header"},editor:cr},{field:"CompletionDate",title:"Completion Date (mm/dd/yyy)",width:"15%",format:"{0:MM/dd/yyyy}",headerAttributes:{"class":"wrap-header"},editor:CompletedDateEditor},{field:"Comments",title:"Comments",width:"26%",headerAttributes:{"class":"wrap-header"}},{title:"Include In Dashboard (Max 8)",width:"5%",headerAttributes:{"class":"wrap-header"},template:function(n){return n.IncludeInReport==!0?ut(n,"IncludeInReport")+'<input type="checkbox" checked class="chkbxsch" />':ut(n,"IncludeInReport")+'<input type="checkbox" class="chkbxsch" />'}},{command:[{name:"destroy",text:" ",visible:function(n){return n.MilestoneType==1?!1:n.MilestoneType==2?!1:!0}}],title:" ",width:"6%"}]}function vi(){var t=$("#dialogScheduleBulkEdit"),i=new kendo.data.DataSource({sort:[{field:"MilestoneOrder ",dir:"asc"}],transport:{read:function(n){n.success(c)},destroy:function(n){var r;try{var u=$("#gridScheduleBulkEdit").data("kendoGrid").dataSource,s=u.data(),f=kendo.stringify(n.data.models),e=JSON.stringify({scheduleData:JSON.parse(f),userId:currentUserId});o.postDataWCF("deleteScheduleData",e).then(function(i){i.deleteScheduleDataResult=="Success"?(n.success(n.data.models),g(),v=!0,t.data("kendoWindow").close()):(n.error(c),alert("Error occurred in item deletion for schedule."))})}catch(i){r={method:"deleteScheduleDataBulk",exceptionMessage:"message:"+i.message+" stack:"+i.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",r)).then(function(){n.error(c);alert(errormessage)})}},update:function(i){var r,u,f,e,y,w;try{for(r=0;r<i.data.models.length;r++)i.data.models[r].PlannedFinish=i.data.models[r].PlannedFinish!=null&&i.data.models[r].PlannedFinish!=""?kendo.toString(i.data.models[r].PlannedFinish,"d"):null,i.data.models[r].BaselineFinish=i.data.models[r].BaselineFinish!=null&&i.data.models[r].BaselineFinish!=""?kendo.toString(i.data.models[r].BaselineFinish,"d"):null,i.data.models[r].CompletionDate=i.data.models[r].CompletionDate!=null&&i.data.models[r].CompletionDate!=""?kendo.toString(i.data.models[r].CompletionDate,"d"):null,i.data.models[r].Milestone=i.data.models[r].MilestoneType==1?MilestoneStartPrefix+i.data.models[r].Milestone:i.data.models[r].MilestoneType==2?MilestoneEndPrefix+i.data.models[r].Milestone:i.data.models[r].Milestone;u=i.data.models;a.length>0&&(s.scheduleClosed||(f=a.filter(function(n){return n.CompletionDate!=null}),angular.forEach(f,function(n){var i=h.findIndex(t=>t.MilestoneType==n.MilestoneType),t={};t.ScheduleUniqueID=h[i].ScheduleUniqueID;t.MilestoneType=h[i].MilestoneType;t.Milestone=h[i].Milestone;t.PlannedFinish=kendo.toString(h[i].PlannedFinish,"d");t.BaselineFinish=kendo.toString(h[i].BaselineFinish,"d");t.CompletionDate=kendo.toString(h[i].CompletionDate,"d");t.FunctionGroupID=h[i].FunctionGroupID;t.IncludeInReport=h[i].IncludeInReport;t.ProjectID=h[i].ProjectID;t.IncludeInCharter=h[i].IncludeInCharter;t.ParentProgramID=h[i].ParentProgramID;t.Comments=h[i].Comments;t.IsLinked=h[i].IsLinked;t.MilestoneTemplateID=h[i].MilestoneTemplateID;t.MilestoneID=h[i].MilestoneID;u.push(t)})));e=kendo.stringify(u);y=JSON.stringify({scheduleData:JSON.parse(e),userId:currentUserId});o.postDataWCF("updateScheduleData",y).then(function(r){if(r.updateScheduleDataResult=="Success")if(k){k=!1;var u=d.toString(),f={CurrentProjectID:SeletedProjectId,ProjectID:SeletedProjectId,TeamMemberAdId:currentUserId,Milestones:u,IncreaseBaseline:nt,BaselineComment:s.BaselineCount.Comment},e=JSON.stringify({BaselineData:f});n.$emit("RefreshForDataQuality");o.postDataWCF("insertProjectBaseline",e).then(function(n){n.insertProjectBaselineResult=="Success"&&(nt&&(s.ProjectBaselineCount=s.ProjectBaselineCount+1),s.ProjectBaselineDate=s.todayDate,i.success(i.data.models),g(),v=!0,t.data("kendoWindow").close())})}else i.success(i.data.models),g(),v=!0,t.data("kendoWindow").close();else i.error(c),alert("Error occurred in item updation for schedule.")})}catch(p){w={method:"updateScheduleDataBulk",exceptionMessage:"message:"+p.message+" stack:"+p.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",w)).then(function(){i.error(c);alert(errormessage)})}},create:function(i){var u,r,f,e,a;displayLoading();try{for(u=[],r=0;r<i.data.models.length;r++)f={ScheduleUniqueID:NewGuid(),ProjectID:SeletedProjectId,Milestone:i.data.models[r].Milestone,PlannedFinish:i.data.models[r].PlannedFinish!=null&&i.data.models[r].PlannedFinish!=""?kendo.toString(i.data.models[r].PlannedFinish,"d"):null,BaselineFinish:i.data.models[r].BaselineFinish!=null&&i.data.models[r].BaselineFinish!=""?kendo.toString(i.data.models[r].BaselineFinish,"d"):null,FunctionGroupID:i.data.models[r].FunctionGroupID!=null?i.data.models[r].FunctionGroupID:null,Comments:i.data.models[r].Comments!=null?i.data.models[r].Comments:null,CompletionDate:i.data.models[r].CompletionDate!=null&&i.data.models[r].CompletionDate!=""?kendo.toString(i.data.models[r].CompletionDate,"d"):null,IncludeInReport:i.data.models[r].IncludeInReport},i.data.models[r].ScheduleUniqueID=f.ScheduleUniqueID,u.push(f);e=JSON.stringify({scheduleData:u,userId:currentUserId});o.postDataWCF("insertScheduleData",e).then(function(r){if(r.insertScheduleDataResult=="Success")if(hideLoading(),k){k=!1;var u=d.toString(),f={CurrentProjectID:SeletedProjectId,ProjectID:SeletedProjectId,TeamMemberAdId:currentUserId,Milestones:u,IncreaseBaseline:nt,BaselineComment:s.BaselineCount.Comment},e=JSON.stringify({BaselineData:f});n.$emit("RefreshForDataQuality");o.postDataWCF("insertProjectBaseline",e).then(function(n){n.insertProjectBaselineResult=="Success"&&(nt&&(s.ProjectBaselineCount=s.ProjectBaselineCount+1),s.ProjectBaselineDate=s.todayDate,i.success(i.data.models),g(),v=!0,t.data("kendoWindow").close())})}else i.success(i.data.models),g(),v=!0,t.data("kendoWindow").close();else i.error(c),alert("Error occurred in item insertion for schedule.")})}catch(h){a={method:"createScheduleDataBulk",exceptionMessage:"message:"+h.message+" stack:"+h.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",a)).then(function(){i.error(c);alert(errormessage)})}}},batch:!0,schema:{model:{id:"ScheduleUniqueID",fields:{ScheduleUniqueID:{hidden:!0},ProjectID:{editable:!1,hidden:!0,defaultValue:SeletedProjectId},Milestone:{type:"string"},PlannedFinish:{type:"date",defaultValue:null},BaselineFinish:{type:"date",defaultValue:null},Variance:{type:"string",editable:!1},FunctionGroupID:{type:"string"},CompletionDate:{type:"date",defaultValue:null},Comments:{type:"string"},IncludeInReport:{type:"boolean"},StatusIndicator:{type:"string"},ChildLink:{type:"boolean"}}}}}),r=ar();$("#gridScheduleBulkEdit").kendoGrid({dataSource:i,navigatable:!0,batch:!0,selectable:!0,toolbar:[{name:"create",text:"Add New"},{name:"save",text:"Save"},{name:"cancel",text:"Cancel"}],columns:r,edit:function(n){var t,i,u;try{t=this;i=t.columns[n.container.index()].field;i=="BaselineFinish"&&(s.ShowBaseline?n.model.CompletionDate!=null&&n.model.CompletionDate!=""&&this.closeCell():this.closeCell());n.container.find('[name="BaselineFinish"]').data("kendoDatePicker")!=undefined&&n.container.find('[name="BaselineFinish"]').data("kendoDatePicker").bind("change",function(){var t;k=!0;t=d.filter(function(t){return t===n.model.ScheduleUniqueID});t.length==0&&d.push(n.model.ScheduleUniqueID);var i=pt(n.model.PlannedFinish,n.model.BaselineFinish,n.model.CompletionDate),r=$("#gridScheduleBulkEdit").data("kendoGrid"),u=r.dataItem(this.wrapper.parents("tr"));u.Variance=i;$("#gridScheduleBulkEdit").data("kendoGrid").refresh()});n.container.find('[name="PlannedFinish"]').data("kendoDatePicker")!=undefined&&n.container.find('[name="PlannedFinish"]').data("kendoDatePicker").bind("change",function(){if(n.model.BaselineFinish!=null){var t=pt(n.model.PlannedFinish,n.model.BaselineFinish,n.model.CompletionDate),i=$("#gridScheduleBulkEdit").data("kendoGrid"),r=i.dataItem(this.wrapper.parents("tr"));r.Variance=t;$("#gridScheduleBulkEdit").data("kendoGrid").refresh()}});n.container.find('[name="CompletionDate"]').data("kendoDatePicker")!=undefined&&n.container.find('[name="CompletionDate"]').data("kendoDatePicker").bind("change",function(){if(n.model.BaselineFinish!=null){var t=pt(n.model.PlannedFinish,n.model.BaselineFinish,n.model.CompletionDate),i=$("#gridScheduleBulkEdit").data("kendoGrid"),r=i.dataItem(this.wrapper.parents("tr"));r.Variance=t;$("#gridScheduleBulkEdit").data("kendoGrid").refresh()}})}catch(r){u={method:"ScheduleBulkEdit(Edit)",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",u)).then(function(){})}},dataBound:function(){$(".chkbxsch").bind("change",function(n){var t=$("#gridScheduleBulkEdit").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr")),r=n.target.closest("td");$(r).prepend("<span class='k-dirty'><\/span>");i.set("IncludeInReport",this.checked)})},editable:!0,remove:function(n){var t=n.model;t.ScheduleUniqueID!="undefined"&&t.ScheduleUniqueID!=""&&wt.push({ScheduleUniqueID:t.ScheduleUniqueID,link:0})},saveChanges:function(n){var i,t,r,u,f,e;trackEvent("Update Bulk Edit Milestone");i=$("#gridScheduleBulkEdit").data("kendoGrid");i.dataSource.hasChanges()?(t=$(":checked",i.element).length,s.scheduleClosed?t>milestoneIncludeReportCount&&(alert(includeReportMessageForMilestone),n.preventDefault()):(r=h.filter(function(n){return n.IncludeInReport==!0&&n.CompletionDate!=null}),r.length>0?(u=t+r.length,u>milestoneIncludeReportCount&&(alert(includeReportMessageForMilestone),n.preventDefault())):t>milestoneIncludeReportCount&&(alert(includeReportMessageForMilestone),n.preventDefault())),k&&(rt||(f=$("#dialogScheduleBaselineCount"),f.data("kendoWindow").open(),n.preventDefault()))):(e=$("#dialogScheduleBulkEdit"),e.data("kendoWindow").close())}}).data("kendoGrid");$("#gridScheduleBulkEdit .k-grid-cancel-changes").unbind("click").on("click",function(n){ti("#dialogScheduleBulkEdit",n)});$("#gridScheduleBulkEdit").kendoTooltip({filter:"td:nth-child(5)",position:"absolute",width:500,show:function(){this.content.text().length>0?this.content.parent().css("visibility","visible"):this.content.parent().css("visibility","hidden")},content:function(n){var t=$("#gridScheduleBulkEdit").data("kendoGrid").dataItem(n.target.closest("tr")),i="";return t.ChildLink==1&&t.LinkedParentProjects!=""&&(i="<div class='prgmtooltip'>"+linkedToMilestone+t.LinkedParentProjects+"<\/div>"),i}}).data("kendoTooltip")}function vr(){var i,n,r,f,e,s,h,a;try{if(confirm(baselineMessage)){k=!0;var v=$("#gridScheduleBulkEdit").data("kendoGrid").dataSource,u=v.data(),t=$("#gridScheduleBulkEdit").data("kendoGrid");for(i=0;i<u.length;i++)n=u[i],n.PlannedFinish!=null&&(r=t.dataSource.get(n.ScheduleUniqueID),n.ScheduleUniqueID==""&&(f=t.tbody.find('tr[data-uid="'+n.uid+'"]'),t.select(f),e=t.select(),r=t.dataItem(e)),n.CompletionDate==null&&(r.set("BaselineFinish",n.PlannedFinish),s=pt(n.PlannedFinish,n.BaselineFinish,n.CompletionDate),r.Variance=s),h=d.filter(function(t){return t===n.ScheduleUniqueID}),h.length==0&&d.push(n.ScheduleUniqueID));$("#gridScheduleBulkEdit").data("kendoGrid").refresh()}}catch(c){a={method:"SetBaseline",exceptionMessage:"message:"+c.message+" stack:"+c.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",a)).then(function(){alert(errormessage)})}}function pt(n,t,i){var r="NA",f;try{i!=null&&t!=null?r=Math.floor((Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())-Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))/864e5):n!=null&&t!=null&&(new Date>n?t!=null&&(r=Math.floor((Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())-Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))/864e5)):n!=null&&t!=null&&(r=Math.floor((Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))/864e5)))}catch(u){f={method:"SetBaseline",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){alert(errormessage)})}return r}function dt(){var i,n,t,u;try{s.riskIssueClosed?(n=new kendo.data.DataSource({data:tt,sort:[{field:"DueDate",dir:"asc"}]}),t=$("#gridRiskIssue").data("kendoGrid"),n.read(),t.setDataSource(n),angular.copy(tt,w),$("#gridRiskIssueBulkEdit").data("kendoGrid").dataSource.read()):(i=tt.filter(function(n){return n.CloseDate==null}),angular.copy(i,w),n=new kendo.data.DataSource({data:w,sort:[{field:"DueDate",dir:"asc"}]}),t=$("#gridRiskIssue").data("kendoGrid"),n.read(),t.setDataSource(n),$("#gridRiskIssueBulkEdit").data("kendoGrid").dataSource.read());p=[];angular.forEach(w,function(n){var i,t;n.OwnerID!=null&&n.OwnerID!=""&&(i=p.filter(function(t){return t.value===n.OwnerID}),i.length==0&&(t={},t.text=n.OwnerName,t.value=n.OwnerID,t.UserCountry=n.UserCountry,t.UserImageUrl=n.UserImageUrl,t.UserEmailAddress=n.UserEmailAddress,t.UserDepartment=n.UserDepartment,p.push(t)))});$("#gridRiskIssueBulkEdit").data("kendoGrid").dataSource.read()}catch(r){u={method:"IncludeClosedRiskIssue",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}}function gt(){var r,t,n,i,u,f,v;try{s.scheduleClosed?(t=new kendo.data.DataSource({data:h,sort:[{field:"BaselineFinish",dir:"asc"},{field:"PlannedFinish",dir:"asc"}]}),n=$("#gridSchedule").data("kendoGrid"),t.read(),n.setDataSource(t),angular.copy(h,c),$("#gridScheduleBulkEdit").data("kendoGrid").dataSource.read(),a.length>0&&(n=$("#gridScheduleBulkEdit").data("kendoGrid"),angular.forEach(a,function(t){var i=n.dataSource.get(t.ScheduleUniqueID);i.dirty=!0}),$("#gridScheduleBulkEdit").data("kendoGrid").refresh())):(r=h.filter(function(n){return n.CompletionDate==null}),angular.copy(r,c),t=new kendo.data.DataSource({data:c,sort:[{field:"BaselineFinish",dir:"asc"},{field:"PlannedFinish",dir:"asc"}]}),n=$("#gridSchedule").data("kendoGrid"),t.read(),n.setDataSource(t),$("#gridScheduleBulkEdit").data("kendoGrid").dataSource.read(),a.length>0&&(n=$("#gridScheduleBulkEdit").data("kendoGrid"),i=a.filter(function(n){return n.CompletionDate==null}),i.length>0?angular.forEach(i,function(t){var i=n.dataSource.get(t.ScheduleUniqueID);i.dirty=!0}):c.length>0&&(u=c[0].ScheduleUniqueID,f=n.dataSource.get(u),f.dirty=!0),$("#gridScheduleBulkEdit").data("kendoGrid").refresh()))}catch(e){v={method:"IncludeClosedMilestone",exceptionMessage:"message:"+e.message+" stack:"+e.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",v)).then(function(){alert(errormessage)})}}function ni(){var i,n,t,u;try{s.askNeedClosed?(n=new kendo.data.DataSource({data:it,sort:[{field:"NeedByDate",dir:"asc"}]}),t=$("#gridAskNeed").data("kendoGrid"),n.read(),t.setDataSource(n),angular.copy(it,b),$("#gridAskNeedBulkEdit").data("kendoGrid").dataSource.read()):(i=it.filter(function(n){return n.CloseDate==null}),angular.copy(i,b),n=new kendo.data.DataSource({data:b,sort:[{field:"NeedByDate",dir:"asc"}]}),t=$("#gridAskNeed").data("kendoGrid"),n.read(),t.setDataSource(n),$("#gridAskNeedBulkEdit").data("kendoGrid").dataSource.read());y=[];angular.forEach(b,function(n){var i,t;n.NeedFromID!=null&&n.NeedFromID!=""&&(i=y.filter(function(t){return t.value===n.NeedFromID}),i.length==0&&(t={},t.text=n.NeedFromName,t.value=n.NeedFromID,t.UserCountry=n.UserCountry,t.UserImageUrl=n.UserImageUrl,t.UserEmailAddress=n.UserEmailAddress,t.UserDepartment=n.UserDepartment,y.push(t)))});$("#gridAskNeedBulkEdit").data("kendoGrid").dataSource.read()}catch(r){u={method:"IncludeClosedAskNeed",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}}function ti(n,t){var f;try{t.preventDefault();t.stopPropagation();var e=t.currentTarget.offsetParent.id,r=$(n),i=$("#"+e).data("kendoGrid");i.dataSource.hasChanges()?confirm(dialogCancelMessage)?(d=[],i.dataSource.cancelChanges(),i.dataSource.read(),r.data("kendoWindow").close()):t.preventDefault():(d=[],r.data("kendoWindow").close());rt=!1;k=!1;a.length>0&&g()}catch(u){f={method:"gridCancelEvent",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){})}}function ii(n,t){var i,u;try{v?(v=!1,d=[]):(i=$("#"+n).data("kendoGrid"),document.activeElement.blur(),i.dataSource.hasChanges()&&(confirm(dialogCancelMessage)?(d=[],i.dataSource.cancelChanges(),i.dataSource.read()):t.preventDefault()));a.length>0&&g()}catch(r){u={method:"gridCloseEvent",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",u)).then(function(){})}wi=!1;ri=!1;ui=!1;rt=!1;k=!1;s.BaselineCount={};s.BaselineCount.IncreaseBaseline="YES";s.ProjectBaselineCount>0&&(s.showjustification=!0)}function yr(){$("#dialogScheduleBulkEdit").data("kendoWindow").bind("close",function(n){ii("gridScheduleBulkEdit",n)});$("#dialogAskNeedBulkEdit").data("kendoWindow").bind("close",function(n){ii("gridAskNeedBulkEdit",n)});$("#dialogRiskIssueBulkEdit").data("kendoWindow").bind("close",function(n){ii("gridRiskIssueBulkEdit",n)})}function pr(n,t){$('<input name="'+t.field+'" id="'+t.field+'"/>').appendTo(n).kendoComboBox({autoBind:!1,minLength:3,filtering:function(n){n.preventDefault()},placeholder:peoplepickerPlaceholderSmall,dataTextField:"text",dataValueField:"value",valuePrimitive:!0,filter:"contains",dataSource:y,change:function(n){if(n.sender.selectedIndex!=-1){var t=y.filter(function(t){return t.value==n.sender.dataItem(n.item).value});t.length==0&&y.push({text:n.sender.dataItem(n.item).text,value:n.sender.dataItem(n.item).value,UserCountry:n.sender.dataItem(n.item).UserCountry,UserImageUrl:n.sender.dataItem(n.item).UserImageUrl,UserEmailAddress:n.sender.dataItem(n.item).UserEmailAddress,UserDepartment:n.sender.dataItem(n.item).UserDepartment})}},valueTemplate:'<span class="selected-value" style="background-image:url(#: UserImageUrl#)"><\/span><span>#: text#<\/span>',template:"<span class='k-state-default' style=background-image:url(#: UserImageUrl#)><\/span><span class='k-state-default'><h3>#: text#<\/h3># if (UserEmailAddress != null) {#<p>#: UserEmailAddress#<\/p># } if (UserDepartment != null) {# <p><span> #:UserDepartment#<\/span># }if (UserCountry != null) {# <span>#:UserCountry#<\/span><\/p># } #<\/span>"});$("#"+t.field).data("kendoComboBox").input.on("keydown",function(n){o.searchPeopleBulkEdit(n,n.currentTarget.name.replace("_input","")).then(function(n){var i,r,f;try{n.length>0&&(i=[],angular.copy(y,i),angular.forEach(n,function(n){var t=y.filter(function(t){return t.value===n.UserADId});t.length==0&&i.push({text:n.UserDisplayName,value:n.UserADId,UserCountry:n.UserCountry,UserImageUrl:n.UserImageUrl,UserEmailAddress:n.UserEmailAddress,UserDepartment:n.UserDepartment})}),i.reverse(),r=$("#"+t.field).data("kendoComboBox"),r.setDataSource(i),r.dataSource.read())}catch(u){f={method:"askNeeduserDropDownEditor",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){})}})})}function wr(n,t){$('<input name="'+t.field+'" id="'+t.field+'"/>').appendTo(n).kendoComboBox({autoBind:!1,minLength:3,filtering:function(n){n.preventDefault()},placeholder:peoplepickerPlaceholderSmall,dataTextField:"text",dataValueField:"value",valuePrimitive:!0,filter:"contains",dataSource:p,change:function(n){if(n.sender.selectedIndex!=-1){var t=p.filter(function(t){return t.value==n.sender.dataItem(n.item).value});t.length==0&&p.push({text:n.sender.dataItem(n.item).text,value:n.sender.dataItem(n.item).value,UserCountry:n.sender.dataItem(n.item).UserCountry,UserImageUrl:n.sender.dataItem(n.item).UserImageUrl,UserEmailAddress:n.sender.dataItem(n.item).UserEmailAddress,UserDepartment:n.sender.dataItem(n.item).UserDepartment})}},valueTemplate:'<span class="selected-value" style="background-image:url(#: UserImageUrl#)"><\/span><span>#: text#<\/span>',template:"<span class='k-state-default' style=background-image:url(#: UserImageUrl#)><\/span><span class='k-state-default'><h3>#: text#<\/h3># if (UserEmailAddress != null) {#<p>#: UserEmailAddress#<\/p># } if (UserDepartment != null) {# <p><span> #:UserDepartment#<\/span># }if (UserCountry != null) {# <span>#:UserCountry#<\/span><\/p># } #<\/span>"});$("#"+t.field).data("kendoComboBox").input.on("keydown",function(n){o.searchPeopleBulkEdit(n,n.currentTarget.name.replace("_input","")).then(function(n){var i,r,f;try{n.length>0&&(i=[],angular.copy(p,i),angular.forEach(n,function(n){var t=p.filter(function(t){return t.value===n.UserADId});t.length==0&&i.push({text:n.UserDisplayName,value:n.UserADId,UserCountry:n.UserCountry,UserImageUrl:n.UserImageUrl,UserEmailAddress:n.UserEmailAddress,UserDepartment:n.UserDepartment})}),i.reverse(),r=$("#"+t.field).data("kendoComboBox"),r.setDataSource(i),r.dataSource.read())}catch(u){f={method:"riskIssueUserDropDownEditor",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){})}})})}function yi(n){var t=!1,i=$("#"+n).val();if(parseDate(i)&&(t=!0),t){switch(n){case"logDate":s.logDateError=!1;break;case"closeDate":s.closeDateError=!1;break;case"dueDate":s.dueDateError=!1;break;case"completionDate":new Date(i)<=new Date&&(s.completeDateError=!1);break;case"plannedFinishDate":s.plannedFinishError=!1;break;case"askLogDate":s.askLogDateError=!1;break;case"askCloseDate":s.askCloseDateError=!1;break;case"needByDate":s.needByDateError=!1;break;case"statusDate":s.statusDateError=!1}r.$digest()}}function br(n){var t=$("#"+n).data("kendoGrid");if(document.activeElement.blur(),t.dataSource.hasChanges()&&!confirm(includeClosedItemsMsg)){s.askNeedClosed=!s.askNeedClosed;return}ni()}function kr(n){var t=$("#"+n).data("kendoGrid");if(document.activeElement.blur(),t.dataSource.hasChanges()&&!confirm(includeClosedItemsMsg)){s.scheduleClosed=!s.scheduleClosed;return}gt()}function dr(n){var t=$("#"+n).data("kendoGrid");if(document.activeElement.blur(),t.dataSource.hasChanges()&&!confirm(includeClosedItemsMsg)){s.riskIssueClosed=!s.riskIssueClosed;return}dt()}function gr(){try{$("#gridBaselineLogs").kendoGrid({dataSource:{data:ft,sort:[{field:"BaselineCount",dir:"asc"},{field:"ModifiedDate",dir:"asc"}]},groupable:!1,sortable:!0,columns:[{field:"BaselineCount",title:"Baseline"},{field:"ModifiedDate",title:"Baseline Date",template:"#= ModifiedDate ==null ? '' : kendo.toString(kendo.parseDate(new Date(ModifiedDate), 'yyyy-MM-dd'), 'dd-MMM-yy  hh:mm:ss tt') #"},{field:"TeamMemberName",title:"Baseline Set By"},{field:"BaselineComment",title:"Justification"}]})}catch(n){var t={method:"gridBaselineLogs",exceptionMessage:"message:"+n.message+" stack:"+n.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",t)).then(function(){alert(errormessage)})}}function nu(){var n,t,r;try{s.BaselineCount!=null&&(nt=s.BaselineCount.IncreaseBaseline=="YES"?!0:!1);n=$("#dialogScheduleBaselineCount");n.data("kendoWindow").close();rt=!0;bt?pi():(t=$("#gridScheduleBulkEdit").data("kendoGrid"),t.saveChanges())}catch(i){r={method:"UpdateBaselineCount",exceptionMessage:"message:"+i.message+" stack:"+i.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",r)).then(function(){alert(errormessage)})}}function tu(){nt=!1;s.BaselineCount={};s.BaselineCount.IncreaseBaseline="YES";var n=$("#dialogScheduleBaselineCount");n.data("kendoWindow").close()}function iu(){var n=new kendo.data.DataSource({transport:{read:function(n){n.success(et)}},sort:[{field:"TemplateOrder",dir:"asc"}]});$("#gridHubAddMilestones").kendoGrid({dataSource:n,sortable:!1,selectable:!0,navigatable:!0,detailInit:ru,columns:[{field:"MilestoneSet",title:"Milestone Set(s)",template:"<strong>#: MilestoneSet # <\/strong>",attributes:{"class":"ProgHub1"},headerAttributes:{"class":"wrap-header"}}]})}function ru(n){var r=ht.filter(function(t){return t.MilestoneTemplateID==n.data.MilestoneTemplateID}),i=!0;if(r.length==0&&(i=!1),i){var u={dataSource:{sort:[{field:"SortOrder",dir:"asc"}],transport:{read:function(n){n.success(ht)}},filter:{field:"MilestoneTemplateID",operator:"eq",value:n.data.MilestoneTemplateID}},scrollable:!1,editable:!1,navigatable:!0,columns:[{field:"Milestone",title:"Milestone",template:function(n){return n.MilestoneType==1||n.MilestoneType==2?n.Milestone.split("-")[1]==MilestoneExecutionInsert||n.Milestone.split("-")[1].trim()==""?n.Milestone!=null&&n.Milestone!=""?"<span class='RedQuality'>"+(n.MilestoneType==1?MilestoneStartPrefix:MilestoneEndPrefix)+MilestoneExecutionInsert+"<\/span>":"":n.Milestone!=null&&n.Milestone!=""?(n.MilestoneType==1?MilestoneStartPrefix:MilestoneEndPrefix)+n.Milestone.split("-")[1]:"":n.Milestone!=null&&n.Milestone!=""?n.Milestone:""}},{field:"FunctionalGroupName",title:"Functional Owner"},{field:"Comments",title:"Comment"},{title:"Include In Dashboard",headerAttributes:{"class":"wrap-header"},width:"8%",template:function(n){return n.IncludeInReport==!0?'<input type="checkbox" checked disabled class="chkbxmilestonetem" />':'<input type="checkbox" disabled class="chkbxmilestonetem" />'}},{field:"IsLinked",title:"Add",headerAttributes:{"class":"wrap-header"},width:"5%",headerTemplate:'<label>Add<\/label><br><input type="checkbox" class="chkheader">',template:function(n){return n.IsLinked==!0?ut(n,"IsLinked")+'<input type="checkbox" checked class="chkbxlink" />':ut(n,"IsLinked")+'<input type="checkbox" class="chkbxlink" />'}},],dataBound:function(){var n=this;$(".chkbxlink").bind("change",function(n){var e=$(n.target).parent().parent(),r=$(n.target).closest(".k-detail-row").find(".k-grid").data("kendoGrid"),t,u,f,i;r!=undefined&&(t=r.dataItem(e),u=n.target.closest("td"),$(u).prepend("<span class='k-dirty'><\/span>"),t.set("IsLinked",this.checked),this.checked||(f=a.filter(function(n){return n.MilestoneID==t.MilestoneID}),f.length>0&&(i=a.findIndex(n=>n.MilestoneID==t.MilestoneID),a.splice(i,1),t.MilestoneType==null&&(i=c.findIndex(n=>n.MilestoneID==t.MilestoneID),c.splice(i,1),i=h.findIndex(n=>n.MilestoneID==t.MilestoneID),h.splice(i,1))),$("#gridScheduleBulkEdit").data("kendoGrid").dataSource.read()))});$(".chkheader").change(function(n){var u=n.target.checked,e=$(n.target).closest(".k-detail-row").find(".k-grid").data("kendoGrid"),i,t,f,r;if(e!=undefined){for(i=$(n.target).closest(".k-detail-row").find(".k-grid").data("kendoGrid").dataSource.view(),t=0;t<i.length;t++)i[t].set("IsLinked",u),u==!1&&(f=a.filter(function(n){return n.MilestoneID==i[t].MilestoneID}),f.length>0&&(r=a.findIndex(n=>n.MilestoneID==i[t].MilestoneID),a.splice(r,1),i[t].MilestoneType==null&&(r=c.findIndex(n=>n.MilestoneID==i[t].MilestoneID),c.splice(r,1),r=h.findIndex(n=>n.MilestoneID==i[t].MilestoneID),h.splice(r,1))));u==!1&&$("#gridScheduleBulkEdit").data("kendoGrid").dataSource.read()}})}},t=$("<div/>").appendTo(n.detailCell).kendoGrid(u).data("kendoGrid");t.tbody.on("keydown",function(n){var r=n.keyCode?n.keyCode:n.which,i;r==13&&(i=$(n.target).closest(".k-combobox").length,i&&(t.editCell(t.current()),$("[data-role='combobox']").data("kendoComboBox").dataSource.read()))})}else $("<div><span>No Milestones are added<\/span><\/div>").appendTo(n.detailCell)}function uu(){var t,nt,f,i,r,u,e,y,w,b,v,d;try{var p=!1,g=$("#gridHubAddMilestones").data("kendoGrid"),n=g.element.find(".k-detail-row");for(t=0;t<n.length;t++)r=$(n[t]).find(".k-grid").data("kendoGrid"),r!=undefined&&(u=$(n[t]).find(".k-grid").data("kendoGrid").dataSource.data().filter(function(n){return n.IsLinked==!0}).map(function(n){return n}),u.length>0&&(p=!0));if(p==!0&&confirm(setMilestoneConfirm)){for(nt=[],f=!1,i=0;i<n.length;i++)r=$(n[i]).find(".k-grid").data("kendoGrid"),r!=undefined&&(u=$(n[i]).find(".k-grid").data("kendoGrid").dataSource.data().filter(function(n){return n.IsLinked==!0}).map(function(n){return n}),angular.forEach(u,function(n){var i={},r,u,e,t;if(i.ScheduleUniqueID=NewGuid(),i.MilestoneTemplateID=n.MilestoneTemplateID,i.Milestone=n.Milestone,i.Comments=n.Comments,i.Variance="NA",i.FunctionGroupID=n.FunctionGroupID,i.IncludeInReport=n.IncludeInReport,i.ProjectID=SeletedProjectId,i.PlannedFinish=null,i.BaselineFinish=null,i.CompletionDate=null,i.MilestoneType=n.MilestoneType,i.MilestoneID=n.MilestoneID,r=a.filter(function(t){return t.MilestoneID==n.MilestoneID}),r.length==0){if(n.MilestoneType!=null){if(u=a.filter(function(t){return t.MilestoneType==n.MilestoneType&&n.MilestoneType==1}),e=a.filter(function(t){return t.MilestoneType==n.MilestoneType&&n.MilestoneType==2}),u.length>0){f=!0;alert(exeStartMsg);return}if(e.length>0){f=!0;alert(exeEndMsg);return}}n.MilestoneType==1?(t=c.findIndex(n=>n.MilestoneType==1),t>=0&&(c[t].Comments=c[t].Comments!=null&&c[t].Comments!=""?c[t].Comments:n.Comments,c[t].FunctionGroupID=n.FunctionGroupID!=null&&n.FunctionGroupID!=""?n.FunctionGroupID:c[t].FunctionGroupID,c[t].IncludeInReport=c[t].IncludeInReport!=null&&c[t].IncludeInReport!=""?c[t].IncludeInReport:n.IncludeInReport,c[t].Milestone=n.Milestone,c[t].MilestoneTemplateID=n.MilestoneTemplateID,c[t].MilestoneID=n.MilestoneID),t=h.findIndex(n=>n.MilestoneType==1),h[t].Comments=h[t].Comments!=null&&h[t].Comments!=""?h[t].Comments:n.Comments,h[t].FunctionGroupID=n.FunctionGroupID!=null&&n.FunctionGroupID!=""?n.FunctionGroupID:h[t].FunctionGroupID,h[t].IncludeInReport=h[t].IncludeInReport!=null&&h[t].IncludeInReport!=""?h[t].IncludeInReport:n.IncludeInReport,h[t].Milestone=n.Milestone,h[t].MilestoneTemplateID=n.MilestoneTemplateID,h[t].MilestoneID=n.MilestoneID,i.ScheduleUniqueID=h[t].ScheduleUniqueID,i.MilestoneTemplateID=n.MilestoneTemplateID,i.Milestone=n.Milestone,i.Comments=n.Comments,i.Variance="NA",i.FunctionGroupID=n.FunctionGroupID,i.IncludeInReport=n.IncludeInReport,i.ProjectID=SeletedProjectId,i.PlannedFinish=h[t].PlannedFinish,i.BaselineFinish=h[t].BaselineFinish,i.CompletionDate=h[t].CompletionDate,i.MilestoneType=n.MilestoneType,i.MilestoneID=n.MilestoneID,a.push(i)):n.MilestoneType==2?(t=c.findIndex(n=>n.MilestoneType==2),t>=0&&(c[t].Comments=c[t].Comments!=null&&c[t].Comments!=""?c[t].Comments:n.Comments,c[t].FunctionGroupID=n.FunctionGroupID!=null&&n.FunctionGroupID!=""?n.FunctionGroupID:c[t].FunctionGroupID,c[t].IncludeInReport=c[t].IncludeInReport!=null&&c[t].IncludeInReport!=""?c[t].IncludeInReport:n.IncludeInReport,c[t].Milestone=n.Milestone,c[t].MilestoneTemplateID=n.MilestoneTemplateID,c[t].MilestoneID=n.MilestoneID),t=h.findIndex(n=>n.MilestoneType==2),h[t].Comments=h[t].Comments!=null&&h[t].Comments!=""?h[t].Comments:n.Comments,h[t].FunctionGroupID=n.FunctionGroupID!=null&&n.FunctionGroupID!=""?n.FunctionGroupID:h[t].FunctionGroupID,h[t].IncludeInReport=h[t].IncludeInReport!=null&&h[t].IncludeInReport!=""?h[t].IncludeInReport:n.IncludeInReport,h[t].Milestone=n.Milestone,h[t].MilestoneTemplateID=n.MilestoneTemplateID,h[t].MilestoneID=n.MilestoneID,i.ScheduleUniqueID=h[t].ScheduleUniqueID,i.MilestoneTemplateID=n.MilestoneTemplateID,i.Milestone=n.Milestone,i.Comments=n.Comments,i.Variance="NA",i.FunctionGroupID=n.FunctionGroupID,i.IncludeInReport=n.IncludeInReport,i.ProjectID=SeletedProjectId,i.PlannedFinish=h[t].PlannedFinish,i.BaselineFinish=h[t].BaselineFinish,i.CompletionDate=h[t].CompletionDate,i.MilestoneType=n.MilestoneType,i.MilestoneID=n.MilestoneID,a.push(i)):(a.push(i),c.push(i),h.push(i))}}));f||(a.length>0&&($("#gridScheduleBulkEdit").data("kendoGrid").dataSource.read(),e=$("#gridScheduleBulkEdit").data("kendoGrid"),s.scheduleClosed?angular.forEach(a,function(n){var t=e.dataSource.get(n.ScheduleUniqueID);t.dirty=!0}):(y=a.filter(function(n){return n.CompletionDate==null}),y.length>0?angular.forEach(y,function(n){var t=e.dataSource.get(n.ScheduleUniqueID);t.dirty=!0}):c.length>0&&(w=c[0].ScheduleUniqueID,b=e.dataSource.get(w),b.dirty=!0))),$("#gridScheduleBulkEdit").data("kendoGrid").refresh(),v=$("#dialogAddMilestoneHub"),v.data("kendoWindow").close())}else v=$("#dialogAddMilestoneHub"),v.data("kendoWindow").close()}catch(k){d={method:"AddMilestoneSchedule",exceptionMessage:"message:"+k.message+" stack:"+k.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",d)).then(function(){alert(errormessage)})}}function fu(n,t){var i,r,f;try{i=$("#"+n).data("kendoGrid");r=$("#"+t);document.activeElement.blur();i.dataSource.hasChanges()?t=="dialogAddMilestoneHub"?confirm(saveMilestoneConfirm)?eu():r.data("kendoWindow").open():confirm(dialogCancelMessage)?(i.dataSource.cancelChanges(),i.dataSource.read(),r.data("kendoWindow").open()):e.preventDefault():r.data("kendoWindow").open()}catch(u){f={method:"CheckBulkEditGridUpdate",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){})}}function eu(){var n,t,i,r,f;try{if(n=$("#gridScheduleBulkEdit").data("kendoGrid").tbody.find("input:checked").length,s.scheduleClosed){if(n>milestoneIncludeReportCount)return alert(includeReportMessageForMilestone),!1}else if(t=h.filter(function(n){return n.IncludeInReport==!0&&n.CompletionDate!=null}),t.length>0){if(i=n+t.length,i>milestoneIncludeReportCount)return alert(includeReportMessageForMilestone),!1}else if(n>milestoneIncludeReportCount)return alert(includeReportMessageForMilestone),!1;k?rt||(bt=!0,r=$("#dialogScheduleBaselineCount"),r.data("kendoWindow").open()):pi()}catch(u){f={method:"UpdateMilestones",exceptionMessage:"message:"+u.message+" stack:"+u.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",f)).then(function(){alert(errormessage)})}}function pi(){var f,t;try{var r=[],i=[];if($("#gridScheduleBulkEdit").data("kendoGrid")!=undefined){var u=$("#gridScheduleBulkEdit").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),c=u.filter(function(n){return n.id==""||n.id==null}).map(function(n){return n}),y=u.filter(function(n){return n.id!=""&&n.id!=null}).map(function(n){return n});angular.forEach(c,function(n){var t={};t.ScheduleUniqueID=NewGuid();t.Milestone=n.Milestone;t.PlannedFinish=kendo.toString(n.PlannedFinish,"d");t.BaselineFinish=kendo.toString(n.BaselineFinish,"d");t.CompletionDate=kendo.toString(n.CompletionDate,"d");t.FunctionGroupID=n.FunctionGroupID;t.IncludeInReport=n.IncludeInReport;t.ProjectID=n.ProjectID;t.Comments=n.Comments;t.IncludeInCharter=n.IncludeInCharter;r.push(t)});angular.forEach(y,function(n){var t={};t.ScheduleUniqueID=n.ScheduleUniqueID;t.MilestoneType=n.MilestoneType;t.Milestone=n.MilestoneType==1?MilestoneStartPrefix+n.Milestone:n.MilestoneType==2?MilestoneEndPrefix+n.Milestone:n.Milestone;t.PlannedFinish=kendo.toString(n.PlannedFinish,"d");t.BaselineFinish=kendo.toString(n.BaselineFinish,"d");t.CompletionDate=kendo.toString(n.CompletionDate,"d");t.FunctionGroupID=n.FunctionGroupID;t.IncludeInReport=n.IncludeInReport;t.ProjectID=n.ProjectID;t.IncludeInCharter=n.IncludeInCharter;t.ParentProgramID=n.ParentProgramID;t.Comments=n.Comments;t.IsLinked=n.IsLinked;a.length>0&&(t.MilestoneTemplateID=n.MilestoneTemplateID,t.MilestoneID=n.MilestoneID);i.push(t)})}a.length>0&&(s.scheduleClosed||(f=a.filter(function(n){return n.CompletionDate!=null}),angular.forEach(f,function(n){var r=h.findIndex(t=>t.MilestoneType==n.MilestoneType),t={};t.ScheduleUniqueID=h[r].ScheduleUniqueID;t.MilestoneType=h[r].MilestoneType;t.Milestone=h[r].Milestone;t.PlannedFinish=kendo.toString(h[r].PlannedFinish,"d");t.BaselineFinish=kendo.toString(h[r].BaselineFinish,"d");t.CompletionDate=kendo.toString(h[r].CompletionDate,"d");t.FunctionGroupID=h[r].FunctionGroupID;t.IncludeInReport=h[r].IncludeInReport;t.ProjectID=h[r].ProjectID;t.IncludeInCharter=h[r].IncludeInCharter;t.ParentProgramID=h[r].ParentProgramID;t.Comments=h[r].Comments;t.IsLinked=h[r].IsLinked;t.MilestoneTemplateID=h[r].MilestoneTemplateID;t.MilestoneID=h[r].MilestoneID;i.push(t)})));t={programId:SeletedProjectId,userId:currentUserId,objInsert:JSON.stringify(r),objUpdate:JSON.stringify(i),objDelete:JSON.stringify(wt)};o.postDataWCFAsync("insertUpdateProgramMilestones",t).then(function(t){var i;if(t=="Success")if(alert("Milestone data updated successfully"),k){k=!1;var r=d.toString(),u={CurrentProjectID:SeletedProjectId,ProjectID:SeletedProjectId,TeamMemberAdId:currentUserId,Milestones:r,IncreaseBaseline:nt,BaselineComment:s.BaselineCount.Comment},f=JSON.stringify({BaselineData:u});n.$emit("RefreshForDataQuality");o.postDataWCF("insertProjectBaseline",f).then(function(n){if(n.insertProjectBaselineResult=="Success"){nt&&(s.ProjectBaselineCount=s.ProjectBaselineCount+1);s.ProjectBaselineDate=s.todayDate;g();v=!0;rt=!1;k=!1;var t=$("#dialogAddMilestoneHub");t.data("kendoWindow").open()}})}else a=[],g(),v=!0,rt=!1,k=!1,i=$("#dialogAddMilestoneHub"),i.data("kendoWindow").open();else alert("Error occurred in item updation for schedule.")})}catch(e){t={method:"UpdateMilestones",exceptionMessage:"message:"+e.message+" stack:"+e.stack,ErrorParameter:l};$.when(o.postDataWCFAsync("WriteErrorLog",t)).then(function(){alert(errormessage)})}}function ou(){}var s=this;s.myvalue=!1;s.qualityGridVisible=!1;s.riskIssueClosed=!1;s.askNeedClosed=!1;s.scheduleClosed=!1;s.Edit=!1;s.showTeamPermission=!1;s.ShowBaseline=!1;s.showPhase=!1;s.showDeliverables=!0;var nt=!1,rt=!1,k=!1,v=!1,ri=!1,wi=!1,ui=!1,y=[],p=[],ot=[],bi=[],fi=[],wt=[],ei=!1,bt=!1;s.showOverall=!1;s.showRiskIssue=!1;s.showAskNeed=!1;s.showMilestone=!1;s.showBudget=!1;s.showDocument=!1;s.showTeam=!1;s.showProjectType=!1;s.completeDateError=!1;s.finishDateError=!1;s.showjustification=!0;s.ProjectName="";s.todayDate;s.phasePagepath=phasePagepath;s.addNewRolePagepath=addNewRolePagepath;s.projectDetailsAndFormsPagepath=projectDetailsAndFormsPagepath;s.OverallStatusColor="Grey";s.ExecuteStyle="";s.IntiateStyle="";s.DefineStyle="";s.PlanStyle="";s.CloseStyle="";s.TrackStyle="";s.ProjectBaselineDate;s.ProjectBaselineCount=0;s.dateFormatlabel=dateLabel;s.dateErrorMsg=InValidDateFormat;s.overAllData={};s.OverAllDataMain={};s.dstempProjectClassification=[];s.projectTypeSelector=[];s.riskIssue={};s.askNeed={};s.schedule={};s.projectTeam={};s.BaselineCount={};var oi={},si={};s.projectHubStatus={};s.dsPrimaryProduct=[];s.dsOwner=[];s.dsExecutionScope=[];s.dsProjectClassification=[];s.dsResList=[];s.overAllStatus=[];s.projectPhase=[];s.projectState=[];s.teamRole=[];s.AskNeedusersList=[];s.riskIssueType=[];s.probability=[];s.dsFuntionalGroup=[];s.Impact=[];s.askNeedData=[];s.initProjectHub=ou;s.GetOptionData=rr;s.RiskIssueBulkEdit=li;s.AskNeedBulkEdit=ai;s.ScheduleBulkEdit=vi;s.IncludeClosedRiskIssue=dt;s.IncludeClosedAskNeed=ni;s.IncludeClosedMilestone=gt;s.CheckIncludeClosedRiskIssue=dr;s.CheckIncludeClosedAskNeed=br;s.CheckIncludeClosedMilestone=kr;s.SetBaseline=vr;s.openRiskIssueDialog=di;s.openAskNeedDialog=nr;s.openScheduleDialog=tr;s.openOverallStatusDialog=gi;s.UpdateBaselineCount=nu;s.dialogBaselineCountCose=tu;s.AddMilestoneSchedule=uu;s.CheckBulkEditGridUpdate=fu;var w=[],b=[],c=[],tt=[],it=[],h=[],ft=[],st=[],hi=[],ci=[],kt=[],et=[],ht=[],a=[],ki=riskIssueProbability+","+riskIssueImpact+","+funtionalGroup+","+riskIssueType+","+overAllStatus+","+performanceStatus+","+topsPrimaryKpi,ct=0,lt=0,at=0,d=[],l="ProjectHubCtrl",ut=function(n,t){return n.dirty&&n.dirtyFields[t]?"<span class='k-dirty'><\/span>":""};n.$on("getProjectHubData",function(){displayLoading();ir()});n.$on("getProjectHubRiskData",function(){vt()});n.$on("getProjectHubScheduleData",function(){g()});n.$on("getProjectHubAskNeedData",function(){yt()});n.$on("getProjectHubOverallData",function(){sr()})}angular.module("SPOTApp").controller("ProjectHubCtrl",ProjectHubCtrl);ProjectHubCtrl.$inject=["$rootScope","$filter","$scope","$http","$q","GETPostService"];