function ProjectCharterCtrl(n,t,i,r,u,f){function v(n){var t=$("#"+n).data("kendoGrid"),i=t.dataSource.sort();i&&t.dataSource.sort(null);t.addRow()}function lt(){e.isEditable&&(v("gridProjectCharterKeySuccessCriteria"),v("gridProjectCharterMilestone"),v("gridProjectTeam"),v("gridProjectCharterRisk"),v("gridProjectCharterAssumption"),v("gridProjectCharterFunding1"))}function gt(n,t){n==!0?e.agileVisibleCharter=!0:confirm(agileTypeClearMessage)?(e.agileVisibleCharter=!1,e.selectedAgilePrimaryWorkstream="",e.agileSecWorkstreamIds="",e.selectedAgileWave=""):t.preventDefault()}function ni(n){$("#"+n).on("change",function(){var n=!1,t=$("#"+$(this).attr("id")).val();parseDate(t)&&(n=!0);n&&(e.pcApprovedDateError=!1);i.$digest()})}function at(){var n,t,u;try{n=[{field:"KPIID",title:"Associated KPI",values:ot},{field:"Metric",title:"Metric"},{field:"CurrentState",title:"Current State"},{field:"TargetPerformance",title:"Target Performance"},{title:"Include in Charter (Max 3)",headerAttributes:{"class":"wrap-header"},template:function(n){return e.isEditable==!1?n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input disabled="disabled" checked type="checkbox" class="successchkbx" />':o(n,"IncludeInCharter")+'<input disabled="disabled" type="checkbox" class="successchkbx" />':n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input type="checkbox" checked class="successchkbx" />':o(n,"IncludeInCharter")+'<input type="checkbox" class="successchkbx" />'}},{hidden:!e.isEditable,command:[{name:" ",iconClass:"k-icon k-i-close",width:"10%",click:function(n){var r,t,u,h;try{confirm(gridDeleteMessage)?(n.preventDefault(),r=$(n.target).closest("tr"),t=this.dataItem(r),t.KeySuccessUniqueID!="undefined"&&t.KeySuccessUniqueID!=""&&e.deletedKeySuccessData.push({KeySuccessUniqueID:t.KeySuccessUniqueID}),u=$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid"),u.removeRow(r),i.$digest()):n.preventDefault()}catch(o){hideLoading();h={method:"InitkGridProjectCharterKeySuccessCriteria_click",exceptionMessage:"message:"+o.message+" stack:"+o.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",h)).then(function(){alert(errormessage)})}}}]}];t=new kendo.data.DataSource({transport:{read:function(n){n.success(w)}},batch:!0,schema:{model:{id:"KeySuccessUniqueID",fields:{KeySuccessUniqueID:{editable:!1,nullable:!0},KPIID:{type:"string",editable:e.isEditable},Metric:{type:"string",editable:e.isEditable},CurrentState:{type:"string",editable:e.isEditable},TargetPerformance:{type:"string",editable:e.isEditable},IncludeInCharter:{type:"boolean",editable:e.isEditable}}}}});$("#gridProjectCharterKeySuccessCriteria").kendoGrid({dataSource:t,columns:n,navigatable:!0,editable:{createAt:"bottom"},dataBound:function(){$(".successchkbx").bind("change",function(n){var t=$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr")),r=n.target.closest("td");$(r).prepend("<span class='k-dirty'><\/span>");i.set("IncludeInCharter",this.checked)})}})}catch(r){hideLoading();u={method:"InitkGridProjectCharterKeySuccessCriteria",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}}function vt(){var n,t,u;try{n=[{title:" ",width:"4%",template:function(n){return IsProgram?n.link==1?"<span class='k-icon k-i-link-vertical'><\/span>":"":""}},{field:"Milestone",title:"Milestone"},{field:"PlannedFinish",title:"Planned Finish (mm/dd/yyyy)",format:"{0:MM/dd/yyyy}"},{field:"FunctionGroupID",title:"Functional Owner",values:et},{title:"Include in Charter (Max 10)",headerAttributes:{"class":"wrap-header"},template:ti},{hidden:!e.isEditable,command:[{name:" ",iconClass:"k-icon k-i-close",width:"10%",click:function(n){var r,t,u;confirm(gridDeleteMessage)?(n.preventDefault(),r=$(n.target).closest("tr"),t=this.dataItem(r),t.ScheduleUniqueID!="undefined"&&t.ScheduleUniqueID!=""&&e.deletedMilestoneData.push({ScheduleUniqueID:t.ScheduleUniqueID}),u=$("#gridProjectCharterMilestone").data("kendoGrid"),u.removeRow(r),i.$digest()):n.preventDefault()}}]}];t=new kendo.data.DataSource({transport:{read:function(n){n.success(p)}},sort:[{field:"PlannedFinish",dir:"asc"}],batch:!0,schema:{model:{id:"ScheduleUniqueID",fields:{ScheduleUniqueID:{editable:!1,nullable:!0},Milestone:{type:"string",editable:e.isEditable},PlannedFinish:{type:"date",defaultValue:null,editable:e.isEditable},FunctionGroupID:{type:"string",editable:e.isEditable},IncludeInCharter:{type:"boolean",editable:e.isEditable}}}}});$("#gridProjectCharterMilestone").kendoGrid({dataSource:t,columns:n,selectable:!0,sortable:!0,navigatable:!0,editable:{createAt:"bottom"},dataBound:function(){$(".milestoneChkbx").bind("change",function(n){var t=$("#gridProjectCharterMilestone").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr"));i.set("IncludeInCharter",this.checked)})}});IsProgram&&$("#gridProjectCharterMilestone").kendoTooltip({filter:"td:nth-child(2)",position:"absolute",width:300,content:function(n){var t=$("#gridProjectCharterMilestone").data("kendoGrid").dataItem(n.target.closest("tr"));return t.ProblemID!=null?"<div class='prgmtooltip'>"+t.ProblemID+" - "+t.ProjectName+"<\/div>":""}}).data("kendoTooltip")}catch(r){hideLoading();u={method:"InitkGridProjectCharterMilestone",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}}function yt(){var n,t,u;try{h=[];angular.forEach(l,function(n){var i,t;n.TeamMemberAdId!=null&&n.TeamMemberAdId!=""&&(i=h.filter(function(t){return t.value===n.TeamMemberAdId}),i.length==0&&(t={},t.text=n.TeamMemberName,t.value=n.TeamMemberAdId,t.UserCountry=n.UserCountry,t.UserImageUrl=n.UserImageUrl,t.UserEmailAddress=n.UserEmailAddress,t.UserDepartment=n.UserDepartment,h.push(t)))});n=[{field:"RoleID",title:"Role Name",values:d,editor:ei,width:"20%"},{field:"TeamMemberAdId",title:"Team Member",values:h,editor:oi,template:function(n){if(n.TeamMemberAdId!=null){var t;t=h.filter(function(t){return t.value==n.TeamMemberAdId});t.length>0?n.TeamMemberName=t[0].text:(n.TeamMemberName="",n.TeamMemberAdId="")}return n.TeamMemberName},width:"35%"},{field:"TeamPermissionID",title:"Permission",values:nt,width:"0%",hidden:!0},{field:"PercentTime",title:"% Time",width:"12%",attributes:{"class":"txt-float-R"}},{field:"Duration",title:"Duration (Months)",width:"12%",format:"{0:n0}",decimals:0,min:0,restrictDecimals:!1,attributes:{"class":"txt-float-R"}},{title:"Include in Charter (Max 10)",headerAttributes:{"class":"wrap-header"},template:ii,width:"17%"},{hidden:!e.isEditable,command:[{name:" ",iconClass:"k-icon k-i-close",width:"5%",click:function(n){var r,t,u;confirm(gridDeleteMessage)?(n.preventDefault(),r=$(n.target).closest("tr"),t=this.dataItem(r),t.ProjectTeamUniqueID!="undefined"&&t.ProjectTeamUniqueID!=""&&e.deletedTeamsData.push({ProjectTeamUniqueID:t.ProjectTeamUniqueID}),u=$("#gridProjectTeam").data("kendoGrid"),u.removeRow(r),i.$digest()):n.preventDefault()}}]}];t=new kendo.data.DataSource({transport:{read:function(n){n.success(l)}},sort:[{field:"Role",dir:"asc"}],batch:!0,schema:{model:{id:"ProjectTeamUniqueID",fields:{ProjectTeamUniqueID:{editable:!1,nullable:!0},RoleID:{type:"string",editable:e.isEditable},Role:{type:"string",editable:e.isEditable},TeamMemberAdId:{type:"string",editable:e.isEditable},TeamMemberName:{type:"string",editable:e.isEditable},PercentTime:{type:"number",validation:{min:0,max:100,maxlength:4},editable:e.isEditable},Duration:{type:"number",validation:{min:0,maxlength:6},editable:e.isEditable},IncludeInCharter:{type:"boolean",editable:e.isEditable},TeamPermissionID:{type:"string",editable:e.isEditable}}}}});$("#gridProjectTeam").kendoGrid({dataSource:t,columns:n,selectable:!0,editable:{createAt:"bottom"},dataBound:function(){$(".teamChkbx").bind("change",function(n){var t=$("#gridProjectTeam").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr"));i.set("IncludeInCharter",this.checked)})},edit:function(n){var i=this,t=n.model.RoleID,u=n.model.TeamMemberAdId,r=i.columns[n.container.index()].field;r=="RoleID"&&(t==projectmanager||t==projectSponsor)&&this.closeCell()}})}catch(r){hideLoading();u={method:"InitkGridProjectTeam",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}}function ei(n,t){$('<input class="peoplePickerNoImage" name="'+t.field+'"/>').appendTo(n).kendoDropDownList({autoBind:!1,dataTextField:"text",dataValueField:"value",placeholder:"Select and/or Type to Search",valuePrimitive:!0,dataSource:d,select:function(n){n.dataItem.isDisabled&&n.preventDefault();n.dataItem.set("isDisabled",!0)},template:"# if (isDisabled) { #<span class='k-state-disabled peoplePickerNoImage'>#: text#<\/span># } else{#<span class='peoplePickerNoImage'>#: text#<\/span>#}#"})}function oi(n,t){$('<input name="'+t.field+'" id="'+t.field+'"/>').appendTo(n).kendoComboBox({autoBind:!1,placeholder:peoplepickerPlaceholder,dataTextField:"text",dataValueField:"value",valuePrimitive:!0,minLength:3,filtering:function(n){n.preventDefault()},filter:"contains",dataSource:h,change:function(n){if(n.sender.selectedIndex!=-1){var t=h.filter(function(t){return t.value==n.sender.dataItem(n.item).value});t.length==0&&h.push({text:n.sender.dataItem(n.item).text,value:n.sender.dataItem(n.item).value,UserCountry:n.sender.dataItem(n.item).UserCountry,UserImageUrl:n.sender.dataItem(n.item).UserImageUrl,UserEmailAddress:n.sender.dataItem(n.item).UserEmailAddress,UserDepartment:n.sender.dataItem(n.item).UserDepartment})}},valueTemplate:'<span class="selected-value" style="background-image:url(#: UserImageUrl#)"><\/span><span>#: text#<\/span>',template:"<span class='k-state-default' style=background-image:url(#: UserImageUrl#)><\/span><span class='k-state-default'><h3>#: text#<\/h3># if (UserEmailAddress != null) {#<p>#: UserEmailAddress#<\/p># } if (UserDepartment != null) {# <p><span> #:UserDepartment#<\/span># }if (UserCountry != null) {# <span>#:UserCountry#<\/span><\/p># } #<\/span>"});$("#"+t.field).data("kendoComboBox").input.on("keydown",function(n){n.currentTarget.name!=null&&f.searchPeopleBulkEdit(n,n.currentTarget.name.replace("_input","")).then(function(n){var i,r;n.length>0&&(i=[],angular.copy(h,i),angular.forEach(n,function(n){var t=h.filter(function(t){return t.value===n.UserADId});t.length==0&&i.push({text:n.UserDisplayName,value:n.UserADId,UserCountry:n.UserCountry,UserImageUrl:n.UserImageUrl,UserEmailAddress:n.UserEmailAddress,UserDepartment:n.UserDepartment})}),i.reverse(),r=$("#"+t.field).data("kendoComboBox"),r.setDataSource(i),r.dataSource.read())})})}function pt(){var n,r;try{var u=[{field:"KeyAssumption",title:"Key Assumption"},{field:"AssumptionRationale",title:"Why Is This Assumption Valid?"},{title:"Include in Charter (Max 5)",headerAttributes:{"class":"wrap-header"},template:fi},{hidden:!e.isEditable,command:[{name:" ",iconClass:"k-icon k-i-close",width:"5%",click:function(n){var r,t,u;confirm(gridDeleteMessage)?(n.preventDefault(),r=$(n.target).closest("tr"),t=this.dataItem(r),t.KeyAssumptionUniqueID!="undefined"&&t.KeyAssumptionUniqueID!=""&&e.deletedAssumptionData.push({KeyAssumptionUniqueID:t.KeyAssumptionUniqueID}),u=$("#gridProjectCharterAssumption").data("kendoGrid"),u.removeRow(r),i.$digest()):n.preventDefault()}}]}],o=[{field:"RiskIssueUniqueID",title:"Id",hidden:!0},{field:"ProjectID",title:"ProjectID",editable:!1,hidden:!0},{title:" ",width:"4%",template:function(n){return IsProgram?n.link==1?"<span class='k-icon k-i-link-vertical'><\/span>":"":""}},{field:"IfHappens",title:"If This Happens",headerAttributes:{"class":"wrap-header"},width:"20%",editable:function(){return e.isEditable}},{field:"RiskIssueResult",title:"This Is Result",headerAttributes:{"class":"wrap-header"},width:"18%",editable:function(){return e.isEditable}},{field:"Mitigation",title:"Mitigation",width:"15%",editable:function(){return e.isEditable}},{field:"RiskIssueTypeID",title:"Type",values:rt,editable:function(){return e.isEditable}},{title:"Include in Charter (Max 5)",headerAttributes:{"class":"wrap-header"},width:"12%",template:ri},{hidden:!e.isEditable,command:[{name:" ",iconClass:"k-icon k-i-close",width:"5%",click:function(n){var r,t,u;confirm(gridDeleteMessage)?(n.preventDefault(),r=$(n.target).closest("tr"),t=this.dataItem(r),t.RiskIssueUniqueID!="undefined"&&t.RiskIssueUniqueID!=""&&e.deletedRiskData.push({RiskIssueUniqueID:t.RiskIssueUniqueID}),u=$("#gridProjectCharterRisk").data("kendoGrid"),u.removeRow(r),i.$digest()):n.preventDefault()}}]}],h=new kendo.data.DataSource({transport:{read:function(n){n.success(y)}},batch:!0,schema:{model:{id:"RiskIssueUniqueID",fields:{ProjectID:{editable:!1,hidden:!0,defaultValue:SeletedProjectId},RiskIssueUniqueID:{editable:!1,hidden:!0},IfHappens:{type:"string",editable:e.isEditable},RiskIssueResult:{type:"string",editable:e.isEditable},Mitigation:{type:"string",editable:e.isEditable},RiskIssueTypeID:{editable:e.isEditable},IncludeInCharter:{type:"boolean",editable:e.isEditable}}}}});$("#gridProjectCharterRisk").kendoGrid({dataSource:h,selectable:!0,navigatable:!0,editable:{createAt:"bottom"},columns:o,dataBound:function(){$(".riskChkbx").bind("change",function(n){var t=$("#gridProjectCharterRisk").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr"));i.set("IncludeInCharter",this.checked)})}});IsProgram&&$("#gridProjectCharterRisk").kendoTooltip({filter:"td:nth-child(4)",position:"absolute",width:300,content:function(n){var t=$("#gridProjectCharterRisk").data("kendoGrid").dataItem(n.target.closest("tr"));return t.ProblemID!=null?"<div class='prgmtooltip'>"+t.ProblemID+" - "+t.ProjectName+"<\/div>":""}}).data("kendoTooltip");n=new kendo.data.DataSource({transport:{read:function(n){n.success(b)}},batch:!0,schema:{model:{id:"KeyAssumptionUniqueID",fields:{KeyAssumptionUniqueID:{editable:!1,nullable:!0},KeyAssumption:{type:"string",editable:e.isEditable},AssumptionRationale:{type:"string",editable:e.isEditable},IncludeInCharter:{type:"boolean",editable:e.isEditable}}}}});$("#gridProjectCharterAssumption").kendoGrid({dataSource:n,columns:u,navigatable:!0,editable:{createAt:"bottom"},dataBound:function(){$(".assumptionChkbx").bind("change",function(n){var t=$("#gridProjectCharterAssumption").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr"));i.set("IncludeInCharter",this.checked)})}})}catch(t){hideLoading();r={method:"InitkGridProjectCharterRisk",exceptionMessage:"message:"+t.message+" stack:"+t.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",r)).then(function(){alert(errormessage)})}}function wt(){var n,t,r;try{n=si();t=new kendo.data.DataSource({transport:{read:function(n){n.success(k)}},batch:!0,schema:{model:{id:"FundingUniqueID",fields:{FundingUniqueID:{editable:!1,nullable:!0},FundingTypeID:{type:"string",editable:e.isEditable},FundingSourceID:{type:"string",editable:e.isEditable},FundingIntheplan:{type:"boolean",editable:e.isEditable},FundingAmount:{type:"number",validation:{min:0,maxlength:12},editable:e.isEditable},FundingNotes:{type:"string",editable:e.isEditable},IncludeInCharter:{type:"boolean",editable:e.isEditable}}}}});$("#gridProjectCharterFunding1").kendoGrid({dataSource:t,columns:n,navigatable:!0,editable:{createAt:"bottom"},dataBound:function(){$(".fundChkbx").bind("click",function(n){var t=$("#gridProjectCharterFunding1").data("kendoGrid"),i=t.dataItem($(n.target).closest("tr"));i.set("IncludeInCharter",this.checked)})}})}catch(i){hideLoading();r={method:"InitkGridProjectCharterFunding",exceptionMessage:"message:"+i.message+" stack:"+i.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",r)).then(function(){alert(errormessage)})}}function si(){return[{field:"FundingTypeID",title:"Funding Type",values:ut},{field:"FundingSourceID",title:"Funding Source",values:ft},{field:"FundingIntheplan",title:"In the Plan",values:[{text:"Yes",value:!0},{text:"No",value:!1}]},{field:"FundingAmount",title:"Amount "+e.localCurrencyAbbre,format:"{0:n0}",decimals:0,min:0,restrictDecimals:!0,attributes:{"class":"txt-float-R"}},{field:"FundingNotes",title:"Notes"},{field:"IncludeInCharter",title:"Include in Charter (Max 3)",headerAttributes:{"class":"wrap-header"},template:ui},{hidden:!e.isEditable,command:[{name:" ",iconClass:"k-icon k-i-close",width:"10%",click:function(n){var r,t,u;confirm(gridDeleteMessage)?(n.preventDefault(),r=$(n.target).closest("tr"),t=this.dataItem(r),t.FundingUniqueID!="undefined"&&t.FundingUniqueID!=""&&e.deletedFundingData.push({FundingUniqueID:t.FundingUniqueID}),u=$("#gridProjectCharterFunding1").data("kendoGrid"),u.removeRow(r),i.$digest()):n.preventDefault()}}]}]}function hi(){var n,u;e.deletedMilestoneData=[];e.deletedRiskData=[];e.deletedKeySuccessData=[];e.deletedAssumptionData=[];e.deletedTeamsData=[];e.deletedFundingData=[];e.options={format:"n1",decimals:1,min:0,restrictDecimals:!0};e.optionsCurrency={format:"n0",decimals:0,min:0,restrictDecimals:!0};e.pcApprovedDateError=!1;e.isPortfolioOwnerEditablePC=canPortfolioOwnerEdit;try{SeletedProjectId=getParameterByName(window.location.search,"ProblemID");n=product+","+portfolioOwner+","+CapitalProjectClassification+","+topsFunctionRequired+","+riskIssueType+","+businessCaseFundingType+","+funtionalGroup+","+executionScope+","+teamPermission+","+topsPrimaryKpi+","+agileAttribute+","+agileWave;$.when(f.postDataWCFAsync("getLookupData",n),f.getDataWCFAsync("getRiskIssue/"+SeletedProjectId),f.getDataWCFAsync("getProjectTeam/"+SeletedProjectId),f.getDataWCFAsync("getSchedule/"+SeletedProjectId),f.postDataWCFAsync("getProjectCharterKeySuccess",SeletedProjectId),f.postDataWCFAsync("getProjectCharterFunding",SeletedProjectId),f.postDataWCFAsync("getProjectCharterInfoByID",SeletedProjectId),f.postDataWCFAsync("getProjectCharterAssumption",SeletedProjectId),f.getDataWCFAsync("getUserPermissionByProjectUserId/"+currentUserId+"/"+SeletedProjectId),f.postDataWCFAsync("getUserTeamPermission")).then(function(n,r,u,o,h,a,v,it,st,ht){var ii,ei,oi,si,hi,ci,li,ai,kt,gt,ni,ri,ui,wi,bi,ki,di,fi,ti,ct,gi,tr;try{for(e.dsPermission=JSON.parse(st.getUserPermissionByProjectUserIdResult),e.isEditable=e.dsPermission[0].canEdit==!0?!0:!1,e.dsPrimaryProduct=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===product}),e.dsOwner=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===portfolioOwner}),e.dsExecutionScope=t("orderBy")(JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==executionScope}),"LookUpMemberOrder"),e.dsProjectClassification=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===CapitalProjectClassification}),e.dsAgilePrimaryWorkstation=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==agileAttribute}),e.dsAgileWave=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==agileWave}),e.dsPrimaryKPI=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==topsPrimaryKpi}),e.functionRequired=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===topsFunctionRequired}),e.dsProjectClassification=t("orderBy")(e.dsProjectClassification,"LookUpMemberOrder"),e.dsPrimaryProduct=t("orderBy")(e.dsPrimaryProduct,"LookUpMemberOrder"),e.dsFundingType=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===businessCaseFundingType}),bt=JSON.parse(ht.getUserTeamPermissionResult),ii=JSON.parse(v.getProjectCharterInfoByIDResult),ii.length>0&&(e.projectCharterInfoSelected=ii[0]),e.localCurrencyAbbrePlaceholder=e.projectCharterInfoSelected.LocalCurrencyAbbreviation,e.projectCharterInfoSelected.LocalCurrencyAbbreviation!=null&&(e.localCurrencyAbbre="("+e.projectCharterInfoSelected.LocalCurrencyAbbreviation+")"),ei=e.projectCharterInfoSelected.ParentProgramName,oi=e.projectCharterInfoSelected.ParentProgramID,dt(oi,ei),e.projectCharterInfoSelected.PrimaryProductID!=null&&e.projectCharterInfoSelected.PrimaryProductID!=""&&(si=e.dsPrimaryProduct.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.PrimaryProductID}),e.projectCharterInfoSelected.PrimaryProductID=si[0]),e.projectCharterInfoSelected.PortfolioOwnerID!=null&&e.projectCharterInfoSelected.PortfolioOwnerID!=""&&(hi=e.dsOwner.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.PortfolioOwnerID}),e.projectCharterInfoSelected.PortfolioOwnerID=hi[0]),e.projectCharterInfoSelected.GovernanceBodyTypeID!=null&&e.projectCharterInfoSelected.GovernanceBodyTypeID!=""&&(ci=e.dsOwner.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.GovernanceBodyTypeID}),e.projectCharterInfoSelected.GovernanceBodyTypeID=ci[0]),e.projectCharterInfoSelected.FunctionsRequiredID!=null&&e.projectCharterInfoSelected.FunctionsRequiredID!=""&&(li=e.functionRequired.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.FunctionsRequiredID}),e.projectCharterInfoSelected.FunctionsRequiredID=li[0]),e.projectCharterInfoSelected.PrimaryKPI!=null&&e.projectCharterInfoSelected.PrimaryKPI!=""&&(ai=e.dsPrimaryKPI.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.PrimaryKPI}),e.projectCharterInfoSelected.PrimaryKPI=ai[0]),kt=[],e.projectCharterInfoSelected.AgilePrimaryWorkstream!=null&&e.projectCharterInfoSelected.AgilePrimaryWorkstream!=""&&(kt=e.dsAgilePrimaryWorkstation.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.AgilePrimaryWorkstream})),e.selectedAgilePrimaryWorkstream=kt.length>0?kt[0]:"",gt=[],e.projectCharterInfoSelected.AgileWave!=null&&e.projectCharterInfoSelected.AgileWave!=""&&(gt=e.dsAgileWave.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.AgileWave})),e.selectedAgileWave=gt.length>0?gt[0]:"",ni=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===teamPermission&&n.LookUpMemberName!="None"}),ct=0;ct<ni.length;ct++)ti={text:ni[ct].LookUpMemberName,value:ni[ct].LookUpMemberID},nt.push(ti);y=JSON.parse(r.getRiskIssueResult);l=JSON.parse(u.getProjectTeamResult);p=JSON.parse(o.getScheduleResult);w=JSON.parse(h.getProjectCharterKeySuccessResult);b=JSON.parse(it.getProjectCharterAssumptionResult);k=JSON.parse(a.getProjectCharterFundingResult);e.riskIssueType=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===riskIssueType});e.dsFuntionalGroup=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===funtionalGroup});e.agileVisibleCharter=e.projectCharterInfoSelected.IsAgile;var vi=[],yi=[],pi=[];if(e.projectCharterInfoSelected.OtherImpactedProducts!=null&&e.projectCharterInfoSelected.OtherImpactedProducts!="undefined"&&(vi=e.projectCharterInfoSelected.OtherImpactedProducts.split(",")),e.projectCharterInfoSelected.ExecutionScopeID!=null&&e.projectCharterInfoSelected.ExecutionScopeID!="undefined"&&(yi=e.projectCharterInfoSelected.ExecutionScopeID.split(",")),e.dsImpactedProducts={placeholder:"Select and/or Type to Search",dataTextField:"LookUpMemberName",dataValueField:"LookUpMemberID",valuePrimitive:!0,autoBind:!1,dataSource:e.dsPrimaryProduct,filter:"contains"},e.projectCharterInfoSelected.OtherImpactedProducts=vi,e.dsExecutionScope={placeholder:"Select scope...",dataTextField:"LookUpMemberName",dataValueField:"LookUpMemberID",valuePrimitive:!0,autoBind:!1,dataSource:e.dsExecutionScope,filter:"contains"},e.projectCharterInfoSelected.ExecutionScope=yi,e.projectCharterInfoSelected.AgileSecondaryWorkstream!=null&&e.projectCharterInfoSelected.AgileSecondaryWorkstream!="undefined"&&(pi=e.projectCharterInfoSelected.AgileSecondaryWorkstream.split(",")),e.dsAgileSecWorkstream={placeholder:"Select secondary workstream...",dataTextField:"LookUpMemberName",dataValueField:"LookUpMemberID",valuePrimitive:!0,autoBind:!1,dataSource:e.dsAgilePrimaryWorkstation,filter:"contains"},e.agileSecWorkstreamIds=pi,ri=$("#ddl_PC_PrimaryProduct").data("kendoComboBox"),ri.value(e.SelectedProject.PrimaryProductID),ri.refresh(),ui=$("#ddl_PC_PortfolioOwner").data("kendoComboBox"),ui.value(e.SelectedProject.PortfolioOwnerID),ui.refresh(),c={},angular.copy(e.projectCharterInfoSelected,c),g==0){for(ct=0;ct<e.riskIssueType.length;ct++)wi={text:e.riskIssueType[ct].LookUpMemberName,value:e.riskIssueType[ct].LookUpMemberID},rt.push(wi);for(ct=0;ct<e.dsFundingType.length;ct++)bi={text:e.dsFundingType[ct].LookUpMemberName,value:e.dsFundingType[ct].LookUpMemberID},ut.push(bi);for(ct=0;ct<e.dsOwner.length;ct++)ki={text:e.dsOwner[ct].LookUpMemberName,value:e.dsOwner[ct].LookUpMemberID},ft.push(ki);for(ct=0;ct<e.dsFuntionalGroup.length;ct++)di={text:e.dsFuntionalGroup[ct].LookUpMemberName,value:e.dsFuntionalGroup[ct].LookUpMemberID},et.push(di);for(ct=0;ct<e.dsFuntionalGroup.length;ct++)fi=!1,(e.dsFuntionalGroup[ct].LookUpMemberID==projectmanager||e.dsFuntionalGroup[ct].LookUpMemberID==projectSponsor)&&(fi=!0),ti={text:e.dsFuntionalGroup[ct].LookUpMemberName,value:e.dsFuntionalGroup[ct].LookUpMemberID,isDisabled:fi},d.push(ti);for(ct=0;ct<e.dsPrimaryKPI.length;ct++)gi={text:e.dsPrimaryKPI[ct].LookUpMemberName,value:e.dsPrimaryKPI[ct].LookUpMemberID},ot.push(gi);at();vt();yt();pt();wt()}else tt(),$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid").dataSource.read(),$("#gridProjectCharterMilestone").data("kendoGrid").dataSource.read(),$("#gridProjectTeam").data("kendoGrid").dataSource.read(),$("#gridProjectCharterRisk").data("kendoGrid").dataSource.read(),$("#gridProjectCharterAssumption").data("kendoGrid").dataSource.read(),$("#gridProjectCharterFunding1").data("kendoGrid").dataSource.read();bindChangeComboBox("functionRequired");lt();i.$digest();hideLoading();g++}catch(nr){hideLoading();tr={method:"prepareDataForProjectCharter",exceptionMessage:"message:"+nr.message+" stack:"+nr.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",tr)).then(function(){alert(errormessage)})}})}catch(r){hideLoading();u={method:"prepareDataForProjectCharter",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}}function ci(n){kt();var t=$("#gridProjectCharterMilestone").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),i=$("#gridProjectCharterRisk").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),r=$("#gridProjectTeam").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),u=$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),f=$("#gridProjectCharterAssumption").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),o=$("#gridProjectCharterFunding1").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n});(angular.equals(c,e.projectCharterInfoSelected)==!1||t.length>0||i.length>0||r.length>0||u.length>0||f.length>0||o.length>0)&&(confirm(dialogCloseMessage)||n.preventDefault())}function kt(){e.projectCharterInfoSelected.OtherImpactedProducts!=null&&e.projectCharterInfoSelected.OtherImpactedProducts!=""&&(e.projectCharterInfoSelected.OtherImpactedProducts=e.projectCharterInfoSelected.OtherImpactedProducts.lemgth>1?e.projectCharterInfoSelected.OtherImpactedProducts.split(","):e.projectCharterInfoSelected.OtherImpactedProducts);$("#pc_parentProject").data("kendoComboBox").select()===-1?(e.SelectedParentProject=null,$("#pc_parentProject").data("kendoComboBox").value(""),e.projectCharterInfoSelected.ParentProgramID=null,e.projectCharterInfoSelected.ParentProgramName=null):(e.projectCharterInfoSelected.ParentProgramID=$("#pc_parentProject").data("kendoComboBox").text()===""?null:$("#pc_parentProject").data("kendoComboBox").value(),e.projectCharterInfoSelected.ParentProgramName=$("#pc_parentProject").data("kendoComboBox").text()===""?null:$("#pc_parentProject").data("kendoComboBox").text());ct&&n.$emit("UpdateAssociatedProject")}function li(n){trackEvent(n)}function ai(){var n,i;trackEvent("Project charter dialog opened");try{displayLoading();ni("PC_approvedDate");bindChangeComboBox("ddl_PC_PrimaryProduct");bindChangeComboBox("ddl_PC_PortfolioOwner");bindChangeComboBox("pc_governanceBody");it==!1&&($("#dialogProjectCharter").data("kendoWindow").bind("close",function(n){ci(n)}),it=!0);n=$("#dialogProjectCharter");IsProgram?pi():hi();n.data("kendoWindow").open()}catch(t){hideLoading();i={method:"openProjectCharterInfo",exceptionMessage:"message:"+t.message+" stack:"+t.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",i)).then(function(){alert(errormessage)})}}function vi(){var yt,t,i,w,b,k,d,g,nt,lt,vt;try{displayLoading();var r=[],u=[],o=[],l=[],v=[],y=[],p=[];if(e.milestoneInsertListItems=[],e.milestoneUpdateListItems=[],e.riskInsertListItems=[],e.riskUpdateListItems=[],e.teamsInsertListItems=[],e.teamsUpdateListItems=[],e.keySuccessInsertListItems=[],e.keySuccessUpdateListItems=[],e.assumptionInsertListItems=[],e.assumptionUpdateListItems=[],e.fundindInsertListItems=[],e.fundindUpdateListItems=[],e.SelectedParentProject==null&&e.projectCharterInfoSelected.ParentProgramID!=null?ct=!0:e.projectCharterInfoSelected!=null&&e.projectCharterInfoSelected!=undefined&&e.SelectedParentProject!=null&&e.projectCharterInfoSelected.ParentProgramID!=e.SelectedParentProject.ProblemUniqueID&&(ct=!0),yt=$("#pc_parentProject").data("kendoComboBox"),$("#pc_parentProject").data("kendoComboBox").select()===-1&&(e.SelectedParentProject=null,$("#pc_parentProject").data("kendoComboBox").value("")),t=!0,i=e.projectCharterInfoSelected.ApprovedDate!=null&&e.projectCharterInfoSelected.ApprovedDate!=""?$("#PC_approvedDate").val():null,i!=null&&(parseDate(i)?e.pcApprovedDateError=!1:(t=!1,e.pcApprovedDateError=!0)),!t){hideLoading();return}if(w=$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid").tbody.find("input:checked").length,w>keySuccessCharterCount)return alert(keySuccessCountMessage),hideLoading(),!1;if(b=$("#gridProjectCharterMilestone").data("kendoGrid").tbody.find("input:checked").length,b>milestoneCharterCount)return alert(milestoneCountMessage),hideLoading(),!1;if(k=$("#gridProjectTeam").data("kendoGrid").tbody.find("input:checked").length,k>teamCharterCount)return alert(teamCountMessage),hideLoading(),!1;if(d=$("#gridProjectCharterRisk").data("kendoGrid").tbody.find("input:checked").length,d>riskCharterCount)return alert(riskCountMessage),hideLoading(),!1;if(g=$("#gridProjectCharterAssumption").data("kendoGrid").tbody.find("input:checked").length,g>assumptionCharterCount)return alert(assumptionCountMessage),hideLoading(),!1;if(nt=$("#gridProjectCharterFunding1").data("kendoGrid").tbody.find("input:checked").length,nt>fundingCharterCount)return alert(fundingCountMessage),hideLoading(),!1;if($("#gridProjectCharterMilestone").data("kendoGrid")!=undefined){var tt=$("#gridProjectCharterMilestone").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),pt=tt.filter(function(n){return n.id==""||n.id==null}).map(function(n){return n}),wt=tt.filter(function(n){return n.id!=""&&n.id!=null}).map(function(n){return n});angular.forEach(pt,function(n){var t={};t.ScheduleUniqueID=n.ScheduleUniqueID;t.Milestone=n.Milestone;t.PlannedFinish=kendo.toString(n.PlannedFinish,"d");t.FunctionGroupID=n.FunctionGroupID;t.IncludeInCharter=n.IncludeInCharter;t.ProjectID=n.ProjectID;e.milestoneInsertListItems.push(t)});angular.forEach(wt,function(n){var t={};t.ScheduleUniqueID=n.ScheduleUniqueID;t.Milestone=n.Milestone;t.PlannedFinish=kendo.toString(n.PlannedFinish,"d");t.FunctionGroupID=n.FunctionGroupID;t.IncludeInCharter=n.IncludeInCharter;t.ProjectID=n.ProjectID;t.link=n.link;e.milestoneUpdateListItems.push(t)})}if(e.insertUpdateDeleteMilestone={insert:e.milestoneInsertListItems,update:e.milestoneUpdateListItems,"delete":e.deletedMilestoneData},$("#gridProjectCharterRisk").data("kendoGrid")!=undefined){var it=$("#gridProjectCharterRisk").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),bt=it.filter(function(n){return n.id==""||n.id==null}).map(function(n){return n}),dt=it.filter(function(n){return n.id!=""&&n.id!=null}).map(function(n){return n});angular.forEach(bt,function(n){var t={};t.RiskIssueUniqueID=n.RiskIssueUniqueID;t.IfHappens=n.IfHappens;t.RiskIssueResult=n.RiskIssueResult;t.Mitigation=n.Mitigation;t.RiskIssueTypeID=n.RiskIssueTypeID;t.IncludeInCharter=n.IncludeInCharter;t.ProjectID=n.ProjectID;e.riskInsertListItems.push(t)});angular.forEach(dt,function(n){var t={};t.RiskIssueUniqueID=n.RiskIssueUniqueID;t.IfHappens=n.IfHappens;t.RiskIssueResult=n.RiskIssueResult;t.Mitigation=n.Mitigation;t.RiskIssueTypeID=n.RiskIssueTypeID;t.IncludeInCharter=n.IncludeInCharter;t.ProjectID=n.ProjectID;t.link=n.link;e.riskUpdateListItems.push(t)})}if(e.insertUpdateDeleteRisk={insert:e.riskInsertListItems,update:e.riskUpdateListItems,"delete":e.deletedRiskData},$("#gridProjectTeam").data("kendoGrid")!=undefined){var rt=$("#gridProjectTeam").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),gt=rt.filter(function(n){return n.id==""||n.id==null}).map(function(n){return n}),ni=rt.filter(function(n){return n.id!=""&&n.id!=null}).map(function(n){return n});angular.forEach(gt,function(n){var t={},i;t.ProjectTeamUniqueID=n.ProjectTeamUniqueID;t.RoleID=n.RoleID;t.TeamMemberAdId=n.TeamMemberAdId;t.PercentTime=n.PercentTime;t.Duration=n.Duration;t.IncludeInCharter=n.IncludeInCharter;t.TeamPermissionID=n.TeamPermissionID!=null?n.TeamPermissionID:null;n.TeamMemberAdId!=null&&(i=h.filter(function(t){return t.value==n.TeamMemberAdId}),t.TeamMemberName=i.length>0?i[0].text:null);e.teamsInsertListItems.push(t)});angular.forEach(ni,function(n){var t={},i;t.ProjectTeamUniqueID=n.ProjectTeamUniqueID;t.RoleID=n.RoleID;t.TeamMemberAdId=n.TeamMemberAdId;t.PercentTime=n.PercentTime;t.Duration=n.Duration;t.IncludeInCharter=n.IncludeInCharter;t.TeamPermissionID=n.TeamPermissionID!=null?n.TeamPermissionID:null;n.TeamMemberAdId!=null&&(i=h.filter(function(t){return t.value==n.TeamMemberAdId}),t.TeamMemberName=i.length>0?i[0].text:null);e.teamsUpdateListItems.push(t)})}if(e.insertUpdateDeleteTeams={insert:e.teamsInsertListItems,update:e.teamsUpdateListItems,"delete":e.deletedTeamsData},$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid")!=undefined){var ut=$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),ti=ut.filter(function(n){return n.id==""||n.id==null}).map(function(n){return n}),ii=ut.filter(function(n){return n.id!=""&&n.id!=null}).map(function(n){return n});angular.forEach(ti,function(n){var t={};t.KeySuccessUniqueID=n.KeySuccessUniqueID;t.KPIID=n.KPIID;t.Metric=n.Metric;t.CurrentState=n.CurrentState;t.TargetPerformance=n.TargetPerformance;t.IncludeInCharter=n.IncludeInCharter;e.keySuccessInsertListItems.push(t)});angular.forEach(ii,function(n){var t={};t.KeySuccessUniqueID=n.KeySuccessUniqueID;t.KPIID=n.KPIID;t.Metric=n.Metric;t.CurrentState=n.CurrentState;t.TargetPerformance=n.TargetPerformance;t.IncludeInCharter=n.IncludeInCharter;e.keySuccessUpdateListItems.push(t)})}if(e.insertUpdateDeleteKeySuccess={insert:e.keySuccessInsertListItems,update:e.keySuccessUpdateListItems,"delete":e.deletedKeySuccessData},$("#gridProjectCharterAssumption").data("kendoGrid")!=undefined){var ft=$("#gridProjectCharterAssumption").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),ri=ft.filter(function(n){return n.id==""||n.id==null}).map(function(n){return n}),ui=ft.filter(function(n){return n.id!=""&&n.id!=null}).map(function(n){return n});angular.forEach(ri,function(n){var t={};t.KeyAssumptionUniqueID=n.KeyAssumptionUniqueID;t.KeyAssumption=n.KeyAssumption;t.AssumptionRationale=n.AssumptionRationale;t.IncludeInCharter=n.IncludeInCharter;e.assumptionInsertListItems.push(t)});angular.forEach(ui,function(n){var t={};t.KeyAssumptionUniqueID=n.KeyAssumptionUniqueID;t.KeyAssumption=n.KeyAssumption;t.AssumptionRationale=n.AssumptionRationale;t.IncludeInCharter=n.IncludeInCharter;e.assumptionUpdateListItems.push(t)})}if(e.insertUpdateDeleteAssumption={insert:e.assumptionInsertListItems,update:e.assumptionUpdateListItems,"delete":e.deletedAssumptionData},$("#gridProjectCharterFunding1").data("kendoGrid")!=undefined){var et=$("#gridProjectCharterFunding1").data("kendoGrid").dataSource.data().filter(function(n){return n.dirty}).map(function(n){return n}),fi=et.filter(function(n){return n.id==""||n.id==null}).map(function(n){return n}),ei=et.filter(function(n){return n.id!=""&&n.id!=null}).map(function(n){return n});angular.forEach(fi,function(n){var t={};t.FundingUniqueID=n.FundingUniqueID;t.FundingTypeID=n.FundingTypeID;t.FundingSourceID=n.FundingSourceID;t.FundingIntheplan=n.FundingIntheplan;t.FundingAmount=n.FundingAmount;t.FundingNotes=n.FundingNotes;t.IncludeInCharter=n.IncludeInCharter;e.fundindInsertListItems.push(t)});angular.forEach(ei,function(n){var t={};t.FundingUniqueID=n.FundingUniqueID;t.FundingTypeID=n.FundingTypeID;t.FundingSourceID=n.FundingSourceID;t.FundingIntheplan=n.FundingIntheplan;t.FundingAmount=n.FundingAmount;t.FundingNotes=n.FundingNotes;t.IncludeInCharter=n.IncludeInCharter;e.fundindUpdateListItems.push(t)})}e.insertUpdateDeleteFunding={insert:e.fundindInsertListItems,update:e.fundindUpdateListItems,"delete":e.deletedFundingData};var ot=[],st=[],ht=[];e.projectCharterInfoSelected.OtherImpactedProducts!=null&&(ot=e.projectCharterInfoSelected.OtherImpactedProducts.length>1?e.projectCharterInfoSelected.OtherImpactedProducts.join(","):e.projectCharterInfoSelected.OtherImpactedProducts[0]);e.projectCharterInfoSelected.ExecutionScope!=null&&(st=e.projectCharterInfoSelected.ExecutionScope.length>1?e.projectCharterInfoSelected.ExecutionScope.join(","):e.projectCharterInfoSelected.ExecutionScope[0]);e.agileSecWorkstreamIds!=null&&e.agileSecWorkstreamIds!=""&&(ht=e.agileSecWorkstreamIds.join(","));e.projectCharterInfoSelectedData={ProjectID:e.projectCharterInfoSelected.ProjectID!=null?e.projectCharterInfoSelected.ProjectID:null,ProjectName:e.projectCharterInfoSelected.ProjectName,PrimaryProductID:e.projectCharterInfoSelected.PrimaryProductID!=null?e.projectCharterInfoSelected.PrimaryProductID.LookUpMemberID:null,OtherImpactedProducts:e.projectCharterInfoSelected.OtherImpactedProducts!=null?ot:null,PortfolioOwnerID:e.projectCharterInfoSelected.PortfolioOwnerID!=null?e.projectCharterInfoSelected.PortfolioOwnerID.LookUpMemberID:null,ExecutionScopeID:e.projectCharterInfoSelected.ExecutionScope!=null?st:null,SponsorADID:e.projectCharterInfoSelected.SponsorADID!=null?e.projectCharterInfoSelected.SponsorADID.UserADId:null,ProjectManagerADID:e.projectCharterInfoSelected.ProjectManagerADID!=null?e.projectCharterInfoSelected.ProjectManagerADID.UserADId:null,ProposalStatement:e.projectCharterInfoSelected.ProposalStatement!=null?e.projectCharterInfoSelected.ProposalStatement:null,DetailedDescription:e.projectCharterInfoSelected.DetailedDescription!=null?e.projectCharterInfoSelected.DetailedDescription:null,InScope:e.projectCharterInfoSelected.InScope!=null?e.projectCharterInfoSelected.InScope:null,OutOfScope:e.projectCharterInfoSelected.OutOfScope!=null?e.projectCharterInfoSelected.OutOfScope:null,DurationBaseCase:e.projectCharterInfoSelected.DurationBaseCase!=null&&e.projectCharterInfoSelected.DurationBaseCase!=""?e.projectCharterInfoSelected.DurationBaseCase:null,DurationHighCase:e.projectCharterInfoSelected.DurationHighCase!=null&&e.projectCharterInfoSelected.DurationHighCase!=""?e.projectCharterInfoSelected.DurationHighCase:null,PeopleFTEMonthsRequiredBaseCase:e.projectCharterInfoSelected.PeopleFTEMonthsRequiredBaseCase!=null&&e.projectCharterInfoSelected.PeopleFTEMonthsRequiredBaseCase!=""?e.projectCharterInfoSelected.PeopleFTEMonthsRequiredBaseCase:null,PeopleFTEMonthsRequiredHighCase:e.projectCharterInfoSelected.PeopleFTEMonthsRequiredHighCase!=null&&e.projectCharterInfoSelected.PeopleFTEMonthsRequiredHighCase!=""?e.projectCharterInfoSelected.PeopleFTEMonthsRequiredHighCase:null,TotalCapExBaseCase:e.projectCharterInfoSelected.TotalCapExBaseCase!=null&&e.projectCharterInfoSelected.TotalCapExBaseCase!=""?e.projectCharterInfoSelected.TotalCapExBaseCase:null,TotalCapExHighCase:e.projectCharterInfoSelected.TotalCapExHighCase!=null&&e.projectCharterInfoSelected.TotalCapExHighCase!=""?e.projectCharterInfoSelected.TotalCapExHighCase:null,TotalNonFTEOpExBaseCase:e.projectCharterInfoSelected.TotalNonFTEOpExBaseCase!=null&&e.projectCharterInfoSelected.TotalNonFTEOpExBaseCase!=""?e.projectCharterInfoSelected.TotalNonFTEOpExBaseCase:null,TotalNonFTEOpExHighCase:e.projectCharterInfoSelected.TotalNonFTEOpExHighCase!=null&&e.projectCharterInfoSelected.TotalNonFTEOpExHighCase!=""?e.projectCharterInfoSelected.TotalNonFTEOpExHighCase:null,ParentProgramID:e.SelectedParentProject!=null&&e.SelectedParentProject.ProblemUniqueID!=""?e.SelectedParentProject.ProblemUniqueID:null,FunctionsRequiredID:e.projectCharterInfoSelected.FunctionsRequiredID!=null?e.projectCharterInfoSelected.FunctionsRequiredID.LookUpMemberID:null,ApprovedDate:e.projectCharterInfoSelected.ApprovedDate!=null&&e.projectCharterInfoSelected.ApprovedDate!=""?e.projectCharterInfoSelected.ApprovedDate:null,AgilePrimaryWorkstream:e.selectedAgilePrimaryWorkstream!=null&&e.selectedAgilePrimaryWorkstream!=""?e.selectedAgilePrimaryWorkstream.LookUpMemberID:null,AgileSecondaryWorkstream:ht,AgileWave:e.selectedAgileWave!=null&&e.selectedAgileWave!=""?e.selectedAgileWave.LookUpMemberID:null,PrimaryKPI:e.projectCharterInfoSelected.PrimaryKPI!=null?e.projectCharterInfoSelected.PrimaryKPI.LookUpMemberID:null,ProjectDescription:e.projectCharterInfoSelected.ProjectDescription!=null?e.projectCharterInfoSelected.ProjectDescription:null,TargetEndState:e.projectCharterInfoSelected.TargetEndState!=null?e.projectCharterInfoSelected.TargetEndState:null};r.push(e.insertUpdateDeleteMilestone);u.push(e.insertUpdateDeleteRisk);v.push(e.insertUpdateDeleteTeams);l.push(e.insertUpdateDeleteKeySuccess);o.push(e.insertUpdateDeleteAssumption);y.push(e.insertUpdateDeleteFunding);p.push(e.projectCharterInfoSelectedData);lt={ProjectID:e.projectCharterInfoSelected.ProjectID,objRiskIssue:JSON.stringify(u),objMilestone:JSON.stringify(r),objProjectTeam:JSON.stringify(v),objKeySuccess:JSON.stringify(l),objAssumption:JSON.stringify(o),objFunding:JSON.stringify(y),objProjectCharterInfo:JSON.stringify(p)};f.postDataWCFAsync("projectCharterUpdate",lt).then(function(t){if(t=="Success")angular.copy(e.SelectedParentProject,a),kt(),c={},angular.copy(e.projectCharterInfoSelected,c),hideLoading(),IsProgram?wi():yi(),$.when(f.postDataWCF("getProjectNameByID",SeletedProjectId),f.getDataWCF("getProjectTeam/"+SeletedProjectId)).then(function(t,i){var e=JSON.parse(t.getProjectNameByIDResult),r,u;SeletedProjectName=e[0].ProjectName;n.$emit("UpdateProjectNameHub",SeletedProjectName);n.$emit("ProjectHubGetCall",SeletedProjectName);r=[];r=JSON.parse(i.getProjectTeamResult);ProjectSiteUrl!=""&&r.length>0&&e[0].IsConfidential==!0&&(u=[],angular.copy(r,u),f.getAllMembers(u))}),n.$emit("UpdateHubLoad",!0),n.$emit("UpdateGeneralInfo",!0),alert(saveMessage);else{hideLoading();alert("Error occurred in Project Charter Update");var i={method:"updateProjectCharterInfo",exceptionMessage:"message:"+t,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",i)).then(function(){console.log(errormessage)})}})}catch(at){hideLoading();vt={method:"updateProjectCharterInfo",exceptionMessage:"message:"+at.message+" stack:"+at.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",vt)).then(function(){alert(errormessage)})}}function yi(){$.when(f.getDataWCFAsync("getRiskIssue/"+SeletedProjectId),f.getDataWCFAsync("getProjectTeam/"+SeletedProjectId),f.getDataWCFAsync("getSchedule/"+SeletedProjectId),f.postDataWCFAsync("getProjectCharterKeySuccess",SeletedProjectId),f.postDataWCFAsync("getProjectCharterFunding",SeletedProjectId),f.postDataWCFAsync("getProjectCharterAssumption",SeletedProjectId)).then(function(n,t,r,u,e,o){try{y=JSON.parse(n.getRiskIssueResult);l=JSON.parse(t.getProjectTeamResult);p=JSON.parse(r.getScheduleResult);w=JSON.parse(u.getProjectCharterKeySuccessResult);b=JSON.parse(o.getProjectCharterAssumptionResult);k=JSON.parse(e.getProjectCharterFundingResult);tt();$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid").dataSource.read();$("#gridProjectCharterMilestone").data("kendoGrid").dataSource.read();$("#gridProjectTeam").data("kendoGrid").dataSource.read();$("#gridProjectCharterRisk").data("kendoGrid").dataSource.read();$("#gridProjectCharterAssumption").data("kendoGrid").dataSource.read();$("#gridProjectCharterFunding1").data("kendoGrid").dataSource.read();i.$digest()}catch(h){hideLoading();var c={method:"getDataForGrids",exceptionMessage:"message:"+h.message+" stack:"+h.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",c)).then(function(){alert(errormessage)})}})}function tt(){try{h=[];angular.forEach(l,function(n){var i,t;n.TeamMemberAdId!=null&&n.TeamMemberAdId!=""&&(i=h.filter(function(t){return t.value===n.TeamMemberAdId}),i.length==0&&(t={},t.text=n.TeamMemberName,t.value=n.TeamMemberAdId,t.UserCountry=n.UserCountry,t.UserImageUrl=n.UserImageUrl,t.UserEmailAddress=n.UserEmailAddress,t.UserDepartment=n.UserDepartment,h.push(t)))})}catch(n){hideLoading();var t={method:"UpdateProjectTeamUsers",exceptionMessage:"message:"+n.message+" stack:"+n.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",t)).then(function(){alert(errormessage)})}}function pi(){var n,u;e.deletedMilestoneData=[];e.deletedRiskData=[];e.deletedKeySuccessData=[];e.deletedAssumptionData=[];e.deletedTeamsData=[];e.deletedFundingData=[];e.options={format:"n1",decimals:1,min:0,restrictDecimals:!0};e.optionsCurrency={format:"n0",decimals:0,min:0,restrictDecimals:!0};e.pcApprovedDateError=!1;e.isPortfolioOwnerEditablePC=canPortfolioOwnerEdit;try{SeletedProjectId=getParameterByName(window.location.search,"ProblemID");st={ProjectID:SeletedProjectId,DataType:"RiskIssue"};ht={ProjectID:SeletedProjectId,DataType:"Schedule"};n=product+","+portfolioOwner+","+CapitalProjectClassification+","+topsFunctionRequired+","+riskIssueType+","+businessCaseFundingType+","+funtionalGroup+","+executionScope+","+teamPermission+","+topsPrimaryKpi+","+agileAttribute+","+agileWave;$.when(f.postDataWCFAsync("getLookupData",n),f.postDataWCFAsync("getProgramHubData",st),f.getDataWCFAsync("getProjectTeam/"+SeletedProjectId),f.postDataWCFAsync("getProgramHubData",ht),f.postDataWCFAsync("getProjectCharterKeySuccess",SeletedProjectId),f.postDataWCFAsync("getProjectCharterFunding",SeletedProjectId),f.postDataWCFAsync("getProjectCharterInfoByID",SeletedProjectId),f.postDataWCFAsync("getProjectCharterAssumption",SeletedProjectId),f.getDataWCFAsync("getUserPermissionByProjectUserId/"+currentUserId+"/"+SeletedProjectId),f.postDataWCFAsync("getUserTeamPermission")).then(function(n,r,u,o,h,a,v,it,st,ht){var ii,ei,oi,si,hi,ci,li,ai,kt,gt,ni,ri,ui,wi,bi,ki,di,gi,ct,fi,ti,tr;try{for(e.dsPermission=JSON.parse(st.getUserPermissionByProjectUserIdResult),e.isEditable=e.dsPermission[0].canEdit==!0?!0:!1,e.dsPrimaryProduct=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===product}),e.dsOwner=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===portfolioOwner}),e.dsExecutionScope=t("orderBy")(JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==executionScope}),"LookUpMemberOrder"),e.dsProjectClassification=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===CapitalProjectClassification}),e.dsAgilePrimaryWorkstation=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==agileAttribute}),e.dsAgileWave=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==agileWave}),e.dsPrimaryKPI=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName==topsPrimaryKpi}),e.functionRequired=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===topsFunctionRequired}),e.dsProjectClassification=t("orderBy")(e.dsProjectClassification,"LookUpMemberOrder"),e.dsPrimaryProduct=t("orderBy")(e.dsPrimaryProduct,"LookUpMemberOrder"),e.dsFundingType=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===businessCaseFundingType}),bt=JSON.parse(ht.getUserTeamPermissionResult),ii=JSON.parse(v.getProjectCharterInfoByIDResult),ii.length>0&&(e.projectCharterInfoSelected=ii[0]),e.localCurrencyAbbrePlaceholder=e.projectCharterInfoSelected.LocalCurrencyAbbreviation,e.projectCharterInfoSelected.LocalCurrencyAbbreviation!=null&&(e.localCurrencyAbbre="("+e.projectCharterInfoSelected.LocalCurrencyAbbreviation+")"),ei=e.projectCharterInfoSelected.ParentProgramName,oi=e.projectCharterInfoSelected.ParentProgramID,dt(oi,ei),e.projectCharterInfoSelected.PrimaryProductID!=null&&e.projectCharterInfoSelected.PrimaryProductID!=""&&(si=e.dsPrimaryProduct.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.PrimaryProductID}),e.projectCharterInfoSelected.PrimaryProductID=si[0]),e.projectCharterInfoSelected.PortfolioOwnerID!=null&&e.projectCharterInfoSelected.PortfolioOwnerID!=""&&(hi=e.dsOwner.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.PortfolioOwnerID}),e.projectCharterInfoSelected.PortfolioOwnerID=hi[0]),e.projectCharterInfoSelected.GovernanceBodyTypeID!=null&&e.projectCharterInfoSelected.GovernanceBodyTypeID!=""&&(ci=e.dsOwner.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.GovernanceBodyTypeID}),e.projectCharterInfoSelected.GovernanceBodyTypeID=ci[0]),e.projectCharterInfoSelected.FunctionsRequiredID!=null&&e.projectCharterInfoSelected.FunctionsRequiredID!=""&&(li=e.functionRequired.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.FunctionsRequiredID}),e.projectCharterInfoSelected.FunctionsRequiredID=li[0]),e.projectCharterInfoSelected.PrimaryKPI!=null&&e.projectCharterInfoSelected.PrimaryKPI!=""&&(ai=e.dsPrimaryKPI.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.PrimaryKPI}),e.projectCharterInfoSelected.PrimaryKPI=ai[0]),kt=[],e.projectCharterInfoSelected.AgilePrimaryWorkstream!=null&&e.projectCharterInfoSelected.AgilePrimaryWorkstream!=""&&(kt=e.dsAgilePrimaryWorkstation.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.AgilePrimaryWorkstream})),e.selectedAgilePrimaryWorkstream=kt.length>0?kt[0]:"",gt=[],e.projectCharterInfoSelected.AgileWave!=null&&e.projectCharterInfoSelected.AgileWave!=""&&(gt=e.dsAgileWave.filter(function(n){return n.LookUpMemberID==e.projectCharterInfoSelected.AgileWave})),e.selectedAgileWave=gt.length>0?gt[0]:"",ni=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===teamPermission&&n.LookUpMemberName!="None"}),ct=0;ct<ni.length;ct++)ti={text:ni[ct].LookUpMemberName,value:ni[ct].LookUpMemberID},nt.push(ti);y=JSON.parse(r);l=JSON.parse(u.getProjectTeamResult);p=JSON.parse(o);w=JSON.parse(h.getProjectCharterKeySuccessResult);b=JSON.parse(it.getProjectCharterAssumptionResult);k=JSON.parse(a.getProjectCharterFundingResult);e.riskIssueType=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===riskIssueType});e.dsFuntionalGroup=JSON.parse(n.getLookupDataResult).filter(function(n){return n.LookUpName===funtionalGroup});e.agileVisibleCharter=e.projectCharterInfoSelected.IsAgile;var vi=[],yi=[],pi=[];if(e.projectCharterInfoSelected.OtherImpactedProducts!=null&&e.projectCharterInfoSelected.OtherImpactedProducts!="undefined"&&(vi=e.projectCharterInfoSelected.OtherImpactedProducts.split(",")),e.projectCharterInfoSelected.ExecutionScopeID!=null&&e.projectCharterInfoSelected.ExecutionScopeID!="undefined"&&(yi=e.projectCharterInfoSelected.ExecutionScopeID.split(",")),e.dsImpactedProducts={placeholder:"Select and/or Type to Search",dataTextField:"LookUpMemberName",dataValueField:"LookUpMemberID",valuePrimitive:!0,autoBind:!1,dataSource:e.dsPrimaryProduct,filter:"contains"},e.projectCharterInfoSelected.OtherImpactedProducts=vi,e.dsExecutionScope={placeholder:"Select scope...",dataTextField:"LookUpMemberName",dataValueField:"LookUpMemberID",valuePrimitive:!0,autoBind:!1,dataSource:e.dsExecutionScope,filter:"contains"},e.projectCharterInfoSelected.ExecutionScope=yi,e.projectCharterInfoSelected.AgileSecondaryWorkstream!=null&&e.projectCharterInfoSelected.AgileSecondaryWorkstream!="undefined"&&(pi=e.projectCharterInfoSelected.AgileSecondaryWorkstream.split(",")),e.dsAgileSecWorkstream={placeholder:"Select secondary workstream...",dataTextField:"LookUpMemberName",dataValueField:"LookUpMemberID",valuePrimitive:!0,autoBind:!1,dataSource:e.dsAgilePrimaryWorkstation,filter:"contains"},e.agileSecWorkstreamIds=pi,ri=$("#ddl_PC_PrimaryProduct").data("kendoComboBox"),ri.value(e.SelectedProject.PrimaryProductID),ri.refresh(),ui=$("#ddl_PC_PortfolioOwner").data("kendoComboBox"),ui.value(e.SelectedProject.PortfolioOwnerID),ui.refresh(),c={},angular.copy(e.projectCharterInfoSelected,c),g==0){for(ct=0;ct<e.riskIssueType.length;ct++)wi={text:e.riskIssueType[ct].LookUpMemberName,value:e.riskIssueType[ct].LookUpMemberID},rt.push(wi);for(ct=0;ct<e.dsFundingType.length;ct++)bi={text:e.dsFundingType[ct].LookUpMemberName,value:e.dsFundingType[ct].LookUpMemberID},ut.push(bi);for(ct=0;ct<e.dsOwner.length;ct++)ki={text:e.dsOwner[ct].LookUpMemberName,value:e.dsOwner[ct].LookUpMemberID},ft.push(ki);for(ct=0;ct<e.dsFuntionalGroup.length;ct++)di={text:e.dsFuntionalGroup[ct].LookUpMemberName,value:e.dsFuntionalGroup[ct].LookUpMemberID},et.push(di);for(ct=0;ct<e.dsPrimaryKPI.length;ct++)gi={text:e.dsPrimaryKPI[ct].LookUpMemberName,value:e.dsPrimaryKPI[ct].LookUpMemberID},ot.push(gi);for(ct=0;ct<e.dsFuntionalGroup.length;ct++)fi=!1,(e.dsFuntionalGroup[ct].LookUpMemberID==projectmanager||e.dsFuntionalGroup[ct].LookUpMemberID==projectSponsor)&&(fi=!0),ti={text:e.dsFuntionalGroup[ct].LookUpMemberName,value:e.dsFuntionalGroup[ct].LookUpMemberID,isDisabled:fi},d.push(ti);at();vt();yt();pt();wt()}else tt(),$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid").dataSource.read(),$("#gridProjectCharterMilestone").data("kendoGrid").dataSource.read(),$("#gridProjectTeam").data("kendoGrid").dataSource.read(),$("#gridProjectCharterRisk").data("kendoGrid").dataSource.read(),$("#gridProjectCharterAssumption").data("kendoGrid").dataSource.read(),$("#gridProjectCharterFunding1").data("kendoGrid").dataSource.read();bindChangeComboBox("functionRequired");lt();i.$digest();hideLoading();g++}catch(nr){hideLoading();tr={method:"prepareDataForProgramCharter",exceptionMessage:"message:"+nr.message+" stack:"+nr.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",tr)).then(function(){alert(errormessage)})}})}catch(r){hideLoading();u={method:"prepareDataForProgramCharter",exceptionMessage:"message:"+r.message+" stack:"+r.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",u)).then(function(){alert(errormessage)})}}function wi(){$.when(f.postDataWCFAsync("getProgramHubData",st),f.getDataWCFAsync("getProjectTeam/"+SeletedProjectId),f.postDataWCFAsync("getProgramHubData",ht),f.postDataWCFAsync("getProjectCharterKeySuccess",SeletedProjectId),f.postDataWCFAsync("getProjectCharterFunding",SeletedProjectId),f.postDataWCFAsync("getProjectCharterAssumption",SeletedProjectId)).then(function(n,t,r,u,e,o){try{y=JSON.parse(n);l=JSON.parse(t.getProjectTeamResult);p=JSON.parse(r);w=JSON.parse(u.getProjectCharterKeySuccessResult);b=JSON.parse(o.getProjectCharterAssumptionResult);k=JSON.parse(e.getProjectCharterFundingResult);tt();$("#gridProjectCharterKeySuccessCriteria").data("kendoGrid").dataSource.read();$("#gridProjectCharterMilestone").data("kendoGrid").dataSource.read();$("#gridProjectTeam").data("kendoGrid").dataSource.read();$("#gridProjectCharterRisk").data("kendoGrid").dataSource.read();$("#gridProjectCharterAssumption").data("kendoGrid").dataSource.read();$("#gridProjectCharterFunding1").data("kendoGrid").dataSource.read();i.$digest()}catch(h){hideLoading();var c={method:"getProgramDataForGrids",exceptionMessage:"message:"+h.message+" stack:"+h.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",c)).then(function(){alert(errormessage)})}})}function dt(n,t){var i=[{ProblemUniqueID:n,ProjectName:t}],u=SeletedProjectId,r=n;bi("pc_parentProject",i,"Parent",u,r);r=[];e.SelectedParentProject=i[0];angular.copy(e.SelectedParentProject,a)}function bi(n,t,r,u,o){var h=$("#"+n).data("kendoComboBox"),l;if(h==undefined){$("#"+n).kendoComboBox({dataTextField:"ProjectName",dataValueField:"ProblemUniqueID",dataSource:t,minLength:3,value:o,select:function(t){var r,u;e.SelectedParentProject={ProblemUniqueID:t.dataItem.ProblemUniqueID,ProjectName:t.dataItem.ProjectName};angular.equals(a,e.SelectedParentProject)===!1&&a.ProblemUniqueID!==undefined&&a.ProblemUniqueID!==null?confirm(parentProgChangMsg)?needHubreload=!0:(r=[],r.push(e.SelectedParentProject),angular.copy(a,e.SelectedParentProject),u=$("#"+n).data("kendoComboBox"),u.setDataSource(r),$("#"+n).data("kendoComboBox").value(a.ProblemUniqueID),i.$digest()):needHubreload=!0},placeholder:projectPickerPlaceholder});try{$("#"+n).data().kendoComboBox.input.on("keydown",function(i){var l,h,a,c,o;i.keyCode==13&&(o=$("#"+n).data("kendoComboBox"),l="",console.log(o.value()),h=o.input[0].value,a=e.projectCharterInfoSelected.IsConfidential===!0?"1":"0",console.log(h),h.length>=3?(displayLoading(),c={programUID:u,searchFor:r+"-"+e.projectCharterInfoSelected.IsConfidential,filterString:h},$.when(f.postDataWCFAsync("getAllProjectProgramListFilter",c)).then(function(n){try{t=JSON.parse(n);o.setDataSource(t);o.open();hideLoading()}catch(i){var r={method:"searchProjectParentCharter",exceptionMessage:"message:"+i.message+" stack:"+i.stack,ErrorParameter:s};$.when(f.postDataWCFAsync("WriteErrorLog",r)).then(function(){alert(errormessage)});hideLoading()}})):(alert(minThreeLetterMsg),t=[],o=$("#"+n).data("kendoComboBox"),o.setDataSource(t),o.close(),hideLoading()));i.keyCode==8||i.keyCode==46?$("#"+n).data("kendoComboBox").value(""):(t=[],o=$("#"+n).data("kendoComboBox"),o.setDataSource(t),o.close())})}catch(c){l={method:"searchProjectParentCharter",exceptionMessage:"message:"+c.message+" stack:"+c.stack,ErrorParameter:s};$.when(postDataWCFAsync("WriteErrorLog",l)).then(function(){alert(errormessage)});hideLoading()}}else h.setDataSource(t),h.value(o),hideLoading();return""}function ki(){}var e=this,it,nt,c;e.agileVisibleCharter=!1;e.buildNo=buildNo;e.releaseDate=releaseDate;e.SelectedProject={};e.projectCharterInfoSelected={};e.dsProjectCharterInfo=[];e.riskIssueType=[];e.scheduleData=[];e.isEditable=!1;e.projectVisible=!0;e.programVisible=!1;it=!1;e.isPortfolioOwnerEditablePC=!1;e.projectCharterPagepath=projectCharterPagepath;e.projectCharter=projectCharter;e.trackEventFunc=li;e.deletedMilestoneData=[];e.deletedRiskData=[];e.deletedKeySuccessData=[];e.deletedAssumptionData=[];e.deletedTeamsData=[];e.deletedFundingData=[];e.dateFormatlabel=dateLabel;e.dateErrorMsg=InValidDateFormat;var y=[],l=[],p=[],w=[],b=[],k=[],rt=[],ut=[],ft=[],et=[],d=[],bt=[],ot=[],g=0,h=[],st,ht,s="ProjectCharterCtrl",a={},ct=!1;e.initProjectCharter=ki;e.InitkGridProjectCharterKeySuccessCriteria=at;e.InitkGridProjectCharterMilestone=vt;e.InitkGridProjectCharterRisk=pt;e.InitkGridProjectTeam=yt;e.InitkGridProjectCharterFunding=wt;e.updateProjectCharterInfo=vi;e.openProjectCharterInfo=ai;e.AddNewRow=v;e.gridAddDefaultRows=lt;e.changeAgile=gt;nt=[];c={};e.localCurrencyAbbrePlaceholder;e.localCurrencyAbbre;var di=function(){return e.isEditable==!1?'<input type="checkbox" #= item.IncludeInCharter ? checked="checked" : "" # class="successchkbx" disabled="disabled"/>':'<input type="checkbox" #= item.IncludeInCharter ? \'checked="checked"\' : "" # class="successchkbx" />'},ti=function(n){return e.isEditable==!1?n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input disabled="disabled" checked type="checkbox" class="milestoneChkbx" />':o(n,"IncludeInCharter")+'<input disabled="disabled" type="checkbox" class="milestoneChkbx" />':n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input type="checkbox" checked class="milestoneChkbx" />':o(n,"IncludeInCharter")+'<input type="checkbox" class="milestoneChkbx" />'},ii=function(n){return e.isEditable==!1?n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input disabled="disabled" checked type="checkbox" class="teamChkbx" />':o(n,"IncludeInCharter")+'<input disabled="disabled" type="checkbox" class="teamChkbx" />':n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input type="checkbox" checked class="teamChkbx" />':o(n,"IncludeInCharter")+'<input type="checkbox" class="teamChkbx" />'},ri=function(n){return e.isEditable==!1?n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input disabled="disabled" checked type="checkbox" class="riskChkbx" />':o(n,"IncludeInCharter")+'<input disabled="disabled" type="checkbox" class="riskChkbx" />':n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input type="checkbox" checked class="riskChkbx" />':o(n,"IncludeInCharter")+'<input type="checkbox" class="riskChkbx" />'},ui=function(n){return e.isEditable==!1?n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input disabled="disabled" checked type="checkbox" class="fundChkbx" />':o(n,"IncludeInCharter")+'<input disabled="disabled" type="checkbox" class="fundChkbx" />':n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input type="checkbox" checked class="fundChkbx" />':o(n,"IncludeInCharter")+'<input type="checkbox" class="fundChkbx" />'},fi=function(n){return e.isEditable==!1?n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input disabled="disabled" checked type="checkbox" class="assumptionChkbx" />':o(n,"IncludeInCharter")+'<input disabled="disabled" type="checkbox" class="assumptionChkbx" />':n.IncludeInCharter==!0?o(n,"IncludeInCharter")+'<input type="checkbox" checked class="assumptionChkbx" />':o(n,"IncludeInCharter")+'<input type="checkbox" class="assumptionChkbx" />'},o=function(n,t){return n.dirty&&n.dirtyFields[t]?"<span class='k-dirty'><\/span>":""}}angular.module("SPOTApp").controller("ProjectCharterCtrl",ProjectCharterCtrl);ProjectCharterCtrl.$inject=["$rootScope","$filter","$scope","$http","$q","GETPostService"];